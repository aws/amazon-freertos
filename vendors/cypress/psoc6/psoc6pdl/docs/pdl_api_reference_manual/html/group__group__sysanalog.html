<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSoC 6 Peripheral Driver Library: SysAnalog    (System Analog Reference Block)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSoC 6 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__sysanalog.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">SysAnalog (System Analog Reference Block)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>This driver provides an interface for configuring the Analog Reference (AREF) block and querying the INTR_CAUSE register of the PASS. </p>
<p>The functions and other declarations used in this driver are in cy_sysanalog.h. You can include cy_pdl.h (ModusToolbox only) to get access to all functions and declarations in the PDL.</p>
<p>The AREF block has the following features:</p>
<ul>
<li>Generates a voltage reference (VREF) from one of three sources:<ul>
<li>Local 1.2 V reference (<b>low noise, optimized for analog performance</b>)</li>
<li>Reference from the SRSS (high noise, not recommended for analog performance)</li>
<li>An external pin</li>
</ul>
</li>
<li>Generates a 1 uA "zero dependency to absolute temperature" (IZTAT) current reference that is independent of temperature variations. It can come from one of two sources:<ul>
<li>Local reference (<b>low noise, optimized for analog performance</b>)</li>
<li>Reference from the SRSS (high noise, not recommended for analog performance)</li>
</ul>
</li>
<li>Generates a "proportional to absolute temperature" (IPTAT) current reference</li>
<li>Option to enable local references in Deep Sleep mode</li>
</ul>
<p>The locally generated references are the recommended sources for blocks in the PASS because they have tighter accuracy, temperature stability, and lower noise than the SRSS references. The SRSS references can be used to save power if the low accuracy and higher noise can be tolerated.</p>
<div class="image">
<img src="aref_block_diagram.png" alt="aref_block_diagram.png"/>
</div>
 <p>The outputs of the AREF are consumed by multiple blocks in the PASS and by the CapSense (CSDv2) block. In some cases, these blocks have the option of using the references from the AREF. This selection would be in the respective drivers for these blocks. In some cases, these blocks require the references from the AREF to function.</p>
<table class="doxtable">
<tr>
<th>AREF Output</th><th><a class="el" href="group__group__sar.html">SAR</a></th><th><a class="el" href="group__group__ctdac.html">CTDAC</a></th><th><a class="el" href="group__group__ctb.html">CTB</a></th><th>CSDv2 </th></tr>
<tr>
<td>VREF </td><td>optional </td><td>optional </td><td>&ndash; </td><td>optional  </td></tr>
<tr>
<td>IZTAT </td><td><b>required</b> </td><td>&ndash; </td><td>optional </td><td>optional  </td></tr>
<tr>
<td>IPTAT </td><td>&ndash; </td><td>&ndash; </td><td><b>required</b> </td><td>&ndash;  </td></tr>
</table>
<p>This driver provides a function to query the INTR_CAUSE register of the PASS. There are two interrupts in the PASS:</p>
<ol type="1">
<li>one global interrupt for all CTBs (up to 4)</li>
<li>one global interrupt for all CTDACs (up to 4)</li>
</ol>
<p>Because the interrupts are global, the INTR_CAUSE register is needed to query which hardware instance triggered the interrupt.</p>
<h1><a class="anchor" id="group_sysanalog_usage"></a>
Usage</h1>
<h2><a class="anchor" id="group_sysanalog_usage_init"></a>
Initialization</h2>
<p>To configure the AREF, call <a class="el" href="group__group__sysanalog__functions.html#gacef4e5ae550518abd0004e46e5ec4d64">Cy_SysAnalog_Init</a> and provide a pointer to the configuration structure, <a class="el" href="structcy__stc__sysanalog__config__t.html">cy_stc_sysanalog_config_t</a>. Three predefined structures are provided in this driver to cover a majority of use cases:</p>
<ul>
<li><a class="el" href="group__group__sysanalog__globals.html#ga85e9e1cd8c1e6fe581043cbab3083017">Cy_SysAnalog_Fast_Local</a> <b>(recommended for analog performance)</b></li>
<li><a class="el" href="group__group__sysanalog__globals.html#gaf0a91cc831b1e5b70b8c4327a571d4b4">Cy_SysAnalog_Fast_SRSS</a></li>
<li><a class="el" href="group__group__sysanalog__globals.html#ga2bed42fba0641096ff28cdb776eb1548">Cy_SysAnalog_Fast_External</a></li>
</ul>
<p>After initialization, call <a class="el" href="group__group__sysanalog__functions.html#ga153249c7b4cea72ee334ae877a211169">Cy_SysAnalog_Enable</a> to enable the hardware.</p>
<h2><a class="anchor" id="group_sysanalog_usage_dsop"></a>
Deep Sleep Operation</h2>
<p>The AREF current and voltage references can be enabled to operate in Deep Sleep mode with <a class="el" href="group__group__sysanalog__functions.html#ga5d6d537beaf82fddf8e06f30b1d308b3">Cy_SysAnalog_SetDeepSleepMode</a>. There are four options for Deep Sleep operation:</p>
<ul>
<li><a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12a00f19ce656942fbb30c5cff00c891dc6">CY_SYSANALOG_DEEPSLEEP_DISABLE</a> : Disable AREF IP block</li>
<li><a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12a040af8630904ae7b6e969a18c2712a70">CY_SYSANALOG_DEEPSLEEP_IPTAT_1</a> : Enable IPTAT generator for fast wakeup from Deep Sleep mode. IPTAT outputs for CTBs are disabled.</li>
<li><a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12ac3b1263aa8889f21a72a8ec9d21066b2">CY_SYSANALOG_DEEPSLEEP_IPTAT_2</a> : Enable IPTAT generator and IPTAT outputs for CTB</li>
<li><a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12aaf8feaa23b7bbbdaba3981fa7e9a64de">CY_SYSANALOG_DEEPSLEEP_IPTAT_IZTAT_VREF</a> : Enable all generators and outputs: IPTAT, IZTAT, and VREF</li>
</ul>
<p>Recall that the CTB requires the IPTAT reference. For the CTB to operate at the 1 uA current mode in Deep Sleep mode, the AREF must be enabled for <a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12aaf8feaa23b7bbbdaba3981fa7e9a64de">CY_SYSANALOG_DEEPSLEEP_IPTAT_IZTAT_VREF</a>. For the CTB to operate at the 100 nA current mode in Deep Sleep mode, the AREF must be enabled for <a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12ac3b1263aa8889f21a72a8ec9d21066b2">CY_SYSANALOG_DEEPSLEEP_IPTAT_2</a> minimum. In this lower current mode, the AREF IPTAT must be redirected to the CTB IZTAT. See the high level function <a class="el" href="group__group__ctb__functions__aref.html#ga5a5dfa4b6150d4ba15f05a5c5ccdcaae">Cy_CTB_SetCurrentMode</a> in the CTB PDL driver.</p>
<p>If the CTDAC is configured to use the VREF in Deep Sleep mode, the AREF must be enabled for <a class="el" href="group__group__sysanalog__enums.html#gga0aadb061d882d9a964dff3729322cf12aaf8feaa23b7bbbdaba3981fa7e9a64de">CY_SYSANALOG_DEEPSLEEP_IPTAT_IZTAT_VREF</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The SRSS references are not available to the AREF in Deep Sleep mode. When operating in Deep Sleep mode, the local or external references must be selected.</dd></dl>
<h1><a class="anchor" id="group_sysanalog_more_information"></a>
More Information</h1>
<p>For more information on the AREF, refer to the technical reference manual (TRM).</p>
<h1><a class="anchor" id="group_sysanalog_MISRA"></a>
MISRA-C Compliance]</h1>
<p>This driver does not have any specific deviations.</p>
<h1><a class="anchor" id="group_sysanalog_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td rowspan="2">1.10 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory.  </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td>Added register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__sysanalog__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysanalog__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysanalog__functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysanalog__functions.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysanalog__globals"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysanalog__globals.html">Global Variables</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysanalog__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysanalog__data__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysanalog__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysanalog__enums.html">Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSoC 6 Peripheral Driver Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
