<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSoC 6 Peripheral Driver Library: TCPWM        (Timer Counter PWM)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSoC 6 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__tcpwm.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">TCPWM (Timer Counter PWM)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>The TCPWM driver is a multifunction driver that implements Timer Counter, PWM, and Quadrature Decoder functionality using the TCPWM block. </p>
<p>The functions and other declarations used in this driver are in cy_tcpwm_counter.h, cy_tcpwm_pwm.h, cy_tcpwm_quaddec.h respectively. Include cy_pdl.h (ModusToolbox only) to get access to all functions and declarations in the PDL.</p>
<p>Each TCPWM block is a collection of counters that can all be triggered simultaneously. For each function call, the base register address of the TCPWM being used must be passed first, followed by the index of the counter you want to touch next. For some functions, you can manage multiple counters simultaneously. You provide a bit field representing each counter, rather than the single counter index).</p>
<p>The TCPWM supports three operating modes:</p><ul>
<li>Timer/Counter</li>
<li>PWM</li>
<li>Quadrature Decoder</li>
</ul>
<p><br />
<b>Timer/Counter</b> </p>
<p>Use this mode whenever a specific timing interval or measurement is needed. Examples include:</p><ul>
<li>Creating a periodic interrupt for running other system tasks</li>
<li>Measuring frequency of an input signal</li>
<li>Measuring pulse width of an input signal</li>
<li>Measuring time between two external events</li>
<li>Counting events</li>
<li>Triggering other system resources after x number events</li>
<li>Capturing time stamps when events occur</li>
</ul>
<p>The Timer/Counter has the following features:</p><ul>
<li>16- or 32-bit Timer/Counter</li>
<li>Programmable Period Register</li>
<li>Programmable Compare Register. Compare value can be swapped with a buffered compare value on comparison event</li>
<li>Capture with buffer register</li>
<li>Count Up, Count Down, or Count Up and Down Counting modes</li>
<li>Continuous or One Shot Run modes</li>
<li>Interrupt and Output on Overflow, Underflow, Capture, or Compare</li>
<li>Start, Reload, Stop, Capture, and Count Inputs</li>
</ul>
<p><br />
<b>PWM</b> </p>
<p>Use this mode when an output square wave is needed with a specific period and duty cycle, such as:</p><ul>
<li>Creating arbitrary square wave outputs</li>
<li>Driving an LED (changing the brightness)</li>
<li>Driving Motors (dead time assertion available)</li>
</ul>
<p>The PWM has the following features:</p><ul>
<li>16- or 32-bit Counter</li>
<li>Two Programmable Period registers that can be swapped</li>
<li>Two Output Compare registers that can be swapped on overflow and/or underflow</li>
<li>Left Aligned, Right Aligned, Center Aligned, and Asymmetric Aligned modes</li>
<li>Continuous or One Shot run modes</li>
<li>Pseudo Random mode</li>
<li>Two PWM outputs with Dead Time insertion, and programmable polarity</li>
<li>Interrupt and Output on Overflow, Underflow, or Compare</li>
<li>Start, Reload, Stop, Swap (Capture), and Count Inputs</li>
<li>Multiple Components can be synchronized together for applications such as three phase motor control</li>
</ul>
<p><br />
<b>Quadrature</b> <b>Decoder</b> </p>
<p>A quadrature decoder is used to decode the output of a quadrature encoder. A quadrature encoder senses the position, velocity, and direction of an object (for example a rotating axle, or a spinning mouse ball). A quadrature decoder can also be used for precision measurement of speed, acceleration, and position of a motor's rotor, or with a rotary switch to determine user input. <br />
 The Quadrature Decoder has the following features:</p><ul>
<li>16- or 32-bit Counter</li>
<li>Counter Resolution of x1, x2, and x4 the frequency of the phiA (Count) and phiB (Start) inputs</li>
<li>Index Input to determine absolute position</li>
<li>A positive edge on phiA increments the counter when phiB is 0 and decrements the counter when phiB is 1</li>
</ul>
<h1><a class="anchor" id="group_tcpwm_configuration"></a>
Configuration Considerations</h1>
<p>For each mode, the TCPWM driver has a configuration structure, an Init function, and an Enable function.</p>
<p>Provide the configuration parameters in the appropriate structure (see Counter <a class="el" href="group__group__tcpwm__data__structures__counter.html">Data Structures</a>, PWM <a class="el" href="group__group__tcpwm__data__structures__pwm.html">Data Structures</a>, or QuadDec <a class="el" href="group__group__tcpwm__data__structures__quaddec.html">Data Structures</a>). Then call the appropriate Init function: <a class="el" href="group__group__tcpwm__functions__counter.html#ga6068a06ddc8a07c67bb6df86e920944c">Cy_TCPWM_Counter_Init</a>, <a class="el" href="group__group__tcpwm__functions__pwm.html#ga6440d2a9dc8d85056abd62556bee7f82">Cy_TCPWM_PWM_Init</a>, or <a class="el" href="group__group__tcpwm__functions__quaddec.html#gad1949f233fc99ae5681094b5f6a499bc">Cy_TCPWM_QuadDec_Init</a>. Provide the address of the filled structure as a parameter. To enable the counter, call the appropriate Enable function: <a class="el" href="group__group__tcpwm__functions__counter.html#ga1707e2cc291fe486fbea346157c65bff">Cy_TCPWM_Counter_Enable</a>, <a class="el" href="group__group__tcpwm__functions__pwm.html#ga802ebf3a49b1056e4bc5b057deb26e49">Cy_TCPWM_PWM_Enable</a>, or <a class="el" href="group__group__tcpwm__functions__quaddec.html#ga749543ff6e63948f009d4d67f3875b53">Cy_TCPWM_QuadDec_Enable</a>).</p>
<p>Many functions work with an individual counter. You can also manage multiple counters simultaneously for certain functions. These are listed in the <a class="el" href="group__group__tcpwm__functions__common.html">Functions</a> section of the TCPWM. You can enable, disable, or trigger (in various ways) multiple counters simultaneously. For these functions you provide a bit field representing each counter in the TCPWM you want to control. You can represent the bit field as an ORed mask of each counter, like ((1U &lt;&lt; cntNumX) | (1U &lt;&lt; cntNumX) | (1U &lt;&lt; cntNumX)), where X is the counter number from 0 to 31.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>If none of the input terminals (start, reload(index)) are used, the software event <a class="el" href="group__group__tcpwm__functions__common.html#gabeb6819a4ac18f04f943a70c44b2bbb9">Cy_TCPWM_TriggerStart</a> or <a class="el" href="group__group__tcpwm__functions__common.html#ga8f4ab67e3946d84d77b54e0375eb0e48">Cy_TCPWM_TriggerReloadOrIndex</a> must be called to start the counting.</li>
<li>If count input terminal is not used, the <a class="el" href="group__group__tcpwm__input__modes.html#ga6f8ffc8c36941d7d44290147032fd33b">CY_TCPWM_INPUT_LEVEL</a> macro should be set for the countInputMode parameter and the <a class="el" href="group__group__tcpwm__input__selection.html#ga7369f85b221bf7c70e1a580daa6a6bef">CY_TCPWM_INPUT_1</a> macro should be set for the countInput parameter in the configuration structure of the appropriate mode(Counter <a class="el" href="group__group__tcpwm__data__structures__counter.html">Data Structures</a>, PWM <a class="el" href="group__group__tcpwm__data__structures__pwm.html">Data Structures</a>, or QuadDec <a class="el" href="group__group__tcpwm__data__structures__quaddec.html">Data Structures</a>).</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="group_tcpwm_pins"></a>
Assign and Configure Pins</h2>
<p>The dedicated TCPWM pins can be used. The HSIOM register must be configured to connect the block to the pins. Use the <a class="el" href="group__group__gpio.html">GPIO (General Purpose Input Output)</a> driver API to do that.</p>
<div class="fragment"><div class="line">    </div><div class="line">    <span class="comment">/* Scenario: P0[0] is the dedicated pin for the first counter of the TCPWM0 block: */</span></div><div class="line">    </div><div class="line">    <a class="code" href="group__group__gpio__functions__init.html#gaf57c501727276013d3e8974a9fb7d0a7">Cy_GPIO_Pin_FastInit</a>(GPIO_PRT0, 0UL, <a class="code" href="group__group__gpio__drive_modes.html#gacebd8bea6222d742bdfbfd86dabab940">CY_GPIO_DM_STRONG_IN_OFF</a>, 0UL, P0_0_TCPWM0_LINE0);</div><div class="line">    </div></div><!-- fragment --> <h2><a class="anchor" id="group_tcpwm_clock"></a>
Assign Clock Divider</h2>
<p>The clock source must be connected to proper working. Any of the peripheral clock dividers could be used. Use the <a class="el" href="group__group__sysclk.html">SysClk (System Clock)</a> driver API to do that.</p>
<div class="fragment"><div class="line">    </div><div class="line">    <span class="comment">/* Scenario: Assign the first 8-bit peripheral clock divider with </span></div><div class="line"><span class="comment">     * divide ratio = 100 to the first counter of the TCPWM0 block: </span></div><div class="line"><span class="comment">     */</span></div><div class="line">    </div><div class="line">    <a class="code" href="group__group__sysclk__clk__peripheral__funcs.html#gacb66324e3191006f6d1cee8b29238fb2">Cy_SysClk_PeriphAssignDivider</a>(PCLK_TCPWM0_CLOCKS0, <a class="code" href="group__group__sysclk__clk__peripheral__enums.html#gga06138349be16d91fd5d00ded2f4592b8ad2299deae6e36a070de5a60368b319ad">CY_SYSCLK_DIV_8_BIT</a>, 0UL);</div><div class="line">    <a class="code" href="group__group__sysclk__clk__peripheral__funcs.html#gac67931844e6ec06b5ff88f4f3119e127">Cy_SysClk_PeriphSetDivider</a>(<a class="code" href="group__group__sysclk__clk__peripheral__enums.html#gga06138349be16d91fd5d00ded2f4592b8ad2299deae6e36a070de5a60368b319ad">CY_SYSCLK_DIV_8_BIT</a>, 0UL, 99UL);</div><div class="line">    <a class="code" href="group__group__sysclk__clk__peripheral__funcs.html#ga8c626f11b583d8296516bbcf4a22f98e">Cy_SysClk_PeriphEnableDivider</a>(<a class="code" href="group__group__sysclk__clk__peripheral__enums.html#gga06138349be16d91fd5d00ded2f4592b8ad2299deae6e36a070de5a60368b319ad">CY_SYSCLK_DIV_8_BIT</a>, 0UL);</div><div class="line">    </div></div><!-- fragment --> <h1><a class="anchor" id="group_tcpwm_more_information"></a>
More Information</h1>
<p>For more information on the TCPWM peripheral, refer to the technical reference manual (TRM).</p>
<h1><a class="anchor" id="group_tcpwm_MISRA"></a>
MISRA-C Compliance</h1>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>14.2 </td><td>R </td><td>All non-null statements shall either: a) have at least one side-effect however executed, or b) cause control flow to change. </td><td>The unused function parameters are cast to void. This statement has no side-effect and is used to suppress a compiler warning.  </td></tr>
</table>
<h1><a class="anchor" id="group_tcpwm_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>1.10.1 </td><td>Added header guards CY_IP_MXTCPWM. </td><td>To enable the PDL compilation with wounded out IP blocks.  </td></tr>
<tr>
<td rowspan="2">1.10 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory.  </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td>Added register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>1.0.1 </td><td>Added a deviation to the MISRA Compliance section. Added function-level code snippets. </td><td>Documentation update and clarification  </td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__tcpwm__common"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__common.html">Common</a></td></tr>
<tr class="memdesc:group__group__tcpwm__common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common API for the Timer Counter PWM Block. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__counter"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__counter.html">Timer/Counter (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__counter"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for Timer/Counter. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__pwm"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__pwm.html">PWM (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__pwm"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for PWM. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__tcpwm__quaddec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__tcpwm__quaddec.html">Quadrature Decoder (TCPWM)</a></td></tr>
<tr class="memdesc:group__group__tcpwm__quaddec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for Quadrature Decoder. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSoC 6 Peripheral Driver Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
