<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSoC 6 Peripheral Driver Library: Crypto       (Cryptography)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSoC 6 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__crypto.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">Crypto (Cryptography)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>The Crypto driver provides a public API to perform cryptographic and hash operations, as well as generate both true and pseudo random numbers. </p>
<p>It uses a hardware IP block to accelerate operations.</p>
<p>The functions and other declarations used in this driver are in cy_crypto.h, cy_crypto_core.h, and cy_crypto_server.h. You can also include cy_pdl.h (ModusToolbox only) to get access to all functions and declarations in the PDL.</p>
<p>The driver implements two usage models:</p><ul>
<li><a class="el" href="group__group__crypto__cli__srv.html">Client-Server Model</a></li>
<li><a class="el" href="group__group__crypto__lld__api.html">Direct Crypto Core Access</a></li>
</ul>
<p>Mixing these usage models will result in undefined behaviour.</p>
<p>The Crypto driver supports these standards: DES, TDES, AES (128, 192, 256 bits), CMAC-AES, SHA, HMAC, PRNG, TRNG, CRC, RSA, ECP, and ECDSA. </p><dl class="section note"><dt>Note</dt><dd>ECP and ECDSA are only implemented for the <a class="el" href="group__group__crypto__lld__api.html">Direct Crypto Core Access</a> model.</dd></dl>
<h1><a class="anchor" id="group_crypto_configuration_considerations"></a>
Configuration Considerations</h1>
<p>Firmware sets up a cryptographic operation by passing in the required data as parameters in the function calls.</p>
<p>All Crypto functions require a context. A context is a data structure that the driver uses for its operations. Firmware declares a context (allocates memory) but does not write or read the values in that context. In effect, the context is a scratch pad you provide to the driver. The driver uses the context to store and manipulate data during cryptographic operations.</p>
<p>Several methods require an additional context unique to the particular cryptographic technique. The Crypto driver header files declare all the required structures for both configuration and context.</p>
<p>Some encryption techniques require additional initialization specific to the technique. If there is an Init function, you must call it before using any other function for that technique, and re-initialize after you use a different encryption technique.</p>
<p>For example, use <a class="el" href="group__group__crypto__cli__functions.html#gae157d02a1be9a43e944337dd816eb618">Cy_Crypto_Aes_Init</a> to configure an AES encryption operation with the encryption key, and key length. Provide pointers to two context structures. You can then call the AES Run functions. If you use DES after that, you must re-initialize the AES encryption before using it again.</p>
<h1><a class="anchor" id="group_crypto_definitions"></a>
Definitions</h1>
<table class="doxtable">
<tr>
<th>Term </th><th><p class="starttd">Definition </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>Plaintext </td><td><p class="starttd">An unencrypted message </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Ciphertext </td><td><p class="starttd">An encrypted message </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Block Cipher </td><td><p class="starttd">An encryption function for fixed-size blocks of data. This function takes a fixed-size key and a block of plaintext data from the message and encrypts it to generate ciphertext. Block ciphers are reversible. The function performed on a block of encrypted data will decrypt that data. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Block Cipher Mode </td><td><p class="starttd">A mode of encrypting a message using block ciphers for messages of an arbitrary length. The message is padded so that its length is an integer multiple of the block size. ECB (Electronic Code Book), CBC (Cipher Block Chaining), and CFB (Cipher Feedback) are all modes of using block ciphers to create an encrypted message of an arbitrary length.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Data Encryption Standard (DES) </td><td><p class="starttd">The <a href="https://csrc.nist.gov/csrc/media/publications/fips/46/3/archive/1999-10-25/documents/fips46-3.pdf">DES standard</a> specifies a symmetric-key algorithm for encryption of electronic data. It uses a 56-bit key. The block size is 64-bits.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Triple DES (3DES or TDES) </td><td><p class="starttd">The <a href="https://csrc.nist.gov/csrc/media/publications/fips/46/3/archive/1999-10-25/documents/fips46-3.pdf">TDES standard</a> specifies a symmetric-key block cipher that applies the Data Encryption Standard (DES) cipher algorithm three times to each data block. It uses three 56-bit keys. The block size is 64-bits.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Advanced Encryption Standard (AES) </td><td><p class="starttd">The <a href="https://nvlpubs.nist.gov/nistpubs/fips/nist.fips.197.pdf">AES standard</a> specifies the Rijndael algorithm, a symmetric block cipher that can process 128-bit data blocks, using cipher keys with 128-, 192-, and 256-bit lengths. Rijndael was designed to handle additional block sizes and key lengths. However, they are not adopted in this standard. AES is also used for message authentication.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Secure Hash Algorithm (SHA) </td><td><p class="starttd">A cryptographic hash function. This function takes a message of an arbitrary length and reduces it to a fixed-length residue or message digest after performing a series of mathematically defined operations that practically guarantee that any change in the message will change the hash value. It is used for message authentication by transmitting a message with a hash value appended to it and recalculating the message hash value using the same algorithm at the recipient's end. If the hashes differ, then the message is corrupted. For more information see <a href="https://csrc.nist.gov/csrc/media/publications/fips/180/2/archive/2002-08-01/documents/fips180-2.pdf">Secure Hash standard description</a>.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Message Authentication Code (MAC) </td><td><p class="starttd">MACs are used to verify that a received message has not been altered. This is done by first computing a MAC value at the sender's end and appending it to the transmitted message. When the message is received, the MAC is computed again and checked against the MAC value transmitted with the message. If they do not match, the message has been altered. Either a Hash algorithm (such as SHA) or a block cipher (such as AES) can be used to produce the MAC value. Keyed MAC schemes use a Secret Key along with the message, thus the Key value must be known to be able to compute the MAC value. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Cipher-based Message Authentication Code (CMAC) </td><td><p class="starttd">A block cipher-based message authentication code algorithm. It computes the MAC value using the AES block cipher algorithm. For more information see <a href="https://nvlpubs.nist.gov/nistpubs/specialpublications/nist.sp.800-38b.pdf">Recommendation for Block Cipher Modes of Operation</a>. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Hash Message Authentication Code (HMAC) </td><td><p class="starttd">A specific type of message authentication code (MAC) that involves a cryptographic hash function and a secret cryptographic key. It computes the MAC value using a Hash algorithm. For more information see <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.198-1.pdf">The Keyed-Hash Message Authentication Code standard</a>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Pseudo Random Number Generator (PRNG) </td><td><p class="starttd">A Linear Feedback Shift Registers-based algorithm for generating a sequence of numbers starting from a non-zero seed. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>True Random Number Generator (TRNG) </td><td><p class="starttd">A block that generates a number that is statistically random and based on some physical random variation. The number cannot be duplicated by running the process again. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Symmetric Key Cryptography </td><td><p class="starttd">Uses a common, known key to encrypt and decrypt messages (a shared secret between sender and receiver). An efficient method used for encrypting and decrypting messages after the authenticity of the other party has been established. DES (now obsolete), 3DES, and AES (currently used) are well-known symmetric cryptography methods. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Asymmetric Key Cryptography </td><td>Also referred to as Public Key encryption. To receive a message, you publish a very large public key (up to 4096 bits currently). That key is one of the two prime factors of a very large number. The other prime factor is the recipient's private (secret) key. To send a message to the publisher of the public key, you encrypt the message with the public key. This message can now be decrypted only with the private key (the other prime factor held in secret by the recipient). The message is now sent over any channel to the recipient who can decrypt it with the private (secret) key. The same process is used to send messages to the sender of the original message. The asymmetric cryptography relies on the mathematical impracticality (usually related to the processing power available at any given time) of factoring the keys. Common, computationally intensive, asymmetric algorithms are RSA and ECC. The public key is described by the pair (n, e) where n is a product of two randomly chosen primes p and q. The exponent e is a random integer 1 &lt; e &lt; Q where Q = (p-1) (q-1). The private key d is uniquely defined by the integer 1 &lt; d &lt; Q so that ed congruent with 1 (mod Q ).   </td></tr>
</table>
<h1><a class="anchor" id="group_crypto_more_information"></a>
More Information</h1>
<p>RSASSA-PKCS1-v1_5 described here, page 31: <a href="http://www.emc.com/collateral/white-papers/h11300-pkcs-1v2-2-rsa-cryptography-standard-wp.pdf">http://www.emc.com/collateral/white-papers/h11300-pkcs-1v2-2-rsa-cryptography-standard-wp.pdf</a></p>
<p>See the "Cryptographic Function Block" chapter of the Technical Reference Manual.</p>
<h1><a class="anchor" id="group_crypto_MISRA"></a>
MISRA-C Compliance</h1>
<p>The Crypto driver has the following specific deviations:</p>
<table class="doxtable">
<tr>
<th>MISRA Rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>8.8 </td><td>A </td><td>An external object or function shall be declared in one and only one file. </td><td>The pointer to the operation context memory can not be public accessible (can not be defined in the header file) but it should be extarnally accessed, because it is used by other Cypress software resources.  </td></tr>
<tr>
<td>11.4 </td><td>A </td><td>A cast should not be performed between a pointer to object type and a different pointer to object type. </td><td>The pointers to the context memory are void to allow handling of different data types for different operations. The cast operation is safe because the configuration is verified before operation is performed.   </td></tr>
<tr>
<td>16.7 </td><td>A </td><td>A pointer parameter in a function prototype should be declared as pointer to const if the pointer is not used to modify the addressed object. </td><td>The objects pointed to by the base addresses of the CRYPTO are not always modified. While a const qualifier can be used in select scenarios, it brings little benefit in adding this to the affected functions.   </td></tr>
<tr>
<td>20.6 </td><td>R </td><td>The macro offsetof, in library &lt;stddef.h&gt;, shall not be used. </td><td>The only HW block register offsets are defined using this macro.  </td></tr>
</table>
<h1><a class="anchor" id="group_crypto_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td>2.30.1 </td><td>Added a C++ namespace guards.  </td><td>Make a driver code to be compatible with C++.   </td></tr>
<tr>
<td>2.30 </td><td><ul>
<li>
Added a multi-instance support for AES and SHA. </li>
<li>
Added a small chunks mode for SHA with any chunk size (from one byte). </li>
<li>
Added the operation memory buffer management (set a new address, get a size). </li>
<li>
Added a support for ARM Compiler 6. </li>
</ul>
</td><td>Integration with mbedOS/mbedTLS, restructured the implementation of AES and SHA for the Crypto ALT interface.   </td></tr>
<tr>
<td>2.20 </td><td><ul>
<li>
Moved from a pre-compiled library to Open Source under Apache 2.0 license. </li>
<li>
Core (server) This API is now available. </li>
<li>
Added ECP and ECDSA support for the NIST P curves: SECP192R1, SECP224R1, SECP256R1, SECP384R1, SECP521R1. </li>
<li>
ECP and ECDSA only supported with direct calls to Crypto APIs, no client interface functions are present. </li>
<li>
Added Chunk mode for CRC. </li>
<li>
Added Chunk mode for SHA, the chunk size is limited to the SHA block size. </li>
</ul>
</td><td>ECC support added.<br />
 Integration with mbedOS/mbedTLS, restructured the implementation of SHA and CRC for the Crypto ALT interface.   </td></tr>
<tr>
<td>2.11b </td><td>The same as production 2.10; only the newly-added Elliptic Curve point multiplication functionality (NIST P256) is pre-production. Open source under Apache version 2.0 license. </td><td></td></tr>
<tr>
<td>2.11 </td><td>Based on pre-production 2.10, except the newly-added Elliptic Curve point multiplication functionality (NIST P256). Does not incorporate the production level documentation. Open source under Apache version 2.0 license. </td><td>ECC support.  </td></tr>
<tr>
<td>2.10b </td><td>The same as production 2.10. Open source under Apache version 2.0 license. </td><td></td></tr>
<tr>
<td rowspan="4">2.10 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory.  </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td>Removed files with the default driver configuration. <br />
 Added API functions to start different server functionality:<ul>
<li><a class="el" href="group__group__crypto__srv__functions.html#ga20467da28097037178b4e9a2bb16095c">Cy_Crypto_Server_Start_Base</a></li>
<li><a class="el" href="group__group__crypto__srv__functions.html#gaccdace40a137ec8634f6f2114832e162">Cy_Crypto_Server_Start_Extra</a></li>
<li><a class="el" href="group__group__crypto__srv__functions.html#gaf91c7e2d0fd473dd35d8e1df05e5c7f5">Cy_Crypto_Server_Start_Full</a>  </li>
</ul>
</td><td></td></tr>
<tr>
<td>Added the register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>Added precompiled libraries for the IAR toolchain. </td><td>IAR toolchain support in ModusToolbox.  </td></tr>
<tr>
<td>2.0b </td><td>The same as production 2.0. Open source under Apache version 2.0 license. </td><td></td></tr>
<tr>
<td rowspan="2">2.0 </td><td>Clarified what parameters must be 4-byte aligned for the functions: <a class="el" href="group__group__crypto__cli__functions.html#gadce7e0725bf4da6b0a597e60a615f5f8">Cy_Crypto_Aes_Cmac_Run</a>, <a class="el" href="group__group__crypto__cli__functions.html#ga81fe41f71b97c14e6a4aefcaa78e3378">Cy_Crypto_Sha_Run</a>, <a class="el" href="group__group__crypto__cli__functions.html#ga00f0ec4cac3b873b30ac5c4793f3c1d4">Cy_Crypto_Hmac_Run</a>, <a class="el" href="group__group__crypto__cli__functions.html#ga1f6950833770e1f2b932f089fcd126b2">Cy_Crypto_Str_MemCmp</a>, <a class="el" href="group__group__crypto__cli__functions.html#ga69061dfb8a8ccd707edf8151e1427987">Cy_Crypto_Trng_Generate</a>, <a class="el" href="group__group__crypto__cli__functions.html#gab5ab6f272d15ebb2fb14000530b6d29a">Cy_Crypto_Des_Run</a>, <a class="el" href="group__group__crypto__cli__functions.html#ga86c02f38711df37a1ca8f9b505ad5f2c">Cy_Crypto_Tdes_Run</a>, <a class="el" href="group__group__crypto__cli__functions.html#gac73a47f8656e1056686f461c68956fed">Cy_Crypto_Rsa_Proc</a>  </td><td>Documentation update and clarification.  </td></tr>
<tr>
<td>Changed crypto IP power control.<br />
 Enhanced Vector Unit functionality for RSA crypto algorithm.<br />
 Added support of the single-core devices.  </td><td>New device support.  </td></tr>
<tr>
<td>1.0 </td><td>Initial version </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__crypto__cli__srv"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__crypto__cli__srv.html">Client-Server Model</a></td></tr>
<tr class="memdesc:group__group__crypto__cli__srv"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the client-server API to isolate the Crypto hardware from non-secure application access. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__crypto__lld__api"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__crypto__lld__api.html">Direct Crypto Core Access</a></td></tr>
<tr class="memdesc:group__group__crypto__lld__api"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the low-level API for direct access to the Crypto hardware. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__crypto__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__crypto__data__structures.html">Common Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__crypto__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__crypto__enums.html">Common Enumerated Types</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSoC 6 Peripheral Driver Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
