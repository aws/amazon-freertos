<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSoC 6 Peripheral Driver Library: SCB          (Serial Communication Block)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSoC 6 Peripheral Driver Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__scb.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle">
<div class="title">SCB (Serial Communication Block)</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p>The Serial Communications Block (SCB) supports three serial communication protocols: Serial Peripheral Interface (SPI), Universal Asynchronous Receiver Transmitter (UART), and Inter Integrated Circuit (I2C or IIC). </p>
<p>Only one of the protocols is supported by an SCB at any given time.</p>
<p>The functions and other declarations used in this driver are in cy_scb_spi.h, cy_scb_uart.h, cy_scb_ezi2c.h, cy_scb_i2c.h respectively. Include cy_pdl.h (ModusToolbox only) to get access to all functions and declarations in the PDL.</p>
<h1><a class="anchor" id="group_scb_more_information"></a>
More Information</h1>
<p>For more information on the SCB peripheral, refer to the technical reference manual (TRM).</p>
<h1><a class="anchor" id="group_scb_common_MISRA"></a>
MISRA-C Compliance</h1>
<table class="doxtable">
<tr>
<th>MISRA rule </th><th>Rule Class (Required/Advisory) </th><th>Rule Description </th><th>Description of Deviation(s)  </th></tr>
<tr>
<td>11.4 </td><td>A </td><td>A cast should not be performed between a pointer to object type and a different pointer to object type. </td><td><ul>
<li>The pointer to the buffer memory is void to allow handling of different data types: uint8_t (4-8 bits) or uint16_t (9-16 bits). The cast operation is safe because the configuration is verified before operation is performed.</li>
<li>The functions <a class="el" href="group__group__scb__i2c__low__power__functions.html#gaf2044790a92ba63cb11616f2e80d3d1f">Cy_SCB_I2C_DeepSleepCallback</a> and <a class="el" href="group__group__scb__i2c__low__power__functions.html#gaf480cdce47050c37a3558285d6a1c2a7">Cy_SCB_I2C_HibernateCallback</a> are callback of <a class="el" href="group__group__syspm__data__enumerates.html#ga601b1cb722cb091133caf33d8ab235ca">cy_en_syspm_status_t</a> type. The cast operation safety in these functions becomes the user's responsibility because pointers are initialized when callback is registered in SysPm driver.</li>
<li>The functions <a class="el" href="group__group__scb__ezi2c__low__power__functions.html#ga5875cdcf148b37407ee8360b79580426">Cy_SCB_EZI2C_DeepSleepCallback</a> and <a class="el" href="group__group__scb__ezi2c__low__power__functions.html#ga0c0f0f4191ec10d04b0b3a8363e7caf4">Cy_SCB_EZI2C_HibernateCallback</a> are callback of <a class="el" href="group__group__syspm__data__enumerates.html#ga601b1cb722cb091133caf33d8ab235ca">cy_en_syspm_status_t</a> type. The cast operation safety in these functions becomes the user's responsibility because pointers are initialized when callback is registered in SysPm driver.</li>
<li>The functions <a class="el" href="group__group__scb__uart__low__power__functions.html#gaa26ee4aa1c2ac9fb98daddbfe6e151aa">Cy_SCB_UART_DeepSleepCallback</a> and <a class="el" href="group__group__scb__uart__low__power__functions.html#gad72ab6609be39108f73aea440d229bce">Cy_SCB_UART_HibernateCallback</a> are callback of <a class="el" href="group__group__syspm__data__enumerates.html#ga601b1cb722cb091133caf33d8ab235ca">cy_en_syspm_status_t</a> type. The cast operation safety in these functions becomes the user's responsibility because pointers are initialized when callback is registered in SysPm driver.</li>
<li>The functions <a class="el" href="group__group__scb__spi__low__power__functions.html#gabf413c42a9ba8a20c38f2491ae2e36c0">Cy_SCB_SPI_DeepSleepCallback</a> and <a class="el" href="group__group__scb__spi__low__power__functions.html#ga1bf16639bec6ac8209621227bd5ac0e3">Cy_SCB_SPI_HibernateCallback</a> are callback of <a class="el" href="group__group__syspm__data__enumerates.html#ga601b1cb722cb091133caf33d8ab235ca">cy_en_syspm_status_t</a> type. The cast operation safety in these functions becomes the user's responsibility because pointers are initialized when callback is registered in SysPm driver.   </li>
</ul>
</td></tr>
<tr>
<td>14.1 </td><td>R </td><td>There shall be no unreachable code. </td><td>The SCB block parameters can be a constant false or true depends on the selected device and cause code to be unreachable.  </td></tr>
<tr>
<td>14.2 </td><td>R </td><td>All non-null statements shall either: a) have at least one side-effect however executed, or b) cause control flow to change. </td><td>The unused function parameters are cast to void. This statement has no side-effect and is used to suppress a compiler warning.  </td></tr>
<tr>
<td>14.7 </td><td>R </td><td>A function shall have a single point of exit at the end of the function. </td><td>The functions can return from several points. This is done to improve code clarity when returning error status code if input parameters validation fails.  </td></tr>
<tr>
<td>13.7 </td><td>R </td><td>Boolean operations whose results are invariant shall not be permitted. </td><td><ul>
<li>The SCB block parameters can be a constant false or true depends on the selected device and cause this violation.</li>
<li>The same condition check is executed before and after callback is called because after the callback returns, the condition might be not true any more.  </li>
</ul>
</td></tr>
</table>
<h1><a class="anchor" id="group_scb_common_changelog"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version</th><th>Changes</th><th>Reason for Change </th></tr>
<tr>
<td rowspan="2">2.40 </td><td>Update level selection logic of RX FIFO trigger in the <a class="el" href="group__group__scb__uart__high__level__functions.html#gace7421c664f582ab4ad4bade0683f209" title="This function starts a UART receive operation. ">Cy_SCB_UART_Receive()</a>. </td><td>Fix possible stuck if the RTS level is less than the RX FIFO level.  </td></tr>
<tr>
<td>Exclude self-test assertion macros under release build profile. </td><td>Avoid dependency on CY_ASSERT macro implementation.  </td></tr>
<tr>
<td>2.30.1 </td><td>Added header guards CY_IP_MXSCB. </td><td>To enable the PDL compilation with wounded out IP blocks.  </td></tr>
<tr>
<td rowspan="5">2.30 </td><td>Fixed MISRA violation. </td><td>MISRA compliance.  </td></tr>
<tr>
<td>Changed values CY_SCB_SPI_CPHA0_CPOL1 and CY_SCB_SPI_CPHA1_CPOL0 in enum <a class="el" href="group__group__scb__spi__enums.html#gab34eae51343cebfec7c447a573cdf0ba">cy_en_scb_spi_sclk_mode_t</a>. </td><td>The incorrect values in <a class="el" href="group__group__scb__spi__enums.html#gab34eae51343cebfec7c447a573cdf0ba">cy_en_scb_spi_sclk_mode_t</a> caused incorrect initialization of the combination of phases and polarity: "CHPA = 0, CPOL = 1" and "CHPA = 1, CPOL = 0".   </td></tr>
<tr>
<td>Added new CY_SCB_UART_RECEIVE_NOT_EMTPY and CY_SCB_UART_TRANSMIT_EMTPY callback events <a class="el" href="group__group__scb__uart__macros__callback__events.html">UART Callback Events</a>. </td><td>Extended the driver callback events to support the MBED-OS.  </td></tr>
<tr>
<td>Merged SCB changelogs for each mode into one changelog. </td><td>Changelog optimization.  </td></tr>
<tr>
<td>Merged SCB MISRA-C Compliance sections for each mode into one section. </td><td>To optimize the SCB MISRA-C Compliance sections.  </td></tr>
<tr>
<td>2.20.1 </td><td>Documentation of the MISRA rule violation. </td><td>MISRA compliance.  </td></tr>
<tr>
<td rowspan="4">2.20 </td><td>Flattened the organization of the driver source code into the single source directory and the single include directory.  </td><td>Driver library directory-structure simplification.  </td></tr>
<tr>
<td>Added register access layer. Use register access macros instead of direct register access using dereferenced pointers. </td><td>Makes register access device-independent, so that the PDL does not need to be recompiled for each supported part number.  </td></tr>
<tr>
<td>Added the enableDigitalFilter, highPhaseDutyCycle and lowPhaseDutyCycle fields to the <a class="el" href="structcy__stc__scb__i2c__config__t.html">cy_stc_scb_i2c_config_t</a> configuration structure.  </td><td>Added the I2C master data rate configuration using the configuration structure.   </td></tr>
<tr>
<td>Fixed the <a class="el" href="group__group__scb__i2c__general__functions.html#gae9d71372b84c9c799b55283fc475f223">Cy_SCB_I2C_SetDataRate</a> function to properly configure data rates greater than 400 kbps in Master and Master-Slave modes. <br />
 Added verification that clk_scb is within the valid range for the desired data rate.  </td><td>The analog filter was enabled for all data rates in Master and Master-Slave modes. This prevents reaching the maximum supported data rate of 1000 kbps which requires a digital filter.   </td></tr>
<tr>
<td rowspan="4">2.10 </td><td>Fixed the ReStart condition generation sequence for a write transaction in the <a class="el" href="group__group__scb__i2c__master__high__level__functions.html#ga91f7a32d2a20cf3deebe01cef8d9d000">Cy_SCB_I2C_MasterWrite</a> function. </td><td>The driver can notify about a zero length write transaction completion before the address byte is sent if the <a class="el" href="group__group__scb__i2c__master__high__level__functions.html#ga91f7a32d2a20cf3deebe01cef8d9d000">Cy_SCB_I2C_MasterWrite</a> function execution was interrupted between setting the restart generation command and writing the address byte into the TX FIFO.  </td></tr>
<tr>
<td>Added the slave- and master-specific interrupt functions: <a class="el" href="group__group__scb__i2c__interrupt__functions.html#ga87512a96b0ae32bb624a5a960d64d23f">Cy_SCB_I2C_SlaveInterrupt</a> and <a class="el" href="group__group__scb__i2c__interrupt__functions.html#ga3133d46624010df1c57a0800797aab01">Cy_SCB_I2C_MasterInterrupt</a>.  </td><td>Improved the interrupt configuration options for the I2C slave and master mode configurations.  </td></tr>
<tr>
<td>Updated the Start condition generation sequence in the <a class="el" href="group__group__scb__i2c__master__high__level__functions.html#ga91f7a32d2a20cf3deebe01cef8d9d000">Cy_SCB_I2C_MasterWrite</a> and <a class="el" href="group__group__scb__i2c__master__high__level__functions.html#ga83185adeefa83640ac09852c9d6cf426">Cy_SCB_I2C_MasterRead</a>. </td><td></td></tr>
<tr>
<td>Updated the ReStart condition generation sequence for a write transaction in the <a class="el" href="group__group__scb__i2c__master__low__level__functions.html#ga2177b4fb74cf33e57e6fa59d04bdfa7a">Cy_SCB_I2C_MasterSendReStart</a> function. </td><td></td></tr>
<tr>
<td rowspan="9">2.0 </td><td>Added parameters validation for public API. </td><td></td></tr>
<tr>
<td>Fixed functions which return interrupt status to return only defined set of interrupt statuses. </td><td></td></tr>
<tr>
<td>Added missing "cy_cb_" to the callback function type names. </td><td></td></tr>
<tr>
<td>Replaced variables that have limited range of values with enumerated types. </td><td></td></tr>
<tr>
<td>Added function <a class="el" href="group__group__scb__uart__low__level__functions.html#gab26a75a58d128e402f3bba6ff2bdad82">Cy_SCB_UART_SendBreakBlocking</a> for break condition generation. </td><td></td></tr>
<tr>
<td>Fixed low power callbacks <a class="el" href="group__group__scb__uart__low__power__functions.html#gaa26ee4aa1c2ac9fb98daddbfe6e151aa">Cy_SCB_UART_DeepSleepCallback</a> and <a class="el" href="group__group__scb__uart__low__power__functions.html#gad72ab6609be39108f73aea440d229bce">Cy_SCB_UART_HibernateCallback</a> to prevent the device from entering low power mode when RX FIFO is not empty. </td><td>The callbacks allowed entering device into low power mode when RX FIFO had data.  </td></tr>
<tr>
<td>Fixed SPI callback notification when error event occurred. </td><td>The SPI callback passed incorrect event value if error event occurred.  </td></tr>
<tr>
<td>Fixed the <a class="el" href="group__group__scb__i2c__master__low__level__functions.html#ga2177b4fb74cf33e57e6fa59d04bdfa7a">Cy_SCB_I2C_MasterSendReStart</a> function to properly generate the ReStart condition when the previous transaction was a write. </td><td>The master interpreted the address byte written into the TX FIFO as a data byte and continued a write transaction. The ReStart condition was generated after the master completed transferring the data byte. The SCL line was stretched by the master waiting for the address byte to be written into the TX FIFO after the ReStart condition generation. The following timeout detection released the bus from the master control.  </td></tr>
<tr>
<td>Fixed the slave operation after the address byte was NACKed by the firmware. </td><td>The observed slave operation failure depends on whether Level 2 assert is enabled or not. Enabled: the device stuck in the fault handler due to the assert assignment in the <a class="el" href="group__group__scb__i2c__interrupt__functions.html#ga729b2fa4de4d44ea2e8995d7ca6a0c24">Cy_SCB_I2C_Interrupt</a>. Disabled: the slave sets the transaction completion status and notifies on the transaction completion event after the address was NACKed. The failure is observed only when the slave is configured to accept an address in the RX FIFO.  </td></tr>
<tr>
<td>1.0 </td><td>Initial version. </td><td></td></tr>
</table>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__scb__common"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__scb__common.html">Common</a></td></tr>
<tr class="memdesc:group__group__scb__common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common API for the Serial Communication Block. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__scb__ezi2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__scb__ezi2c.html">EZI2C (SCB)</a></td></tr>
<tr class="memdesc:group__group__scb__ezi2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for EZI2C Slave Peripheral. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__scb__i2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__scb__i2c.html">I2C (SCB)</a></td></tr>
<tr class="memdesc:group__group__scb__i2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for I2C Bus Peripheral. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__scb__spi"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__scb__spi.html">SPI (SCB)</a></td></tr>
<tr class="memdesc:group__group__scb__spi"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for SPI Peripheral. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__scb__uart"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__scb__uart.html">UART (SCB)</a></td></tr>
<tr class="memdesc:group__group__scb__uart"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver API for UART. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSoC 6 Peripheral Driver Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
