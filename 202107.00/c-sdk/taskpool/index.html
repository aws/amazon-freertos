<!-- This file provides the custom header for Doxygen-generated HTML. Per the
Doxygen documentation, this file may need to be regenerated when Doxygen is
updated. -->
<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.14"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
        Task Pool: Main Page
    </title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="foobar.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
    <tbody>
        <tr style="height: 56px;">
            <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">
                    <span id="csdkprefix">AWS IoT Device SDK C:</span>
                    Task Pool
                </div>
                <div id="projectbrief">
                    Task pool library
                </div>
            </td>
        </tr>
        <tr>
            <td id="returntomain">
                <a href="../main/index.html">Return to main page &uarr;</a>
            </td>
        </tr>
    </tbody>
    </table>
    </div>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Task Pool Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Task pool library.<a class="anchor" id="taskpool"></a></p><blockquote class="doxtable">
<p>A task pool is an adaptive set of threads that can grow and shrink to execute a user-provided callback through a user-defined job that can be scheduled with a non-blocking call. The design principles are to minimize the memory footprint while allowing non-blocking execution. The adaptive behavior allows serving jobs in a timely manner, without allocating system resources for the entire duration of the application, or causing recurring allocation/deallocation patterns. The user does not have to worry about synchronization and thread management other than within its own application. </p>
</blockquote>
<p>Features of this library include:</p><ul>
<li>Non-blocking API functions to schedule immediate and deferred jobs.</li>
<li>Ability to create statically and dynamically allocated jobs.</li>
<li>Scalable performance and footprint. The <a class="el" href="taskpool_config.html">configuration settings</a> allow this library to be tailored to a system's resources.</li>
<li>Customizable caching for low memory overhead when creating jobs dynamically.</li>
</ul>
<p>This library uses a user-specified set of threads to process jobs specified by the user as a callback and a context. Overall, the task pool hinges on two main data structures: the task pool Job (IotTaskPoolJob_t) and the task pool itself (IotTaskPool_t). A task pool job carries the information about the user callback and context, one flag to track the status and a link structure for moving the job in and out of the dispatch queue and cache. User can create two types of jobs: static and recyclable. Static jobs are intended for users that know exactly how many jobs they will schedule (e.g. see Defender scenario above) or for embedding in other data structures. Static jobs need no destruction, and creation simply sets the user callback and context. Recyclable jobs are intended for scenario where user cannot know ahead of time how many jobs she will need. Recyclable jobs are dynamically allocated, and can be either destroyed after use or recycled. If jobs are recycled they are maintained in a cache (IotTaskPoolCache_t) owned by the task pool itself, and re-used when user wants to create more recyclable jobs. The task pool cache has a compile time limit, and can be pre-populated with recyclable jobs by simply creating recyclable jobs and recycling them, in an effort to limit memory allocations at run-time. This is handy for scenarios where user is aware of the steady state requirements for his application. User jobs are queued through a non-blocking call and processed asynchronously in the order they are received.</p><ul>
<li><a class="el" href="taskpool_functions.html">Task pool API functions</a> Provides a set of functions to queue an asynchronous operation on the <b>Dispatch Queue</b>. API functions are non-blocking and return after successfully queuing an operation.</li>
<li><b>Worker threads</b> in the task pool are woken up when operations arrive in the dispatch queue. These threads remove operations from the dispatch queue in FIFO order and execute the user-provided callback. After executing the user callback, the task pool threads try and execute any remaining jobs in the dispatch queue. The task pool tries and execute a user job as soon as it is received and if there are no threads available it will try and create one, up to the maximum number of allowed threads. The user can specificy the minimum and maximum number of threads allowed when creating the task pool.</li>
<li>The user can try and cancel a job after the task has been scheduled. Cancellation is only allowed before the task enters execution.</li>
</ul>
<p>Threads are created with <a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/platform.tag:../platform/" href="../platform/platform_threads_function_createdetachedthread.html">Iot_CreateDetachedThread</a>. Because the platform layer may be re-implemented across systems, threads will be allocated for the task pool library on-the-go on some systems, while other systems may use an always-allocated thread pool.</p>
<h1><a class="anchor" id="taskpool_dependencies"></a>
Dependencies</h1>
<p>Dependencies of the task pool library.</p>
<div class="dotgraph">
<img src="dot_inline_dotgraph_1.png" alt="dot_inline_dotgraph_1.png" border="0" usemap="#dot_inline_dotgraph_1.map"/>
<map name="dot_inline_dotgraph_1.map" id="dot_inline_dotgraph_1.map"><area shape="rect" id="node2" href="../linear_containers/index.html#linear_containers" title="List/Queue" alt="" coords="5,116,96,164"/>
<area shape="rect" id="node3" href="../logging/index.html#logging" title="Logging" alt="" coords="121,116,194,164"/>
<area shape="rect" id="node4" href="../static_memory/index.html#static_memory" title="Static memory" alt="" coords="363,116,482,164"/>
<area shape="rect" id="node5" href="../platform/platform_threads.html" title="Thread management" alt="" coords="491,213,650,261"/>
<area shape="rect" id="node6" href="../platform/platform_clock.html" title="Clock" alt="" coords="327,213,399,261"/>
</map>
<div class="caption">
Task pool direct dependencies</div>
</div>
<p>Currently, the task pool library has the following dependencies:</p><ul>
<li>The linear containers (list/queue) library for maintaining the data structures for scheduled and in-progress task pool operations.</li>
<li>The logging library may be used if <a class="el" href="taskpool_config.html#IOT_LOG_LEVEL_TASKPOOL">IOT_LOG_LEVEL_TASKPOOL</a> is not <a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/logging.tag:../logging/" href="../logging/iot__logging_8h.html#a11f358ff0cb9b694f6a12ebc0b41df01">IOT_LOG_NONE</a>.</li>
<li>The platform layer provides an interface to the operating system for thread management, timers, clock functions, etc.</li>
</ul>
<p>In addition to the components above, the task pool library may also depend on C standard library headers. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- This file provides the custom footer for Doxygen-generated HTML. Per the
Doxygen documentation, this file may need to be regenerated when Doxygen is
updated. -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Generated by
      <a href="http://www.doxygen.org/index.html">
      <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14
    </li>
    <li class="footer">
      Last updated Thu Apr 30 2020
    </li>
    <li class="footer" style="float:left">
        SDK version 4.0.0b1
    </li>
  </ul>
</div>
</body>
</html>
