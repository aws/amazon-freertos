<!-- This file provides the custom header for Doxygen-generated HTML. Per the
Doxygen documentation, this file may need to be regenerated when Doxygen is
updated. -->
<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.14"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
        Shadow: aws_iot_shadow.h File Reference
    </title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="foobar.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
    <tbody>
        <tr style="height: 56px;">
            <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">
                    <span id="csdkprefix">AWS IoT Device SDK C:</span>
                    Shadow
                </div>
                <div id="projectbrief">
                    AWS IoT Device Shadow library
                </div>
            </td>
        </tr>
        <tr>
            <td id="returntomain">
                <a href="../main/index.html">Return to main page &uarr;</a>
            </td>
        </tr>
    </tbody>
    </table>
    </div>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('aws__iot__shadow_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">aws_iot_shadow.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>User-facing functions of the Shadow library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;iot_config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__iot__shadow__types_8h_source.html">types/aws_iot_shadow_types.h</a>&quot;</code><br />
</div>
<p><a href="aws__iot__shadow_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4c0f59e85a193738ec20876e386398f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a4c0f59e85a193738ec20876e386398f5">AwsIotShadow_Init</a> (uint32_t mqttTimeoutMs)</td></tr>
<tr class="memdesc:a4c0f59e85a193738ec20876e386398f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">One-time initialization function for the Shadow library.  <a href="#a4c0f59e85a193738ec20876e386398f5">More...</a><br /></td></tr>
<tr class="separator:a4c0f59e85a193738ec20876e386398f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b96390068313219e84eabcc5765cd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a03b96390068313219e84eabcc5765cd7">AwsIotShadow_Cleanup</a> (void)</td></tr>
<tr class="memdesc:a03b96390068313219e84eabcc5765cd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">One-time deinitialization function for the Shadow library.  <a href="#a03b96390068313219e84eabcc5765cd7">More...</a><br /></td></tr>
<tr class="separator:a03b96390068313219e84eabcc5765cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639e1867773a059356043e8f3b054827"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a639e1867773a059356043e8f3b054827">AwsIotShadow_DeleteAsync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const char *pThingName, size_t thingNameLength, uint32_t flags, const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *pCallbackInfo, <a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const pDeleteOperation)</td></tr>
<tr class="memdesc:a639e1867773a059356043e8f3b054827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a Thing Shadow and receive an asynchronous notification when the Delete completes.  <a href="#a639e1867773a059356043e8f3b054827">More...</a><br /></td></tr>
<tr class="separator:a639e1867773a059356043e8f3b054827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1edb261b16d83319a7d6105bbc1ff0e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a1edb261b16d83319a7d6105bbc1ff0e4">AwsIotShadow_DeleteSync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const char *pThingName, size_t thingNameLength, uint32_t flags, uint32_t timeoutMs)</td></tr>
<tr class="memdesc:a1edb261b16d83319a7d6105bbc1ff0e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a Thing Shadow with a timeout.  <a href="#a1edb261b16d83319a7d6105bbc1ff0e4">More...</a><br /></td></tr>
<tr class="separator:a1edb261b16d83319a7d6105bbc1ff0e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa263c0f9188f44f63240da141fbd61fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#aa263c0f9188f44f63240da141fbd61fc">AwsIotShadow_GetAsync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *pGetInfo, uint32_t flags, const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *pCallbackInfo, <a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const pGetOperation)</td></tr>
<tr class="memdesc:aa263c0f9188f44f63240da141fbd61fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a Thing Shadow and receive an asynchronous notification when the Shadow document is received.  <a href="#aa263c0f9188f44f63240da141fbd61fc">More...</a><br /></td></tr>
<tr class="separator:aa263c0f9188f44f63240da141fbd61fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87eb0705e28770ea13756596708dd7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#af87eb0705e28770ea13756596708dd7f">AwsIotShadow_GetSync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *pGetInfo, uint32_t flags, uint32_t timeoutMs, const char **const pShadowDocument, size_t *const pShadowDocumentLength)</td></tr>
<tr class="memdesc:af87eb0705e28770ea13756596708dd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a Thing Shadow with a timeout.  <a href="#af87eb0705e28770ea13756596708dd7f">More...</a><br /></td></tr>
<tr class="separator:af87eb0705e28770ea13756596708dd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f6e34f7b927a408236605b752c72ec7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a0f6e34f7b927a408236605b752c72ec7">AwsIotShadow_UpdateAsync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *pUpdateInfo, uint32_t flags, const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *pCallbackInfo, <a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const pUpdateOperation)</td></tr>
<tr class="memdesc:a0f6e34f7b927a408236605b752c72ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a Thing Shadow update and receive an asynchronous notification when the Shadow Update completes.  <a href="#a0f6e34f7b927a408236605b752c72ec7">More...</a><br /></td></tr>
<tr class="separator:a0f6e34f7b927a408236605b752c72ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14f9d1253d2142c34ef22758c84c255"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#ab14f9d1253d2142c34ef22758c84c255">AwsIotShadow_UpdateSync</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *pUpdateInfo, uint32_t flags, uint32_t timeoutMs)</td></tr>
<tr class="memdesc:ab14f9d1253d2142c34ef22758c84c255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a Thing Shadow update with a timeout.  <a href="#ab14f9d1253d2142c34ef22758c84c255">More...</a><br /></td></tr>
<tr class="separator:ab14f9d1253d2142c34ef22758c84c255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c256d388abf0db285d01c8c7a42a0cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc">AwsIotShadow_Wait</a> (<a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> operation, uint32_t timeoutMs, const char **const pShadowDocument, size_t *const pShadowDocumentLength)</td></tr>
<tr class="memdesc:a4c256d388abf0db285d01c8c7a42a0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a Shadow operation to complete.  <a href="#a4c256d388abf0db285d01c8c7a42a0cc">More...</a><br /></td></tr>
<tr class="separator:a4c256d388abf0db285d01c8c7a42a0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda0f6b22dbb3ae873aa04959753ca48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#adda0f6b22dbb3ae873aa04959753ca48">AwsIotShadow_SetDeltaCallback</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const char *pThingName, size_t thingNameLength, uint32_t flags, const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *pDeltaCallback)</td></tr>
<tr class="memdesc:adda0f6b22dbb3ae873aa04959753ca48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback to be invoked when the Thing Shadow <code>desired</code> and <code>reported</code> states differ.  <a href="#adda0f6b22dbb3ae873aa04959753ca48">More...</a><br /></td></tr>
<tr class="separator:adda0f6b22dbb3ae873aa04959753ca48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8d96e5914659c1b0b0cf3429fabcf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a4e8d96e5914659c1b0b0cf3429fabcf9">AwsIotShadow_SetUpdatedCallback</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const char *pThingName, size_t thingNameLength, uint32_t flags, const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *pUpdatedCallback)</td></tr>
<tr class="memdesc:a4e8d96e5914659c1b0b0cf3429fabcf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a callback to be invoked when a Thing Shadow changes.  <a href="#a4e8d96e5914659c1b0b0cf3429fabcf9">More...</a><br /></td></tr>
<tr class="separator:a4e8d96e5914659c1b0b0cf3429fabcf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7873b253ef295e004d1da56138bd2305"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a7873b253ef295e004d1da56138bd2305">AwsIotShadow_RemovePersistentSubscriptions</a> (<a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a> mqttConnection, const char *pThingName, size_t thingNameLength, uint32_t flags)</td></tr>
<tr class="memdesc:a7873b253ef295e004d1da56138bd2305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove persistent Thing Shadow operation topic subscriptions.  <a href="#a7873b253ef295e004d1da56138bd2305">More...</a><br /></td></tr>
<tr class="separator:a7873b253ef295e004d1da56138bd2305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d33a7ff56af1cea1beca37513e0a8ec"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aws__iot__shadow_8h.html#a0d33a7ff56af1cea1beca37513e0a8ec">AwsIotShadow_strerror</a> (<a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> status)</td></tr>
<tr class="memdesc:a0d33a7ff56af1cea1beca37513e0a8ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string that describes an <a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d" title="Return codes of Shadow functions. ">AwsIotShadowError_t</a>.  <a href="#a0d33a7ff56af1cea1beca37513e0a8ec">More...</a><br /></td></tr>
<tr class="separator:a0d33a7ff56af1cea1beca37513e0a8ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>User-facing functions of the Shadow library. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4c0f59e85a193738ec20876e386398f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0f59e85a193738ec20876e386398f5">&#9670;&nbsp;</a></span>AwsIotShadow_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_Init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mqttTimeoutMs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>One-time initialization function for the Shadow library. </p>
<p>This function performs internal setup of the Shadow library. <b>It must be called once (and only once) before calling any other Shadow function.</b> Calling this function more than once without first calling <a class="el" href="shadow_function_cleanup.html">AwsIotShadow_Cleanup</a> may result in a crash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttTimeoutMs</td><td>The amount of time (in milliseconds) that the Shadow library will wait for MQTT operations. Optional; set this to <code>0</code> to use <a class="el" href="shadow_config.html#AWS_IOT_SHADOW_DEFAULT_MQTT_TIMEOUT_MS">AWS_IOT_SHADOW_DEFAULT_MQTT_TIMEOUT_MS</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daf45383bf53d6396913cd6fdf3820ef26" title="Initialization failed. ">AWS_IOT_SHADOW_INIT_FAILED</a></li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>No thread-safety guarantees are provided for this function.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_cleanup.html">AwsIotShadow_Cleanup</a> </dd></dl>

</div>
</div>
<a id="a03b96390068313219e84eabcc5765cd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b96390068313219e84eabcc5765cd7">&#9670;&nbsp;</a></span>AwsIotShadow_Cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AwsIotShadow_Cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>One-time deinitialization function for the Shadow library. </p>
<p>This function frees resources taken in <a class="el" href="shadow_function_init.html">AwsIotShadow_Init</a> and deletes any <a class="el" href="aws__iot__shadow__types_8h.html#ae5bef45f32f283af7d8d0dcb1300f5b0">persistent subscriptions.</a> It should be called to clean up the Shadow library. After this function returns, <a class="el" href="shadow_function_init.html">AwsIotShadow_Init</a> must be called again before calling any other Shadow function.</p>
<dl class="section warning"><dt>Warning</dt><dd>No thread-safety guarantees are provided for this function.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_init.html">AwsIotShadow_Init</a> </dd></dl>

</div>
</div>
<a id="a639e1867773a059356043e8f3b054827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639e1867773a059356043e8f3b054827">&#9670;&nbsp;</a></span>AwsIotShadow_DeleteAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_DeleteAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thingNameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pCallbackInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const&#160;</td>
          <td class="paramname"><em>pDeleteOperation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a Thing Shadow and receive an asynchronous notification when the Delete completes. </p>
<p>This function deletes any existing Shadow document for the given Thing Name. If the given Thing has no Shadow and this function is called, the result will be <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da28e34d59a8f6f97f59f2b96caebfc89c" title="Shadow operation rejected: Thing not found. ">AWS_IOT_SHADOW_NOT_FOUND</a>.</p>
<p>Deleting a Shadow involves sending an MQTT message to AWS IoT and waiting on a response. This message will always be sent at <a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__enums.html#gga974a9cdcc8e835aab6f1bf6d90365db6a81c90cd35b94c7dca50242808b05e7eb">MQTT QoS 0</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow delete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>The Thing Name associated with the Shadow to delete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thingNameLength</td><td>The length of <code>pThingName</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pCallbackInfo</td><td>Asynchronous notification of this function's completion. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pDeleteOperation</td><td>Set to a handle by which this operation may be referenced after this function returns. This reference is invalidated once the Shadow delete completes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This function will return <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04" title="Shadow operation queued, awaiting result. ">AWS_IOT_SHADOW_STATUS_PENDING</a> upon successfully queuing a Shadow delete. </dd>
<dd>
If this function fails before queuing a Shadow delete, it will return one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a> </li>
</ul>
</dd>
<dd>
Upon successful completion of the Shadow delete (either through an <a class="el" href="structAwsIotShadowCallbackInfo__t.html" title="Information on a user-provided Shadow callback function. ">AwsIotShadowCallbackInfo_t</a> or <a class="el" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc" title="Wait for a Shadow operation to complete. ">AwsIotShadow_Wait</a>), the status will be <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>. </dd>
<dd>
Should the Shadow delete fail, the status will be one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>)</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_deletesync.html">AwsIotShadow_DeleteSync</a> for a blocking variant of this function.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define THING_NAME &quot;Test_device&quot;</span></div><div class="line"><span class="preprocessor">#define THING_NAME_LENGTH ( sizeof( THING_NAME ) - 1 )</span></div><div class="line"></div><div class="line"><span class="comment">// Shadow operation handle.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> deleteOperation = <a class="code" href="aws__iot__shadow__types_8h.html#a9d5dc33c2274d0fa14a0606275181a5d">AWS_IOT_SHADOW_OPERATION_INITIALIZER</a>;</div><div class="line"></div><div class="line"><span class="comment">// Queue a Shadow delete.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> deleteResult = <a class="code" href="aws__iot__shadow_8h.html#a639e1867773a059356043e8f3b054827">AwsIotShadow_DeleteAsync</a>( mqttConnection,</div><div class="line">                                                             THING_NAME,</div><div class="line">                                                             <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>,</div><div class="line">                                                             <a class="code" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee">AWS_IOT_SHADOW_FLAG_WAITABLE</a>,</div><div class="line">                                                             NULL,</div><div class="line">                                                             &amp;deleteOperation );</div><div class="line"></div><div class="line"><span class="comment">// Shadow delete should return AWS_IOT_SHADOW_STATUS_PENDING upon success.</span></div><div class="line"><span class="keywordflow">if</span>( deleteResult == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a> )</div><div class="line">{</div><div class="line">    <span class="comment">// Wait for the Shadow delete to complete.</span></div><div class="line">    deleteResult = <a class="code" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc">AwsIotShadow_Wait</a>( deleteOperation, 5000 );</div><div class="line"></div><div class="line">    <span class="comment">// Delete result should be AWS_IOT_SHADOW_SUCCESS upon successfully</span></div><div class="line">    <span class="comment">// deleting an existing Shadow.</span></div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="a1edb261b16d83319a7d6105bbc1ff0e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1edb261b16d83319a7d6105bbc1ff0e4">&#9670;&nbsp;</a></span>AwsIotShadow_DeleteSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_DeleteSync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thingNameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeoutMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a Thing Shadow with a timeout. </p>
<p>This function queues a Shadow delete, then waits for the result. Internally, this function is a call to <a class="el" href="shadow_function_deleteasync.html">AwsIotShadow_DeleteAsync</a> followed by <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a>. See <a class="el" href="shadow_function_deleteasync.html">AwsIotShadow_DeleteAsync</a> for more information on the Shadow delete operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow delete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>The Thing Name associated with the Shadow to delete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thingNameLength</td><td>The length of <code>pThingName</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>If the Shadow service does not respond to the Shadow delete within this timeout, this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>) </li>
</ul>
</dd></dl>

</div>
</div>
<a id="aa263c0f9188f44f63240da141fbd61fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa263c0f9188f44f63240da141fbd61fc">&#9670;&nbsp;</a></span>AwsIotShadow_GetAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_GetAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pGetInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pCallbackInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const&#160;</td>
          <td class="paramname"><em>pGetOperation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a Thing Shadow and receive an asynchronous notification when the Shadow document is received. </p>
<p>This function retrieves the Thing Shadow document currently stored by the Shadow service. If a given Thing has no Shadow and this function is called, the result will be <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da28e34d59a8f6f97f59f2b96caebfc89c" title="Shadow operation rejected: Thing not found. ">AWS_IOT_SHADOW_NOT_FOUND</a>.</p>
<p>Shadow documents may be large, and their size is not known beforehand. Therefore, this function works best when memory is dynamically allocated. Because the Shadow document is retrieved in an MQTT PUBLISH packet, the MQTT library will allocate a buffer for the Shadow document using <a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/iot__mqtt__internal_8h.html#a6cfc75d639424bc52deb2c63d0cfb136">IotMqtt_MallocMessage</a>.</p>
<p>The MQTT library may free the buffer for a retrieved Shadow document as soon as the <a class="el" href="structAwsIotShadowCallbackInfo__t.html">Shadow completion callback</a> returns. Therefore, any data needed later must be copied from the Shadow document. Similarly, if the flag <a class="el" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee" title="Allows the use of AwsIotShadow_Wait for blocking until completion. ">AWS_IOT_SHADOW_FLAG_WAITABLE</a> is given to this function (which indicates that the Shadow document will be needed after the Shadow operation completes), <a class="el" href="structAwsIotShadowDocumentInfo__t.html#ad06193fe2d653c76f0b7bfc8c3f7df94" title="Function to allocate memory for an incoming Shadow document. ">AwsIotShadowDocumentInfo_t.mallocDocument</a> must be provided to allocate a longer-lasting buffer.</p>
<dl class="section note"><dt>Note</dt><dd>Because of the potentially large size of complete Shadow documents, it is more memory-efficient for most applications to use <a class="el" href="shadow_function_setdeltacallback.html">delta callbacks</a> to retrieve Shadows from the Shadow service.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow get. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pGetInfo</td><td>Shadow document parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pCallbackInfo</td><td>Asynchronous notification of this function's completion. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pGetOperation</td><td>Set to a handle by which this operation may be referenced after this function returns. This reference is invalidated once the Shadow get completes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This function will return <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04" title="Shadow operation queued, awaiting result. ">AWS_IOT_SHADOW_STATUS_PENDING</a> upon successfully queuing a Shadow get. </dd>
<dd>
If this function fails before queuing a Shadow get, it will return one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a> </li>
</ul>
</dd>
<dd>
Upon successful completion of the Shadow get (either through an <a class="el" href="structAwsIotShadowCallbackInfo__t.html" title="Information on a user-provided Shadow callback function. ">AwsIotShadowCallbackInfo_t</a> or <a class="el" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc" title="Wait for a Shadow operation to complete. ">AwsIotShadow_Wait</a>), the status will be <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>. </dd>
<dd>
Should the Shadow get fail, the status will be one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a> (Memory could not be allocated for incoming document)</li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>)</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_getsync.html">AwsIotShadow_GetSync</a> for a blocking variant of this function.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// Shadow get completion callback. The retrieved document will be in</span></div><div class="line"><span class="comment">// pCallbackParam. Any data in the retrieved document needed after this</span></div><div class="line"><span class="comment">// function returns must be copied.</span></div><div class="line"><span class="keywordtype">void</span> _processRetrievedDocument( <span class="keywordtype">void</span> * pCallbackContext,</div><div class="line">                                <a class="code" href="structAwsIotShadowCallbackParam__t.html">AwsIotShadowCallbackParam_t</a> * pCallbackParam );</div><div class="line"></div><div class="line"><span class="comment">// Parameters and return value of Shadow get.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> getInfo = { ... };</div><div class="line">uint32_t timeout = 5000; <span class="comment">// 5 seconds</span></div><div class="line"></div><div class="line"><span class="comment">// Callback for get completion.</span></div><div class="line"><a class="code" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> getCallback = <a class="code" href="aws__iot__shadow__types_8h.html#ab23cd11c4ca278342eade8ca1f631144">AWS_IOT_SHADOW_CALLBACK_INFO_INITIALIZER</a>;</div><div class="line">getCallback.<a class="code" href="structAwsIotShadowCallbackInfo__t.html#af5e7a55fe0ffb51a67363d2295077c84">function</a> = _processRetrievedDocument;</div><div class="line"></div><div class="line"><span class="comment">// Shadow get operation.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#aa263c0f9188f44f63240da141fbd61fc">AwsIotShadow_GetAsync</a>( mqttConnection,</div><div class="line">                                &amp;getInfo,</div><div class="line">                                0,</div><div class="line">                                &amp;getCallback,</div><div class="line">                                NULL );</div><div class="line"></div><div class="line"><span class="comment">// Get should have returned AWS_IOT_SHADOW_STATUS_PENDING. The function</span></div><div class="line"><span class="comment">// _processRetrievedDocument will be invoked once the Shadow get completes.</span></div></div><!-- fragment --><p>See <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a> <b>Example 2</b> for an example of using this function with <a class="el" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee" title="Allows the use of AwsIotShadow_Wait for blocking until completion. ">AWS_IOT_SHADOW_FLAG_WAITABLE</a> and <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a>. </p>

</div>
</div>
<a id="af87eb0705e28770ea13756596708dd7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87eb0705e28770ea13756596708dd7f">&#9670;&nbsp;</a></span>AwsIotShadow_GetSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_GetSync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pGetInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeoutMs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **const&#160;</td>
          <td class="paramname"><em>pShadowDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *const&#160;</td>
          <td class="paramname"><em>pShadowDocumentLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve a Thing Shadow with a timeout. </p>
<p>This function queues a Shadow get, then waits for the result. Internally, this function is a call to <a class="el" href="shadow_function_getasync.html">AwsIotShadow_GetAsync</a> followed by <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a>. See <a class="el" href="shadow_function_getasync.html">AwsIotShadow_GetAsync</a> for more information on the Shadow get operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow get. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pGetInfo</td><td>Shadow document parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>If the Shadow service does not respond to the Shadow get within this timeout, this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pShadowDocument</td><td>A pointer to a buffer containing the Shadow document retrieved by a Shadow get is placed here. The buffer was allocated with the function <code>pGetInfo-&gt;get.mallocDocument</code>. This output parameter is only valid if this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pShadowDocumentLength</td><td>The length of the Shadow document in <code>pShadowDocument</code> is placed here. This output parameter is only valid if this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>) </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a0f6e34f7b927a408236605b752c72ec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f6e34f7b927a408236605b752c72ec7">&#9670;&nbsp;</a></span>AwsIotShadow_UpdateAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_UpdateAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pUpdateInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pCallbackInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> *const&#160;</td>
          <td class="paramname"><em>pUpdateOperation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a Thing Shadow update and receive an asynchronous notification when the Shadow Update completes. </p>
<p>This function modifies the Thing Shadow document stored by the Shadow service. If a given Thing has no Shadow and this function is called, then a new Shadow is created.</p>
<p>New JSON keys in the Shadow document will be appended. For example, if the Shadow service currently has a document containing key <code>example1</code> and this function sends a document only containing key <code>example2</code>, then the resulting document in the Shadow service will contain both <code>example1</code> and <code>example2</code>.</p>
<p>Existing JSON keys in the Shadow document will be replaced. For example, if the Shadow service currently has a document containing <code>"example1": [0,1,2]</code> and this function sends a document containing key <code>"example1": [1,2,3]</code>, then the resulting document in the Shadow service will contain <code>"example1": [1,2,3]</code>.</p>
<p>Successful Shadow updates will trigger the <a class="el" href="shadow_function_setupdatedcallback.html">Shadow updated callback</a>. If the resulting Shadow document contains different <code>desired</code> and <code>reported</code> keys, then the <a class="el" href="shadow_function_setdeltacallback.html">Shadow delta callback</a> will be triggered as well.</p>
<dl class="section attention"><dt>Attention</dt><dd>All documents passed to this function must contain a <code>clientToken</code>. The <a href="https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-document.html#client-token">client token</a> is a string used to distinguish between Shadow updates. They are limited to 64 characters; attempting to use a client token longer than 64 characters will cause the Shadow update to fail. They must be unique at any given time, i.e. they may be reused <em>as long as no two Shadow updates are using the same client token at the same time</em>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow update. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pUpdateInfo</td><td>Shadow document parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pCallbackInfo</td><td>Asynchronous notification of this function's completion. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pUpdateOperation</td><td>Set to a handle by which this operation may be referenced after this function returns. This reference is invalidated once the Shadow update completes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This function will return <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04" title="Shadow operation queued, awaiting result. ">AWS_IOT_SHADOW_STATUS_PENDING</a> upon successfully queuing a Shadow update. </dd>
<dd>
If this function fails before queuing a Shadow update, it will return one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a> </li>
</ul>
</dd>
<dd>
Upon successful completion of the Shadow update (either through an <a class="el" href="structAwsIotShadowCallbackInfo__t.html" title="Information on a user-provided Shadow callback function. ">AwsIotShadowCallbackInfo_t</a> or <a class="el" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc" title="Wait for a Shadow operation to complete. ">AwsIotShadow_Wait</a>), the status will be <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>. </dd>
<dd>
Should the Shadow update fail, the status will be one of:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>)</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_updatesync.html">AwsIotShadow_UpdateSync</a> for a blocking variant of this function.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// Shadow update completion callback.</span></div><div class="line"><span class="keywordtype">void</span> _updateComplete( <span class="keywordtype">void</span> * pCallbackContext,</div><div class="line">                      <a class="code" href="structAwsIotShadowCallbackParam__t.html">AwsIotShadowCallbackParam_t</a> * pCallbackParam );</div><div class="line"></div><div class="line"><span class="comment">// Parameters and return value of Shadow update.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> updateInfo = { ... };</div><div class="line">uint32_t timeout = 5000; <span class="comment">// 5 seconds</span></div><div class="line"></div><div class="line"><span class="comment">// Set Shadow document to send.</span></div><div class="line">updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument = <span class="stringliteral">&quot;{...}&quot;</span>; <span class="comment">// Must contain clientToken</span></div><div class="line">updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.updateDocumentLength = strlen( updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument );</div><div class="line"></div><div class="line"><span class="comment">// Callback for update completion.</span></div><div class="line"><a class="code" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> updateCallback = <a class="code" href="aws__iot__shadow__types_8h.html#ab23cd11c4ca278342eade8ca1f631144">AWS_IOT_SHADOW_CALLBACK_INFO_INITIALIZER</a>;</div><div class="line">updateCallback.<a class="code" href="structAwsIotShadowCallbackInfo__t.html#af5e7a55fe0ffb51a67363d2295077c84">function</a> = _updateComplete;</div><div class="line"></div><div class="line"><span class="comment">// Shadow update operation.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#a0f6e34f7b927a408236605b752c72ec7">AwsIotShadow_UpdateAsync</a>( mqttConnection,</div><div class="line">                                   &amp;updateInfo,</div><div class="line">                                   0,</div><div class="line">                                   &amp;updateCallback,</div><div class="line">                                   NULL );</div><div class="line"></div><div class="line"><span class="comment">// Update should have returned AWS_IOT_SHADOW_STATUS_PENDING. The function</span></div><div class="line"><span class="comment">// _updateComplete will be invoked once the Shadow update completes.</span></div></div><!-- fragment --><p>See <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a> <b>Example 1</b> for an example of using this function with <a class="el" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee" title="Allows the use of AwsIotShadow_Wait for blocking until completion. ">AWS_IOT_SHADOW_FLAG_WAITABLE</a> and <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a>. </p>

</div>
</div>
<a id="ab14f9d1253d2142c34ef22758c84c255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14f9d1253d2142c34ef22758c84c255">&#9670;&nbsp;</a></span>AwsIotShadow_UpdateSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_UpdateSync </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pUpdateInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeoutMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a Thing Shadow update with a timeout. </p>
<p>This function queues a Shadow update, then waits for the result. Internally, this function is a call to <a class="el" href="shadow_function_updateasync.html">AwsIotShadow_UpdateAsync</a> followed by <a class="el" href="shadow_function_wait.html">AwsIotShadow_Wait</a>. See <a class="el" href="shadow_function_updateasync.html">AwsIotShadow_UpdateAsync</a> for more information on the Shadow update operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for Shadow update. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pUpdateInfo</td><td>Shadow document parameters. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags which modify the behavior of this function. See <a class="el" href="shadow_constants.html#shadow_constants_flags">Shadow Function Flags</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>If the Shadow service does not respond to the Shadow update within this timeout, this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>) </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a4c256d388abf0db285d01c8c7a42a0cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c256d388abf0db285d01c8c7a42a0cc">&#9670;&nbsp;</a></span>AwsIotShadow_Wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_Wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a>&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeoutMs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **const&#160;</td>
          <td class="paramname"><em>pShadowDocument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *const&#160;</td>
          <td class="paramname"><em>pShadowDocumentLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for a Shadow operation to complete. </p>
<p>This function blocks to wait for a <a class="el" href="shadow_function_deleteasync.html">delete</a>, <a class="el" href="shadow_function_getasync.html">get</a>, or <a class="el" href="shadow_function_updateasync.html">update</a> to complete. These operations are by default asynchronous; the function calls queue an operation for processing, and a callback is invoked once the operation is complete.</p>
<p>To use this function, the flag <a class="el" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee" title="Allows the use of AwsIotShadow_Wait for blocking until completion. ">AWS_IOT_SHADOW_FLAG_WAITABLE</a> must have been set in the operation's function call. Additionally, this function must always be called with any waitable operation to clean up resources.</p>
<p>Regardless of its return value, this function always clean up resources used by the waitable operation. This means <code>operation</code> is invalidated as soon as this function returns, even if it returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a> or another error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">operation</td><td>Reference to the Shadow operation to wait for. The flag <a class="el" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee" title="Allows the use of AwsIotShadow_Wait for blocking until completion. ">AWS_IOT_SHADOW_FLAG_WAITABLE</a> must have been set for this operation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeoutMs</td><td>How long to wait before returning <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pShadowDocument</td><td>A pointer to a buffer containing the Shadow document retrieved by a <a class="el" href="shadow_function_getasync.html">Shadow get</a> is placed here. The buffer was allocated with the function <a class="el" href="structAwsIotShadowDocumentInfo__t.html#ad06193fe2d653c76f0b7bfc8c3f7df94" title="Function to allocate memory for an incoming Shadow document. ">AwsIotShadowDocumentInfo_t.mallocDocument</a> passed to <a class="el" href="shadow_function_getasync.html">AwsIotShadow_GetAsync</a>. This parameter is only valid for a <a class="el" href="shadow_function_getasync.html">Shadow get</a> and ignored for other Shadow operations. This output parameter is only valid if this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pShadowDocumentLength</td><td>The length of the Shadow document in <code>pShadowDocument</code> is placed here. This parameter is only valid for a <a class="el" href="shadow_function_getasync.html">Shadow get</a> and ignored for other Shadow operations. This output parameter is only valid if this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab9154f8d0e8a52c868e8f601fb164960" title="Response received from Shadow service not understood. ">AWS_IOT_SHADOW_BAD_RESPONSE</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
<li>A Shadow service rejection reason between 400 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daa7723c8df51cd24d3821b8f1286d715a" title="Shadow operation rejected: Bad request. ">AWS_IOT_SHADOW_BAD_REQUEST</a>) and 500 (<a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da49ceecba1338711526bf8cf81664a880" title="Shadow operation rejected: Internal service failure. ">AWS_IOT_SHADOW_SERVER_ERROR</a>)</li>
</ul>
</dd></dl>
<p><b>Example 1 (Shadow Update)</b> </p><div class="fragment"><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> updateInfo = { ... };</div><div class="line"></div><div class="line"><span class="comment">// Reference and timeout.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> updateOperation = <a class="code" href="aws__iot__shadow__types_8h.html#a9d5dc33c2274d0fa14a0606275181a5d">AWS_IOT_SHADOW_OPERATION_INITIALIZER</a>;</div><div class="line">uint32_t timeout = 5000; <span class="comment">// 5 seconds</span></div><div class="line"></div><div class="line"><span class="comment">// Shadow update operation.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#a0f6e34f7b927a408236605b752c72ec7">AwsIotShadow_UpdateAsync</a>( mqttConnection,</div><div class="line">                                   &amp;updateInfo,</div><div class="line">                                   <a class="code" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee">AWS_IOT_SHADOW_FLAG_WAITABLE</a>,</div><div class="line">                                   NULL,</div><div class="line">                                   &amp;updateOperation );</div><div class="line"></div><div class="line"><span class="comment">// Update should have returned AWS_IOT_SHADOW_STATUS_PENDING. The call to wait</span></div><div class="line"><span class="comment">// returns once the result of the update is available or the timeout expires.</span></div><div class="line"><span class="keywordflow">if</span>( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a> )</div><div class="line">{</div><div class="line">    <span class="comment">// The last two parameters are ignored for a Shadow update.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc">AwsIotShadow_Wait</a>( updateOperation, timeout, NULL, NULL );</div><div class="line"></div><div class="line">    <span class="comment">// After the call to wait, the result of the update is known</span></div><div class="line">    <span class="comment">// (not AWS_IOT_SHADOW_STATUS_PENDING).</span></div><div class="line">    assert( result != <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a> );</div><div class="line">}</div></div><!-- fragment --><p><b>Example 2 (Shadow Get)</b> </p><div class="fragment"><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> getInfo = { ... };</div><div class="line"></div><div class="line"><span class="comment">// Reference and timeout.</span></div><div class="line"><a class="code" href="group__shadow__datatypes__handles.html#ga6bea7f19c374b5272b9ab7897234d7c5">AwsIotShadowOperation_t</a> getOperation = <a class="code" href="aws__iot__shadow__types_8h.html#a9d5dc33c2274d0fa14a0606275181a5d">AWS_IOT_SHADOW_OPERATION_INITIALIZER</a>;</div><div class="line">uint32_t timeout = 5000; <span class="comment">// 5 seconds</span></div><div class="line"></div><div class="line"><span class="comment">// Buffer pointer and size for retrieved Shadow document.</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * pShadowDocument = NULL;</div><div class="line"><span class="keywordtype">size_t</span> documentLength = 0;</div><div class="line"></div><div class="line"><span class="comment">// Buffer allocation function must be set for a waitable Shadow get.</span></div><div class="line">getInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a98fd3c16e63cefbad388d6230462b303">get</a>.mallocDocument = malloc;</div><div class="line"></div><div class="line"><span class="comment">// Shadow get operation.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#aa263c0f9188f44f63240da141fbd61fc">AwsIotShadow_GetAsync</a>( mqttConnection,</div><div class="line">                                &amp;getInfo,</div><div class="line">                                <a class="code" href="aws__iot__shadow__types_8h.html#a936ad77bc6564d0e8fee7adf671d4aee">AWS_IOT_SHADOW_FLAG_WAITABLE</a>,</div><div class="line">                                NULL,</div><div class="line">                                &amp;getOperation );</div><div class="line"></div><div class="line"><span class="comment">// Get should have returned AWS_IOT_SHADOW_STATUS_PENDING. The call to wait</span></div><div class="line"><span class="comment">// returns once the result of the get is available or the timeout expires.</span></div><div class="line"><span class="keywordflow">if</span>( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a> )</div><div class="line">{</div><div class="line">    <span class="comment">// The last two parameters must be set for a Shadow get.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#a4c256d388abf0db285d01c8c7a42a0cc">AwsIotShadow_Wait</a>( getOperation, timeout, &amp;pShadowDocument, &amp;documentLength );</div><div class="line"></div><div class="line">    <span class="comment">// After the call to wait, the result of the get is known</span></div><div class="line">    <span class="comment">// (not AWS_IOT_SHADOW_STATUS_PENDING).</span></div><div class="line">    assert( result != <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a> );</div><div class="line"></div><div class="line">    <span class="comment">// The retrieved Shadow document is only valid for a successful Shadow get.</span></div><div class="line">    <span class="keywordflow">if</span>( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5">AWS_IOT_SHADOW_SUCCESS</a> )</div><div class="line">    {</div><div class="line">        <span class="comment">// Do something with the Shadow document...</span></div><div class="line"></div><div class="line">        <span class="comment">// Free the Shadow document when finished.</span></div><div class="line">        free( pShadowDocument );</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="adda0f6b22dbb3ae873aa04959753ca48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda0f6b22dbb3ae873aa04959753ca48">&#9670;&nbsp;</a></span>AwsIotShadow_SetDeltaCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_SetDeltaCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thingNameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pDeltaCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback to be invoked when the Thing Shadow <code>desired</code> and <code>reported</code> states differ. </p>
<p>A Thing Shadow contains <code>reported</code> and <code>desired</code> states, meant to represent the current device status and some desired status, respectively. When the <code>reported</code> and <code>desired</code> states differ, the Thing Shadow service generates a <em>delta document</em> and publishes it to the topic <code>update/delta</code>. Devices with a subscription for this topic will receive the delta document and may act based on the different <code>reported</code> and <code>desired</code> states. See <a href="https://docs.aws.amazon.com/iot/latest/developerguide/using-device-shadows.html#delta-state">this page</a> for more information about using delta documents.</p>
<p>A <em>delta callback</em> may be invoked whenever a delta document is generated. Each Thing may have a single delta callback set. This function modifies the delta callback for a specific Thing depending on the <code>pDeltaCallback</code> parameter and the presence of any existing delta callback:</p><ul>
<li>When no existing delta callback exists for a specific Thing, a new delta callback is added.</li>
<li>If there is an existing delta callback and <code>pDeltaCallback</code> is not <code>NULL</code>, then the existing callback function and parameter are replaced with <code>pDeltaCallback</code>.</li>
<li>If there is an existing subscription and <code>pDeltaCallback</code> is <code>NULL</code>, then the delta callback is removed.</li>
</ul>
<p>This function is always blocking; it may block for up to the default MQTT timeout. This timeout is set as a parameter to <a class="el" href="shadow_function_init.html">AwsIotShadow_Init</a>, and defaults to <a class="el" href="shadow_config.html#AWS_IOT_SHADOW_DEFAULT_MQTT_TIMEOUT_MS">AWS_IOT_SHADOW_DEFAULT_MQTT_TIMEOUT_MS</a> if not set. If this function's underlying MQTT operations fail to complete within this timeout, then this function returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for the subscription to <code>update/delta</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>The subscription to <code>update/delta</code> will be added for this Thing Name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thingNameLength</td><td>The length of <code>pThingName</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>This parameter is for future-compatibility. Currently, flags are not supported for this function and this parameter is ignored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pDeltaCallback</td><td>Callback function to invoke for incoming delta documents.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
</ul>
</dd>
<dd>
This function always returns <a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a> when replacing or removing existing delta callbacks.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_setupdatedcallback.html">AwsIotShadow_SetUpdatedCallback</a> for the function to register callbacks for all Shadow updates.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define THING_NAME &quot;Test_device&quot;</span></div><div class="line"><span class="preprocessor">#define THING_NAME_LENGTH ( sizeof( THING_NAME ) - 1 )</span></div><div class="line"></div><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> deltaCallback = <a class="code" href="aws__iot__shadow__types_8h.html#ab23cd11c4ca278342eade8ca1f631144">AWS_IOT_SHADOW_CALLBACK_INFO_INITIALIZER</a>;</div><div class="line"></div><div class="line"><span class="comment">// _deltaCallbackFunction will be invoked when a delta document is received.</span></div><div class="line">deltaCallback.<a class="code" href="structAwsIotShadowCallbackInfo__t.html#af5e7a55fe0ffb51a67363d2295077c84">function</a> = _deltaCallbackFunction;</div><div class="line"></div><div class="line"><span class="comment">// Set the delta callback for the Thing &quot;Test_device&quot;.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#adda0f6b22dbb3ae873aa04959753ca48">AwsIotShadow_SetDeltaCallback</a>( mqttConnection,</div><div class="line">                                        THING_NAME,</div><div class="line">                                        <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>,</div><div class="line">                                        0,</div><div class="line">                                        &amp;deltaCallback );</div><div class="line"></div><div class="line"><span class="comment">// Check if callback was successfully set.</span></div><div class="line"><span class="keywordflow">if</span>( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5">AWS_IOT_SHADOW_SUCCESS</a> )</div><div class="line">{</div><div class="line">    <a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> updateInfo = <a class="code" href="aws__iot__shadow__types_8h.html#a1e82234a599c0b2529dc260dbfce8c84">AWS_IOT_SHADOW_DOCUMENT_INFO_INITIALIZER</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Set the Thing Name for Shadow update.</span></div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a8bb1e657b186eaf1b2dd63ead5b8f605">pThingName</a> = THING_NAME;</div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#ac9a6ef2409f9f68948c99b80f389256f">thingNameLength</a> = <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Set the Shadow document to send. This document has different &quot;reported&quot;</span></div><div class="line">    <span class="comment">// and &quot;desired&quot; states. It represents a scenario where a device is currently</span></div><div class="line">    <span class="comment">// off, but is being ordered to turn on.</span></div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument =</div><div class="line">    <span class="stringliteral">&quot;{&quot;</span></div><div class="line">         <span class="stringliteral">&quot;\&quot;state\&quot;: {&quot;</span></div><div class="line">             <span class="stringliteral">&quot;\&quot;reported\&quot;: { \&quot;deviceOn\&quot;: false },&quot;</span></div><div class="line">             <span class="stringliteral">&quot;\&quot;desired\&quot;: { \&quot;deviceOn\&quot;: true }&quot;</span></div><div class="line">         <span class="stringliteral">&quot;}&quot;</span></div><div class="line">    <span class="stringliteral">&quot;}&quot;</span>;</div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.updateDocumentLength = strlen( updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument );</div><div class="line"></div><div class="line">    <span class="comment">// Send the Shadow document with different &quot;reported&quot; and desired states.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#ab14f9d1253d2142c34ef22758c84c255">AwsIotShadow_UpdateSync</a>( mqttConnection,</div><div class="line">                                      &amp;updateInfo,</div><div class="line">                                      0,</div><div class="line">                                      0,</div><div class="line">                                      5000 );</div><div class="line"></div><div class="line">    <span class="comment">// After the update is successfully sent, the function _deltaCallbackFunction</span></div><div class="line">    <span class="comment">// will be invoked once the Shadow service generates and sends a delta document.</span></div><div class="line">    <span class="comment">// The delta document will contain the different &quot;deviceOn&quot; states, as well as</span></div><div class="line">    <span class="comment">// metadata.</span></div><div class="line"></div><div class="line">    <span class="comment">// Once the delta callback is no longer needed, it may be removed by passing</span></div><div class="line">    <span class="comment">// NULL as pDeltaCallback.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#adda0f6b22dbb3ae873aa04959753ca48">AwsIotShadow_SetDeltaCallback</a>( mqttConnection,</div><div class="line">                                            THING_NAME,</div><div class="line">                                            <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>,</div><div class="line">                                            0,</div><div class="line">                                            NULL );</div><div class="line"></div><div class="line">    <span class="comment">// The return value from removing a delta callback should always be success.</span></div><div class="line">    assert( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5">AWS_IOT_SHADOW_SUCCESS</a> );</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="a4e8d96e5914659c1b0b0cf3429fabcf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8d96e5914659c1b0b0cf3429fabcf9">&#9670;&nbsp;</a></span>AwsIotShadow_SetUpdatedCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_SetUpdatedCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thingNameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> *&#160;</td>
          <td class="paramname"><em>pUpdatedCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a callback to be invoked when a Thing Shadow changes. </p>
<p>The Shadow service publishes a state document to the <code>update/documents</code> topic whenever a Thing Shadow is successfully updated. This document reports the complete previous and current Shadow documents in <code>previous</code> and <code>current</code> sections, respectively. Therefore, the <code>update/documents</code> topic is useful for monitoring Shadow updates.</p>
<p>An <em>updated callback</em> may be invoked whenever a document is published to <code>update/documents</code>. Each Thing may have a single updated callback set. This function modifies the updated callback for a specific Thing depending on the <code>pUpdatedCallback</code> parameter and the presence of any existing updated callback.</p><ul>
<li>When no existing updated callback exists for a specific Thing, a new updated callback is added.</li>
<li>If there is an existing updated callback and <code>pUpdatedCallback</code> is not <code>NULL</code>, then the existing callback function and parameter are replaced with <code>pUpdatedCallback</code>.</li>
<li>If there is an existing updated callback and <code>pUpdatedCallback</code> is <code>NULL</code>, then the updated callback is removed.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection to use for the subscription to <code>update/documents</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>The subscription to <code>update/documents</code> will be added for this Thing Name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thingNameLength</td><td>The length of <code>pThingName</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>This parameter is for future-compatibility. Currently, flags are not supported for this function and this parameter is ignored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pUpdatedCallback</td><td>Callback function to invoke for incoming updated documents.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daff9618ab3eaed18259869e9af734ba4d" title="An API function was called before AwsIotShadow_Init. ">AWS_IOT_SHADOW_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580dab185937dbdc1f9ccbdbdd2f34fc2dea0" title="At least one parameter is invalid. ">AWS_IOT_SHADOW_BAD_PARAMETER</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da97388b861cc50d829ab1b1076390592f" title="A blocking Shadow operation timed out. ">AWS_IOT_SHADOW_TIMEOUT</a></li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Documents published to <code>update/documents</code> will be large, as they contain 2 complete Shadow state documents. If an updated callback is used, ensure that the device has sufficient memory for incoming documents.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="shadow_function_setdeltacallback.html">AwsIotShadow_SetDeltaCallback</a> for the function to register callbacks for delta documents.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#define THING_NAME &quot;Test_device&quot;</span></div><div class="line"><span class="preprocessor">#define THING_NAME_LENGTH ( sizeof( THING_NAME ) - 1 )</span></div><div class="line"></div><div class="line"><a class="code" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> result = <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da46899c74ca9b0b1f72746e17af3bdf04">AWS_IOT_SHADOW_STATUS_PENDING</a>;</div><div class="line"><a class="code" href="structAwsIotShadowCallbackInfo__t.html">AwsIotShadowCallbackInfo_t</a> updatedCallback = <a class="code" href="aws__iot__shadow__types_8h.html#ab23cd11c4ca278342eade8ca1f631144">AWS_IOT_SHADOW_CALLBACK_INFO_INITIALIZER</a>;</div><div class="line"></div><div class="line"><span class="comment">// _updatedCallbackFunction will be invoked when an updated document is received.</span></div><div class="line">updatedCallback.<a class="code" href="structAwsIotShadowCallbackInfo__t.html#af5e7a55fe0ffb51a67363d2295077c84">function</a> = _updatedCallbackFunction;</div><div class="line"></div><div class="line"><span class="comment">// Set the updated callback for the Thing &quot;Test_device&quot;.</span></div><div class="line">result = <a class="code" href="aws__iot__shadow_8h.html#a4e8d96e5914659c1b0b0cf3429fabcf9">AwsIotShadow_SetUpdatedCallback</a>( mqttConnection,</div><div class="line">                                          THING_NAME,</div><div class="line">                                          <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>,</div><div class="line">                                          0,</div><div class="line">                                          &amp;updatedCallback );</div><div class="line"></div><div class="line"><span class="comment">// Check if the callback was successfully set.</span></div><div class="line"><span class="keywordflow">if</span>( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5">AWS_IOT_SHADOW_SUCCESS</a> )</div><div class="line">{</div><div class="line">    <a class="code" href="structAwsIotShadowDocumentInfo__t.html">AwsIotShadowDocumentInfo_t</a> updateInfo = <a class="code" href="aws__iot__shadow__types_8h.html#a1e82234a599c0b2529dc260dbfce8c84">AWS_IOT_SHADOW_DOCUMENT_INFO_INITIALIZER</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Set the Thing Name for Shadow update.</span></div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a8bb1e657b186eaf1b2dd63ead5b8f605">pThingName</a> = THING_NAME;</div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#ac9a6ef2409f9f68948c99b80f389256f">thingNameLength</a> = <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Set the Shadow document to send. Any Shadow update will trigger the</span></div><div class="line">    <span class="comment">// updated callback.</span></div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument =</div><div class="line">    <span class="stringliteral">&quot;{&quot;</span></div><div class="line">         <span class="stringliteral">&quot;\&quot;state\&quot;: {&quot;</span></div><div class="line">             <span class="stringliteral">&quot;\&quot;reported\&quot;: { \&quot;deviceOn\&quot;: false }&quot;</span></div><div class="line">         <span class="stringliteral">&quot;}&quot;</span></div><div class="line">    <span class="stringliteral">&quot;}&quot;</span>;</div><div class="line">    updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.updateDocumentLength = strlen( updateInfo.<a class="code" href="structAwsIotShadowDocumentInfo__t.html#a705a9b00350e9184f5796ea21bd43a2d">update</a>.pUpdateDocument );</div><div class="line"></div><div class="line">    <span class="comment">// Send the Shadow document. A successful update will trigger the updated callback.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#ab14f9d1253d2142c34ef22758c84c255">AwsIotShadow_UpdateSync</a>( mqttConnection,</div><div class="line">                                      &amp;updateInfo,</div><div class="line">                                      0,</div><div class="line">                                      0,</div><div class="line">                                      5000 );</div><div class="line"></div><div class="line">    <span class="comment">// After a successful Shadow update, the updated callback will be invoked.</span></div><div class="line"></div><div class="line">    <span class="comment">// Once the updated callback is no longer needed, it may be removed by</span></div><div class="line">    <span class="comment">// passing NULL as pUpdatedCallback.</span></div><div class="line">    result = <a class="code" href="aws__iot__shadow_8h.html#a4e8d96e5914659c1b0b0cf3429fabcf9">AwsIotShadow_SetUpdatedCallback</a>( mqttConnection,</div><div class="line">                                              THING_NAME,</div><div class="line">                                              <a class="code" href="aws__iot__tests__shadow__system_8c.html#ad110c1c651de6cd9e7fef3135e2b5146">THING_NAME_LENGTH</a>,</div><div class="line">                                              NULL );</div><div class="line"></div><div class="line">    <span class="comment">// The return value from removing an updated callback should always be</span></div><div class="line">    <span class="comment">// success.</span></div><div class="line">    assert( result == <a class="code" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5">AWS_IOT_SHADOW_SUCCESS</a> );</div><div class="line">}</div></div><!-- fragment --> 
</div>
</div>
<a id="a7873b253ef295e004d1da56138bd2305"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7873b253ef295e004d1da56138bd2305">&#9670;&nbsp;</a></span>AwsIotShadow_RemovePersistentSubscriptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a> AwsIotShadow_RemovePersistentSubscriptions </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/ubuntu/Repos/aws-iot-device-sdk-embedded-C/doc/tag/mqtt.tag:../mqtt/" href="../mqtt/group__mqtt__datatypes__handles.html#ga4780ec2a55c4c322e9f5b7ce9dec3cf7">IotMqttConnection_t</a>&#160;</td>
          <td class="paramname"><em>mqttConnection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thingNameLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove persistent Thing Shadow operation topic subscriptions. </p>
<p>Passing the flag <a class="el" href="aws__iot__shadow__types_8h.html#ae5bef45f32f283af7d8d0dcb1300f5b0">AWS_IOT_SHADOW_FLAG_KEEP_SUBSCRIPTIONS</a> to <a class="el" href="shadow_function_deleteasync.html">AwsIotShadow_DeleteAsync</a>, <a class="el" href="shadow_function_getasync.html">AwsIotShadow_GetAsync</a>, <a class="el" href="shadow_function_updateasync.html">AwsIotShadow_UpdateAsync</a>, or their blocking versions. causes the Shadow operation topic subscriptions to be maintained for future calls to the same function. If a persistent subscription for a Shadow topic are no longer needed, this function may be used to remove it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mqttConnection</td><td>The MQTT connection associated with the persistent subscription. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>The Thing Name associated with the persistent subscription. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thingNameLength</td><td>The length of <code>pThingName</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags that determine which subscriptions to remove. Valid values are the bitwise OR of the following individual flags:<ul>
<li><a class="el" href="aws__iot__shadow__types_8h.html#a00c99b058757b515c59273c6e811a4b9">AWS_IOT_SHADOW_FLAG_REMOVE_DELETE_SUBSCRIPTIONS</a></li>
<li><a class="el" href="aws__iot__shadow__types_8h.html#a012d83f48216422c5324cc294c9f8d0f">AWS_IOT_SHADOW_FLAG_REMOVE_GET_SUBSCRIPTIONS</a></li>
<li><a class="el" href="aws__iot__shadow__types_8h.html#a2f79bd3b37dc645c740faaa646d39e14">AWS_IOT_SHADOW_FLAG_REMOVE_UPDATE_SUBSCRIPTIONS</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da25e45d9e48f64daac9ad2205654087c5" title="Shadow operation completed successfully. ">AWS_IOT_SHADOW_SUCCESS</a> </li>
</ul>
</dd>
<dd>
If an MQTT UNSUBSCRIBE packet cannot be sent, one of the following:<ul>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580daebd5e31e2dfaac6dbb376c4852c0b41a" title="Shadow operation failed because of memory allocation failure. ">AWS_IOT_SHADOW_NO_MEMORY</a></li>
<li><a class="el" href="group__shadow__datatypes__enums.html#gga2ff0365cc9f00ac61c735b884331580da143efc7ed6d140da56198573a18fcc06" title="Shadow operation failed because of failure in MQTT library. ">AWS_IOT_SHADOW_MQTT_ERROR</a></li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="shadow_function_cleanup.html">AwsIotShadow_Cleanup</a> removes all persistent subscriptions as well.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is not safe to call with any in-progress operations! It also does not affect delta and updated callbacks registered with <a class="el" href="shadow_function_setdeltacallback.html">AwsIotShadow_SetDeltaCallback</a> and <a class="el" href="shadow_function_setupdatedcallback.html">AwsIotShadow_SetUpdatedCallback</a>, respectively. (See documentation for those functions on how to remove their callbacks). </dd></dl>

</div>
</div>
<a id="a0d33a7ff56af1cea1beca37513e0a8ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d33a7ff56af1cea1beca37513e0a8ec">&#9670;&nbsp;</a></span>AwsIotShadow_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* AwsIotShadow_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d">AwsIotShadowError_t</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string that describes an <a class="el" href="group__shadow__datatypes__enums.html#ga2ff0365cc9f00ac61c735b884331580d" title="Return codes of Shadow functions. ">AwsIotShadowError_t</a>. </p>
<p>Like POSIX's <code>strerror</code>, this function returns a string describing a return code. In this case, the return code is a Shadow library error code, <code>status</code>.</p>
<p>The string returned by this function <b>MUST</b> be treated as read-only: any attempt to modify its contents may result in a crash. Therefore, this function is limited to usage in logging.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>The status to describe.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A read-only string that describes <code>status</code>.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The string returned by this function must never be modified. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- This file provides the custom footer for Doxygen-generated HTML. Per the
Doxygen documentation, this file may need to be regenerated when Doxygen is
updated. -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Generated by
      <a href="http://www.doxygen.org/index.html">
      <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14
    </li>
    <li class="footer">
      Last updated Thu Apr 30 2020
    </li>
    <li class="footer" style="float:left">
        SDK version 4.0.0b1
    </li>
  </ul>
</div>
</body>
</html>
