<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: Configurations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update<span id="projectnumber">&#160;v3.0.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ota_config.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configurations </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Configurations of the OTA Library.</p>
<dl class="section user"><dt>configpagestyle</dt><dd></dd></dl>
<p>Some configuration settings are C pre-processor constants, and some are function-like macros for logging. They can be set with a <code>#define</code> in the config file (<b>ota_config.h</b>) or by using a compiler option such as -D in gcc.</p>
<h1><a class="anchor" id="OTA_DO_NOT_USE_CUSTOM_CONFIG"></a>
OTA_DO_NOT_USE_CUSTOM_CONFIG</h1>
<p >Define this macro to build the OTA library without the custom config file ota_config.h. Without the custom config, the OTA library builds with default values of config macros defined in <a class="el" href="ota__config__defaults_8h.html" title="This represents the default values for the configuration macros for the OTA library.">ota_config_defaults.h</a> file.</p>
<p >If a custom config is provided, then OTA_DO_NOT_USE_CUSTOM_CONFIG should not be defined.</p>
<h1><a class="anchor" id="otaconfigSTACK_SIZE"></a>
otaconfigSTACK_SIZE</h1>
<p >The number of words allocated to the stack for the OTA agent. The configuration parameter specifies the size of the stack that will be allocated to the task being created (the size is specified in words, not bytes!). The amount of stack required is dependent on the application specific parameters, for more information <a href="https://www.freertos.org/FAQMem.html#StackSize">Link</a></p>
<p ><b>Possible values:</b> Any positive 32 bit integer. <br  />
 <b>Default value:</b> Varies by platform</p>
<h1><a class="anchor" id="otaconfigAGENT_PRIORITY"></a>
otaconfigAGENT_PRIORITY</h1>
<p >The OTA agent task priority. Normally it runs at a low priority. For more information <a href="https://www.freertos.org/RTOS-task-priority.html">Link</a>.</p>
<p ><b>Possible values:</b> 0 to ( configMAX_PRIORITIES â€“ 1 ) <br  />
 <b>Default value:</b> Varies by platform.</p>
<h1><a class="anchor" id="otaconfigLOG2_FILE_BLOCK_SIZE"></a>
otaconfigLOG2_FILE_BLOCK_SIZE</h1>
<p >Log base 2 of the size of the file data block message (excluding the header). <b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '12'</p>
<h1><a class="anchor" id="otaconfigMAX_NUM_BLOCKS_REQUEST"></a>
otaconfigMAX_NUM_BLOCKS_REQUEST</h1>
<p >The maximum number of data blocks requested from OTA streaming service. </p><dl class="section note"><dt>Note</dt><dd>This configuration parameter is sent with data requests and represents the maximum number of data blocks the service will send in response. The maximum limit for this must be calculated from the maximum data response limit (128 KB from service) divided by the block size. For example if block size is set as 1 KB then the maximum number of data blocks that we can request is 128/1 = 128 blocks. Configure this parameter to this maximum limit or lower based on how many data blocks response is expected for each data requests.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer value greater than 0. <br  />
 <b>Default value:</b> '1'</p>
<p >Following two diagrams compare otaconfigLOG2_FILE_BLOCK_SIZE set to 10 (1 KB) and 12 (4 KB) with otaconfigMAX_NUM_BLOCKS_REQUEST set to maximum i.e 128 and 32 respectively.</p>
<p ><b>otaconfigLOG2_FILE_BLOCK_SIZE is 10 ( 1KB )</b><br  />
 <b>otaconfigMAX_NUM_BLOCKS_REQUEST is 128</b></p>
<div class="image">
<img src="ota_config_block_size_10.png" alt=""/>
</div>
<p ><b>otaconfigLOG2_FILE_BLOCK_SIZE is 12 ( 4KB )</b><br  />
 <b>otaconfigMAX_NUM_BLOCKS_REQUEST is 32</b></p>
<div class="image">
<img src="ota_config_block_size_12.png" alt=""/>
</div>
<h1><a class="anchor" id="otaconfigSELF_TEST_RESPONSE_WAIT_MS"></a>
otaconfigSELF_TEST_RESPONSE_WAIT_MS</h1>
<p >Milliseconds to wait for the self test phase to succeed before we force reset. <b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '16000'</p>
<h1><a class="anchor" id="otaconfigFILE_REQUEST_WAIT_MS"></a>
otaconfigFILE_REQUEST_WAIT_MS</h1>
<p >Milliseconds to wait before requesting data blocks from the OTA service if nothing is happening. </p><dl class="section note"><dt>Note</dt><dd>The wait timer is reset whenever a data block is received from the OTA service so we will only send the request message after being idle for this amount of time.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '10000'</p>
<h1><a class="anchor" id="otaconfigMAX_THINGNAME_LEN"></a>
otaconfigMAX_THINGNAME_LEN</h1>
<p >The maximum allowed length of the thing name used by the OTA agent. </p><dl class="section note"><dt>Note</dt><dd>AWS IoT requires Thing names to be unique for each device that connects to the broker. Likewise, the OTA agent requires the developer to construct and pass in the Thing name when initializing the OTA agent. The agent uses this size to allocate static storage for the Thing name used in all OTA base topics. Namely $aws/things/thingName</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '64'</p>
<h1><a class="anchor" id="otaconfigMAX_NUM_REQUEST_MOMENTUM"></a>
otaconfigMAX_NUM_REQUEST_MOMENTUM</h1>
<p >The maximum number of requests allowed to send without a response before we abort. </p><dl class="section note"><dt>Note</dt><dd>This configuration parameter sets the maximum number of times the requests are made over the selected communication channel before aborting and returning error.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '32'</p>
<h1><a class="anchor" id="otaconfigMAX_NUM_OTA_DATA_BUFFERS"></a>
otaconfigMAX_NUM_OTA_DATA_BUFFERS</h1>
<p >The number of data buffers reserved by the OTA agent. </p><dl class="section note"><dt>Note</dt><dd>This configurations parameter sets the maximum number of static data buffers used by the OTA agent for job and file data blocks received.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '1'</p>
<h1><a class="anchor" id="otaconfigOTA_UPDATE_STATUS_FREQUENCY"></a>
otaconfigOTA_UPDATE_STATUS_FREQUENCY</h1>
<p >How frequently the device will report its OTA progress to the cloud. </p><dl class="section note"><dt>Note</dt><dd>Device will update the job status with the number of blocks it has received every certain number of blocks it receives. For example, 64 means device will update job status every 64 blocks it receives.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '64'</p>
<h1><a class="anchor" id="otaconfigAllowDowngrade"></a>
otaconfigAllowDowngrade</h1>
<p >Flag to enable booting into updates that have an identical or lower version than the current version. </p><dl class="section note"><dt>Note</dt><dd>Set this configuration parameter to '1' to disable version checks. This allows updates to an identical or lower version. This is provided for testing purpose and it's recommended to always update to higher version and keep this configuration disabled.</dd></dl>
<p><b>Possible values:</b> Any unsigned 32 integer. <br  />
 <b>Default value:</b> '0'</p>
<h1><a class="anchor" id="configENABLED_CONTROL_PROTOCOL"></a>
configENABLED_CONTROL_PROTOCOL</h1>
<p >The protocol selected for OTA control operations. </p><dl class="section note"><dt>Note</dt><dd>This configurations parameter sets the default protocol for all the OTA control operations like requesting OTA job, updating the job status etc.</dd>
<dd>
Only MQTT is supported at this time for control operations.</dd></dl>
<p><b>Possible values:</b> OTA_CONTROL_OVER_MQTT <br  />
 <b>Default value:</b> 'OTA_CONTROL_OVER_MQTT'</p>
<h1><a class="anchor" id="configENABLED_DATA_PROTOCOLS"></a>
configENABLED_DATA_PROTOCOLS</h1>
<p >The protocol selected for OTA data operations. </p><dl class="section note"><dt>Note</dt><dd>This configurations parameter sets the protocols selected for the data operations like requesting file blocks from the service.</dd></dl>
<p><b>Possible values:</b><br  />
 Enable data over MQTT - ( OTA_DATA_OVER_MQTT ) <br  />
 Enable data over HTTP - ( OTA_DATA_OVER_HTTP ) <br  />
 Enable data over both MQTT &amp; HTTP - ( OTA_DATA_OVER_MQTT | OTA_DATA_OVER_HTTP ) <br  />
 <b>Default value:</b> 'OTA_DATA_OVER_MQTT'</p>
<h1><a class="anchor" id="configOTA_PRIMARY_DATA_PROTOCOL"></a>
configOTA_PRIMARY_DATA_PROTOCOL</h1>
<p >The preferred protocol selected for OTA data operations. </p><dl class="section note"><dt>Note</dt><dd>Primary data protocol will be the protocol used for downloading file if more than one protocol is selected while creating OTA job.</dd></dl>
<p><b>Possible values:</b><br  />
 Data over MQTT - ( OTA_DATA_OVER_MQTT ) <br  />
 Data over HTTP - ( OTA_DATA_OVER_HTTP ) <br  />
 <b>Default value:</b> 'OTA_DATA_OVER_MQTT'</p>
<h1><a class="anchor" id="ota_logerror"></a>
LogError</h1>
<p >Macro that is called in the OTA library for logging "Error" level messages. To enable error level logging in the OTA library, this macro should be mapped to the application-specific logging implementation that supports error logging.</p>
<dl class="section note"><dt>Note</dt><dd>This logging macro is called in the OTA library with parameters wrapped in double parentheses to be ISO C89/C90 standard compliant. For a reference POSIX implementation of the logging macros, refer to the ota default config file, and the logging-stack in demos folder of the <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main">AWS IoT Embedded C SDK repository</a>.</dd></dl>
<p><b>Default value</b>: Error logging is turned off, and no code is generated for calls to the macro in the OTA library on compilation.</p>
<h1><a class="anchor" id="ota_logwarn"></a>
LogWarn</h1>
<p >Macro that is called in the OTA library for logging "Warning" level messages. To enable warning level logging in the OTA library, this macro should be mapped to the application-specific logging implementation that supports warning logging.</p>
<dl class="section note"><dt>Note</dt><dd>This logging macro is called in the OTA library with parameters wrapped in double parentheses to be ISO C89/C90 standard compliant. For a reference POSIX implementation of the logging macros, refer to the ota default config file, and the logging-stack in demos folder of the <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main">AWS IoT Embedded C SDK repository</a>.</dd></dl>
<p><b>Default value</b>: Warning logging is turned off, and no code is generated for calls to the macro in the OTA library on compilation.</p>
<h1><a class="anchor" id="ota_loginfo"></a>
LogInfo</h1>
<p >Macro that is called in the OTA library for logging "Info" level messages. To enable info level logging in the OTA library, this macro should be mapped to the application-specific logging implementation that supports info logging.</p>
<dl class="section note"><dt>Note</dt><dd>This logging macro is called in the OTA library with parameters wrapped in double parentheses to be ISO C89/C90 standard compliant. For a reference POSIX implementation of the logging macros, refer to the ota default config file, and the logging-stack in demos folder of the <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main">AWS IoT Embedded C SDK repository</a>.</dd></dl>
<p><b>Default value</b>: Info logging is turned off, and no code is generated for calls to the macro in the OTA library on compilation.</p>
<h1><a class="anchor" id="ota_logdebug"></a>
LogDebug</h1>
<p >Macro that is called in the OTA library for logging "Debug" level messages. To enable Debug level logging in the OTA library, this macro should be mapped to the application-specific logging implementation that supports debug logging.</p>
<dl class="section note"><dt>Note</dt><dd>This logging macro is called in the OTA library with parameters wrapped in double parentheses to be ISO C89/C90 standard compliant. For a reference POSIX implementation of the logging macros, refer to the ota default config file, and the logging-stack in demos folder of the <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main">AWS IoT Embedded C SDK repository</a>.</dd></dl>
<p><b>Default value</b>: Debug logging is turned off, and no code is generated for calls to the macro in the OTA library on compilation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
