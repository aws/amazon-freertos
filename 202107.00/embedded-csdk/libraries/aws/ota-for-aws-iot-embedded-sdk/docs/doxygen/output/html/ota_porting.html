<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: Porting Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update<span id="projectnumber">&#160;v3.0.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ota_porting.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Porting Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Guide for porting OTA to a new platform.</p>
<p >A port to a new platform must provide the following components:</p><ol type="1">
<li><a class="el" href="ota_porting.html#ota_porting_config">Configuration Macros</a></li>
<li><a class="el" href="ota_porting.html#ota_porting_pal">Ports for PAL</a></li>
<li><a class="el" href="ota_porting.html#ota_porting_os">OS Interface</a></li>
<li><a class="el" href="ota_porting.html#ota_porting_mqtt">MQTT Interface</a></li>
<li><a class="el" href="ota_porting.html#ota_porting_http">HTTP Interface</a></li>
</ol>
<h1><a class="anchor" id="ota_porting_config"></a>
Configuration Macros</h1>
<p >Settings that must be set as macros in the config header <code>ota_config.h</code>, or passed in as compiler options.</p>
<dl class="section note"><dt>Note</dt><dd>If a custom configuration header <code>ota_config.h</code> is not provided, then the <a class="el" href="ota_config.html#OTA_DO_NOT_USE_CUSTOM_CONFIG">OTA_DO_NOT_USE_CUSTOM_CONFIG</a> macro must be defined.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_config.html">Configurations</a></dd></dl>
<p>The following optional logging macros are used throughout the library:</p><ul>
<li><a class="el" href="ota__config__defaults_8h.html#a8d9dbaaa88129137a4c68ba0456a18b1">LogError</a></li>
<li><a class="el" href="ota__config__defaults_8h.html#a7da92048aaf0cbfcacde9539c98a0e05">LogWarn</a></li>
<li><a class="el" href="ota__config__defaults_8h.html#a00810b1cb9d2f25d25ce2d4d93815fba">LogInfo</a></li>
<li><a class="el" href="ota__config__defaults_8h.html#af60e8ffc327d136e5d0d8441ed98c98d">LogDebug</a></li>
</ul>
<h1><a class="anchor" id="ota_porting_pal"></a>
OTA PAL requirements:</h1>
<p >The OTA library relies on portable abstraction layer (PAL) callbacks that must be implemented to store the download as it is streamed.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_pal_interface.html">OTA PAL documentation</a></dd></dl>
<p>The OTA PAL interface used by the OTA library is defined in <a class="el" href="ota__platform__interface_8h.html">ota_platform_interface.h</a>. A port must implement functions corresponding to the following function pointers:</p><ul>
<li><a class="el" href="ota__platform__interface_8h.html#aadc190c689aeeb5a611abc7297de5745">OTA PAL Abort</a>: A function to abort access to an existing open file. <div class="fragment"><div class="line"><a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#aadc190c689aeeb5a611abc7297de5745">OtaPalAbort_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_a503f74c089364b482321578b541d7640"><div class="ttname"><a href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a></div><div class="ttdeci">uint32_t OtaPalStatus_t</div><div class="ttdoc">The OTA platform interface return status. Composed of main and sub status.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:61</div></div>
<div class="ttc" id="aota__platform__interface_8h_html_aadc190c689aeeb5a611abc7297de5745"><div class="ttname"><a href="ota__platform__interface_8h.html#aadc190c689aeeb5a611abc7297de5745">OtaPalAbort_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalAbort_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Abort an OTA transfer.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:133</div></div>
<div class="ttc" id="astruct_ota_file_context__t_html"><div class="ttname"><a href="struct_ota_file_context__t.html">OtaFileContext_t</a></div><div class="ttdoc">OTA File Context Information.</div><div class="ttdef"><b>Definition:</b> ota_private.h:380</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#a5808e620bd4831bc60017b292dc92d05">OTA PAL Create File</a>: A function to create a new file for receiving data chunks. <div class="fragment"><div class="line"><a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> (* <a class="code" href="ota__platform__interface_8h.html#a5808e620bd4831bc60017b292dc92d05">OtaPalCreateFileForRx_t</a>)(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_a5808e620bd4831bc60017b292dc92d05"><div class="ttname"><a href="ota__platform__interface_8h.html#a5808e620bd4831bc60017b292dc92d05">OtaPalCreateFileForRx_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalCreateFileForRx_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Create a new receive file for the data chunks as they come in.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:158</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#ac71b2c3dd59681d851aa597be054060f">OTA PAL Close File</a>: A function to authenticate and close a file used for receiving data. <div class="fragment"><div class="line"><a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#ac71b2c3dd59681d851aa597be054060f">OtaPalCloseFile_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_ac71b2c3dd59681d851aa597be054060f"><div class="ttname"><a href="ota__platform__interface_8h.html#ac71b2c3dd59681d851aa597be054060f">OtaPalCloseFile_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalCloseFile_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Authenticate and close the underlying receive file in the specified OTA context.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:184</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#a481db6e2616fad63ca98d35d1eb29a91">OTA PAL Write Block</a>: A function to write a block of data to the specified file at the given offset. <div class="fragment"><div class="line">int16_t ( * <a class="code" href="ota__platform__interface_8h.html#a481db6e2616fad63ca98d35d1eb29a91">OtaPalWriteBlock_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext,</div>
<div class="line">    uint32_t offset,</div>
<div class="line">    uint8_t * <span class="keyword">const</span> pData,</div>
<div class="line">    uint32_t blockSize</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_a481db6e2616fad63ca98d35d1eb29a91"><div class="ttname"><a href="ota__platform__interface_8h.html#a481db6e2616fad63ca98d35d1eb29a91">OtaPalWriteBlock_t</a></div><div class="ttdeci">int16_t(* OtaPalWriteBlock_t)(OtaFileContext_t *const pFileContext, uint32_t offset, uint8_t *const pData, uint32_t blockSize)</div><div class="ttdoc">Write a block of data to the specified file at the given offset.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:205</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#a0a57a461aaba81de1345fb3412d5293c">OTA PAL Activate New Image</a>: A function to activate the newest device image received via OTA. <div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#a0a57a461aaba81de1345fb3412d5293c">OtaPalActivateNewImage_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_a0a57a461aaba81de1345fb3412d5293c"><div class="ttname"><a href="ota__platform__interface_8h.html#a0a57a461aaba81de1345fb3412d5293c">OtaPalActivateNewImage_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalActivateNewImage_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Activate the newest MCU image received via OTA.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:222</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#a1493f1fe9489073e7d615746d24fa2f0">OTA PAL Reset Device</a>: A function to reset the device and cause a reboot of the system. <div class="fragment"><div class="line"><a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#a1493f1fe9489073e7d615746d24fa2f0">OtaPalResetDevice_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="aota__platform__interface_8h_html_a1493f1fe9489073e7d615746d24fa2f0"><div class="ttname"><a href="ota__platform__interface_8h.html#a1493f1fe9489073e7d615746d24fa2f0">OtaPalResetDevice_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalResetDevice_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Reset the device.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:236</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#a424ab827af6f0a9a1173f1b91af29917">OTA PAL Set Platform Image State</a>: A function to set the state of the OTA update image. <div class="fragment"><div class="line"><a class="code" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#a424ab827af6f0a9a1173f1b91af29917">OtaPalSetPlatformImageState_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext,</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a> eState</div>
<div class="line">);</div>
<div class="ttc" id="agroup__ota__enum__types_html_gad4909faa8b9c8672e7f7bef1bc6b5b84"><div class="ttname"><a href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a></div><div class="ttdeci">OtaImageState_t</div><div class="ttdoc">OTA Image states.</div><div class="ttdef"><b>Definition:</b> ota_private.h:312</div></div>
<div class="ttc" id="aota__platform__interface_8h_html_a424ab827af6f0a9a1173f1b91af29917"><div class="ttname"><a href="ota__platform__interface_8h.html#a424ab827af6f0a9a1173f1b91af29917">OtaPalSetPlatformImageState_t</a></div><div class="ttdeci">OtaPalStatus_t(* OtaPalSetPlatformImageState_t)(OtaFileContext_t *const pFileContext, OtaImageState_t eState)</div><div class="ttdoc">Attempt to set the state of the OTA update image.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:259</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__platform__interface_8h.html#ab74a45be05c7a6fae3dc057394d07e3a">OTA PAL Get Platform Image State</a>: A function to get the state of the OTA update image. <div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="group__ota__enum__types.html#gab1f386c3bcc707ff32033659a0a4ddca">OtaPalImageState_t</a> ( * <a class="code" href="ota__platform__interface_8h.html#ab74a45be05c7a6fae3dc057394d07e3a">OtaPalGetPlatformImageState_t</a> )(</div>
<div class="line">    <a class="code" href="struct_ota_file_context__t.html">OtaFileContext_t</a> * <span class="keyword">const</span> pFileContext</div>
<div class="line">);</div>
<div class="ttc" id="agroup__ota__enum__types_html_gab1f386c3bcc707ff32033659a0a4ddca"><div class="ttname"><a href="group__ota__enum__types.html#gab1f386c3bcc707ff32033659a0a4ddca">OtaPalImageState_t</a></div><div class="ttdeci">OtaPalImageState_t</div><div class="ttdoc">OTA Platform Image State.</div><div class="ttdef"><b>Definition:</b> ota_private.h:329</div></div>
<div class="ttc" id="aota__platform__interface_8h_html_ab74a45be05c7a6fae3dc057394d07e3a"><div class="ttname"><a href="ota__platform__interface_8h.html#ab74a45be05c7a6fae3dc057394d07e3a">OtaPalGetPlatformImageState_t</a></div><div class="ttdeci">OtaPalImageState_t(* OtaPalGetPlatformImageState_t)(OtaFileContext_t *const pFileContext)</div><div class="ttdoc">Get the state of the OTA update image.</div><div class="ttdef"><b>Definition:</b> ota_platform_interface.h:285</div></div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="ota_porting_os"></a>
OTA OS Functional Interface requirements:</h1>
<p >The OTA library relies on several functionalities that are commonly provided by operating systems. This includes timers, events, and memory allocation. This interface must be implemented to provide these functionalities to the OTA library.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_os_functional_interface.html#ota_os_functional_interface_overview">OTA OS Functional Interface documentation</a> The OTA OS Functional Interface used by the OTA library is defined in <a class="el" href="ota__os__interface_8h.html">ota_os_interface.h</a>. A port must implement functions corresponding to the following function pointers:<ul>
<li><a class="el" href="ota__os__interface_8h.html#afa5686e7e0e73e5a3624d40eb0f22eac">OTA OS Functional Interface Initialize Event Mechanism</a>: A function to initialize the mechanism used to manage OTA events. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#afa5686e7e0e73e5a3624d40eb0f22eac">OtaInitEvent_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#a6821b4bd16ffc4216eca86683292ced0">OtaEventContext_t</a> * pEventCtx</div>
<div class="line">);</div>
<div class="ttc" id="agroup__ota__enum__types_html_gaececff6c0dd8ba4d884544571bd368e7"><div class="ttname"><a href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a></div><div class="ttdeci">OtaOsStatus_t</div><div class="ttdoc">The OTA OS interface return status.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:93</div></div>
<div class="ttc" id="aota__os__interface_8h_html_a6821b4bd16ffc4216eca86683292ced0"><div class="ttname"><a href="ota__os__interface_8h.html#a6821b4bd16ffc4216eca86683292ced0">OtaEventContext_t</a></div><div class="ttdeci">struct OtaEventContext OtaEventContext_t</div><div class="ttdoc">Type definition for Event Context.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:76</div></div>
<div class="ttc" id="aota__os__interface_8h_html_afa5686e7e0e73e5a3624d40eb0f22eac"><div class="ttname"><a href="ota__os__interface_8h.html#afa5686e7e0e73e5a3624d40eb0f22eac">OtaInitEvent_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaInitEvent_t)(OtaEventContext_t *pEventCtx)</div><div class="ttdoc">Initialize the OTA events.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:116</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#ace6738f520b1d4fa9d519c87f309b3cb">OTA OS Functional Interface Send Event</a>: A function to send an event to the OTA library event handler. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#ace6738f520b1d4fa9d519c87f309b3cb">OtaSendEvent_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#a6821b4bd16ffc4216eca86683292ced0">OtaEventContext_t</a> * pEventCtx,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span> * pEventMsg,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_ace6738f520b1d4fa9d519c87f309b3cb"><div class="ttname"><a href="ota__os__interface_8h.html#ace6738f520b1d4fa9d519c87f309b3cb">OtaSendEvent_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaSendEvent_t)(OtaEventContext_t *pEventCtx, const void *pEventMsg, unsigned int timeout)</div><div class="ttdoc">Sends an OTA event.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:132</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#a2da38685efe0f2f791869b85cd6f65d0">OTA OS Functional Interface Receive Event</a>: A function to receive the next event from the pending OTA events. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#a2da38685efe0f2f791869b85cd6f65d0">OtaReceiveEvent_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#a6821b4bd16ffc4216eca86683292ced0">OtaEventContext_t</a> * pEventCtx,</div>
<div class="line">    <span class="keywordtype">void</span> * pEventMsg,</div>
<div class="line">    uint32_t timeout</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_a2da38685efe0f2f791869b85cd6f65d0"><div class="ttname"><a href="ota__os__interface_8h.html#a2da38685efe0f2f791869b85cd6f65d0">OtaReceiveEvent_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaReceiveEvent_t)(OtaEventContext_t *pEventCtx, void *pEventMsg, uint32_t timeout)</div><div class="ttdoc">Receive an OTA event.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:150</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#ae4adb797e9209683a9ad221d3b4b1b73">OTA OS Functional Interface Deinitialize Event</a>: A function to deinitialize the OTA events mechanism and free any resources used. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#ae4adb797e9209683a9ad221d3b4b1b73">OtaDeinitEvent_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#a6821b4bd16ffc4216eca86683292ced0">OtaEventContext_t</a> * pEventCtx</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_ae4adb797e9209683a9ad221d3b4b1b73"><div class="ttname"><a href="ota__os__interface_8h.html#ae4adb797e9209683a9ad221d3b4b1b73">OtaDeinitEvent_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaDeinitEvent_t)(OtaEventContext_t *pEventCtx)</div><div class="ttdoc">Deinitialize the OTA Events mechanism.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:165</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#acad5454ec7c7c67361d3a1578a07739c">OTA OS Functional Interface Timer Callback</a>: A function that notifies the OTA library that a timer has triggered. This function must be called when one of the timers trigger. <div class="fragment"><div class="line">void ( * <a class="code" href="ota__os__interface_8h.html#acad5454ec7c7c67361d3a1578a07739c">OtaTimerCallback_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#afb4112b0dbe23a668f5b69e56ffea085">OtaTimerId_t</a> otaTimerId</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_acad5454ec7c7c67361d3a1578a07739c"><div class="ttname"><a href="ota__os__interface_8h.html#acad5454ec7c7c67361d3a1578a07739c">OtaTimerCallback_t</a></div><div class="ttdeci">void(* OtaTimerCallback_t)(OtaTimerId_t otaTimerId)</div><div class="ttdoc">Timer callback.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:177</div></div>
<div class="ttc" id="aota__os__interface_8h_html_afb4112b0dbe23a668f5b69e56ffea085"><div class="ttname"><a href="ota__os__interface_8h.html#afb4112b0dbe23a668f5b69e56ffea085">OtaTimerId_t</a></div><div class="ttdeci">OtaTimerId_t</div><div class="ttdoc">Enumeration for tracking multiple timers.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:82</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#a96169f3b2158c7abc0d9ad2fa6a1ecbd">OTA OS Functional Interface Start Timer</a>: A function to start a timer or reset it if it has already started. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#a96169f3b2158c7abc0d9ad2fa6a1ecbd">OtaStartTimer_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#afb4112b0dbe23a668f5b69e56ffea085">OtaTimerId_t</a> otaTimerId,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> pTimerName,</div>
<div class="line">    <span class="keyword">const</span> uint32_t timeout,</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#acad5454ec7c7c67361d3a1578a07739c">OtaTimerCallback_t</a> callback</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_a96169f3b2158c7abc0d9ad2fa6a1ecbd"><div class="ttname"><a href="ota__os__interface_8h.html#a96169f3b2158c7abc0d9ad2fa6a1ecbd">OtaStartTimer_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaStartTimer_t)(OtaTimerId_t otaTimerId, const char *const pTimerName, const uint32_t timeout, OtaTimerCallback_t callback)</div><div class="ttdoc">Start timer.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:195</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#aa56b962c5ff5ca9d5d09a41c8648eb9e">OTA OS Functional Interface Stop Timer</a>: A function to stop a timer. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#aa56b962c5ff5ca9d5d09a41c8648eb9e">OtaStopTimer_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#afb4112b0dbe23a668f5b69e56ffea085">OtaTimerId_t</a> otaTimerId</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_aa56b962c5ff5ca9d5d09a41c8648eb9e"><div class="ttname"><a href="ota__os__interface_8h.html#aa56b962c5ff5ca9d5d09a41c8648eb9e">OtaStopTimer_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaStopTimer_t)(OtaTimerId_t otaTimerId)</div><div class="ttdoc">Stop timer.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:210</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#acd5f9df58723bb05d34449962cb5ee48">OTA OS Functional Interface Delete Timer</a>: A function to delete a timer. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> ( * <a class="code" href="ota__os__interface_8h.html#acd5f9df58723bb05d34449962cb5ee48">OtaDeleteTimer_t</a> )(</div>
<div class="line">    <a class="code" href="ota__os__interface_8h.html#afb4112b0dbe23a668f5b69e56ffea085">OtaTimerId_t</a> otaTimerId</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_acd5f9df58723bb05d34449962cb5ee48"><div class="ttname"><a href="ota__os__interface_8h.html#acd5f9df58723bb05d34449962cb5ee48">OtaDeleteTimer_t</a></div><div class="ttdeci">OtaOsStatus_t(* OtaDeleteTimer_t)(OtaTimerId_t otaTimerId)</div><div class="ttdoc">Delete a timer.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:222</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#abb0c2255832a56e2427a54c150f3fb66">OTA OS Functional Interface Malloc</a>: A function to allocate the requested memory and return a pointer to it. <div class="fragment"><div class="line"><span class="keywordtype">void</span> * ( * OtaMalloc_t )(</div>
<div class="line">    <span class="keywordtype">size_t</span> size</div>
<div class="line">);</div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__os__interface_8h.html#a3fa30179be8407cd1d198eae7e589f6e">OTA OS Functional Interface Free</a>: A function to deallocate the memory previously allocated by a call to a allocation function of type <a class="el" href="ota__os__interface_8h.html#abb0c2255832a56e2427a54c150f3fb66" title="Allocate memory.">OtaMalloc_t</a>. <div class="fragment"><div class="line">void ( * <a class="code" href="ota__os__interface_8h.html#a3fa30179be8407cd1d198eae7e589f6e">OtaFree_t</a> )(</div>
<div class="line">    <span class="keywordtype">void</span> * ptr</div>
<div class="line">);</div>
<div class="ttc" id="aota__os__interface_8h_html_a3fa30179be8407cd1d198eae7e589f6e"><div class="ttname"><a href="ota__os__interface_8h.html#a3fa30179be8407cd1d198eae7e589f6e">OtaFree_t</a></div><div class="ttdeci">void(* OtaFree_t)(void *ptr)</div><div class="ttdoc">Free memory.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:249</div></div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<h1><a class="anchor" id="ota_porting_mqtt"></a>
OTA MQTT requirements:</h1>
<p >The OTA library relies on a MQTT library to manage control and data operations.</p>
<p >The OTA library needs to connect to AWS IoT using MQTT PUBLISH messages to receive notifications and file blocks. This is done by Subscribing to different notification topics.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_mqtt_interface.html">OTA MQTT documentation</a></dd></dl>
<p>The OTA MQTT API used by the OTA library is defined in <a class="el" href="ota__mqtt__interface_8h.html">ota_mqtt_interface.h</a>. A library must implement functions corresponding to the following function pointers:</p>
<ul>
<li><a class="el" href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OTA MQTT Subscribe</a>: A function that is used to subscribe to a given topic filter and QoS. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaf32d40000cc4b46c0144fd673d6f24fa">OtaMqttStatus_t</a> ( * <a class="code" href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OtaMqttSubscribe_t</a> ) (  <span class="keyword">const</span> <span class="keywordtype">char</span> * pTopicFilter,</div>
<div class="line">                                            uint16_t topicFilterLength,</div>
<div class="line">                                            uint8_t ucQoS );</div>
<div class="ttc" id="agroup__ota__enum__types_html_gaf32d40000cc4b46c0144fd673d6f24fa"><div class="ttname"><a href="group__ota__enum__types.html#gaf32d40000cc4b46c0144fd673d6f24fa">OtaMqttStatus_t</a></div><div class="ttdeci">OtaMqttStatus_t</div><div class="ttdoc">The OTA MQTT interface return status.</div><div class="ttdef"><b>Definition:</b> ota_mqtt_interface.h:82</div></div>
<div class="ttc" id="aota__mqtt__interface_8h_html_a9bf7833baeda3004bda9dadbd724422d"><div class="ttname"><a href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OtaMqttSubscribe_t</a></div><div class="ttdeci">OtaMqttStatus_t(* OtaMqttSubscribe_t)(const char *pTopicFilter, uint16_t topicFilterLength, uint8_t ucQoS)</div><div class="ttdoc">Subscribe to the Mqtt topics.</div><div class="ttdef"><b>Definition:</b> ota_mqtt_interface.h:105</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OTA MQTT Unsubscribe</a>: A function that is used to unsubscribe from a given topic filter using provided QoS. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaf32d40000cc4b46c0144fd673d6f24fa">OtaMqttStatus_t</a> ( * <a class="code" href="ota__mqtt__interface_8h.html#a15308f09763f630bb0d0c1ab085908a3">OtaMqttUnsubscribe_t</a> ) (<span class="keyword">const</span> <span class="keywordtype">char</span> * pTopicFilter,</div>
<div class="line">                                            uint16_t topicFilterLength,</div>
<div class="line">                                            uint8_t ucQoS );</div>
<div class="ttc" id="aota__mqtt__interface_8h_html_a15308f09763f630bb0d0c1ab085908a3"><div class="ttname"><a href="ota__mqtt__interface_8h.html#a15308f09763f630bb0d0c1ab085908a3">OtaMqttUnsubscribe_t</a></div><div class="ttdeci">OtaMqttStatus_t(* OtaMqttUnsubscribe_t)(const char *pTopicFilter, uint16_t topicFilterLength, uint8_t ucQoS)</div><div class="ttdoc">Unsubscribe to the Mqtt topics.</div><div class="ttdef"><b>Definition:</b> ota_mqtt_interface.h:124</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OTA MQTT Publish</a>: A function that is used to publish a message to a given topic filter and QoS. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#gaf32d40000cc4b46c0144fd673d6f24fa">OtaMqttStatus_t</a> ( * <a class="code" href="ota__mqtt__interface_8h.html#a9bf7833baeda3004bda9dadbd724422d">OtaMqttSubscribe_t</a> ) (  <span class="keyword">const</span> <span class="keywordtype">char</span> * pTopicFilter,</div>
<div class="line">                                            uint16_t topicFilterLength,</div>
<div class="line">                                            uint8_t ucQoS );</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="ota_porting_http"></a>
OTA HTTP requirements:</h1>
<p >The OTA library relies on a HTTP library to manage data operations.</p>
<p >To download a datablock over http, OTA library needs to connect to a pre-signed URL and request data blocks to download the update.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_mqtt_interface.html">OTA MQTT documentation</a></dd></dl>
<p>The OTA HTTP API used by the OTA library is defined in <a class="el" href="ota__http__interface_8h.html">ota_http_interface.h</a>.</p>
<p >A library must implement functions corresponding to the following function pointers:</p>
<ul>
<li><a class="el" href="ota__http__interface_8h.html#a16941a151ce9cdeab9138ac4cd9ea61c">OTA HTTP Initialize</a>: A function to initialize the http connection with a given Pre-signed URL. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a> ( * <a class="code" href="ota__http__interface_8h.html#a16941a151ce9cdeab9138ac4cd9ea61c">OtaHttpInit_t</a> ) ( <span class="keywordtype">char</span> * pUrl );</div>
<div class="ttc" id="agroup__ota__enum__types_html_ga5d1a57074f3242737a756c3feb64d4d4"><div class="ttname"><a href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a></div><div class="ttdeci">OtaHttpStatus_t</div><div class="ttdoc">The OTA HTTP interface return status.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:80</div></div>
<div class="ttc" id="aota__http__interface_8h_html_a16941a151ce9cdeab9138ac4cd9ea61c"><div class="ttname"><a href="ota__http__interface_8h.html#a16941a151ce9cdeab9138ac4cd9ea61c">OtaHttpInit_t</a></div><div class="ttdeci">OtaHttpStatus_t(* OtaHttpInit_t)(char *pUrl)</div><div class="ttdoc">Init OTA Http interface.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:97</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__http__interface_8h.html#a0973339ed000f27f66b74c9261fce608">OTA HTTP Request</a>: A function to request a data block in a given range. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a> ( * <a class="code" href="ota__http__interface_8h.html#a0973339ed000f27f66b74c9261fce608">OtaHttpRequest_t</a> )  (  uint32_t rangeStart,</div>
<div class="line">                                            uint32_t rangeEnd );</div>
<div class="ttc" id="aota__http__interface_8h_html_a0973339ed000f27f66b74c9261fce608"><div class="ttname"><a href="ota__http__interface_8h.html#a0973339ed000f27f66b74c9261fce608">OtaHttpRequest_t</a></div><div class="ttdeci">OtaHttpStatus_t(* OtaHttpRequest_t)(uint32_t rangeStart, uint32_t rangeEnd)</div><div class="ttdoc">Request file block over Http.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:111</div></div>
</div><!-- fragment --></li>
<li><a class="el" href="ota__http__interface_8h.html#a99b8a3a434250dd127013ea48ececbd1">OTA HTTP Deinitialize</a>: A function to deinitialize the http connection. <div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a> ( * <a class="code" href="ota__http__interface_8h.html#a99b8a3a434250dd127013ea48ececbd1">OtaHttpDeinit</a> )( void );</div>
<div class="ttc" id="aota__http__interface_8h_html_a99b8a3a434250dd127013ea48ececbd1"><div class="ttname"><a href="ota__http__interface_8h.html#a99b8a3a434250dd127013ea48ececbd1">OtaHttpDeinit</a></div><div class="ttdeci">OtaHttpStatus_t(* OtaHttpDeinit)(void)</div><div class="ttdoc">Deinit OTA Http interface.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:122</div></div>
</div><!-- fragment --> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
