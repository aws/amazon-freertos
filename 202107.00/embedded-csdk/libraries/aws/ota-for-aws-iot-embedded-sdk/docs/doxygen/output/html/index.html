<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: AWS IoT Over-the-air Update</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update<span id="projectnumber">&#160;v3.0.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">AWS IoT Over-the-air Update </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >AWS IoT Over-the-air Update Library.<br  />
<br  />
<a class="anchor" id="ota"></a></p>
<p >AWS IoT Over-the-air Update library enables you to manage the notification of a newly available update, download the update, and perform cryptographic verification of the firmware update. Using the Over-the-air (OTA) client library, you can logically separate firmware updates from the application running on your devices. The Over-the-air (OTA) client library can share a network connection with the application, saving memory in resource-constrained devices. In addition, the OTA library lets you define application-specific logic for testing, committing, or rolling back a firmware update. The library supports different application protocols like Message Queuing Telemetry Transport (MQTT) and Hypertext Transfer Protocol (HTTP) and provides various configuration options you can fine tune depending on network type and conditions.</p>
<p >The major functions that this library’s APIs provide are –</p>
<ul>
<li>Register for notifications or poll for new update requests that are available.</li>
<li>Receive, parse and validate the update request.</li>
<li>Download and verify the file according to the information in the update request.</li>
<li>Run a self-test before activating the received update to ensure the functional validity of the update.</li>
<li>Update the status of the device.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ota_functions.html">Functions</a> for more information.</dd></dl>
<p>AWS services can be used with this library to manage various cloud related topics such as sending firmware updates, monitoring large numbers of devices across multiple regions, reducing the blast radius of faulty deployments, and verifying the security of updates.</p>
<blockquote class="doxtable">
<p ><b>NOTE</b>: <b>Handling OTA and custom jobs in your application</b> <br  />
 If your application will process both OTA and custom types of jobs from AWS IoT, we recommend using the feature support for custom jobs in OTA library through the <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a8e314e0d83b5dcd572b08d9f205ab658" title="OTA event for parsing custom job document.">OtaJobEventParseCustomJob</a> event notification in the registered <a class="el" href="group__ota__callback__types.html#ga3bedd7e278f89d555a32a7efa8023a28" title="OTA update complete callback function typedef.">OtaAppCallback_t</a> callback. <br  />
 However, if your application chooses to use the <a href="https://github.com/aws/Jobs-for-AWS-IoT-embedded-sdk">AWS IoT Jobs library</a> (for handling custom jobs) and the OTA library (for handling OTA jobs) to communicate with AWS IoT through a shared MQTT connection, we suggest that you keep the application logic that uses these libraries within a single task/thread. As the OTA agent also makes calls to the AWS IoT Jobs service, keeping the use of libraries within the same thread context will avoid complexity of synchronizing communication with AWS IoT Jobs topics between multiple tasks/threads. However, if you choose to use different tasks/threads for calling these libraries, please be aware that the OTA library will subscribe and configurably, unsubscribe from AWS IoT Jobs topics, and also attempt to send status updates for incoming non-OTA jobs, if your application configures the OTA library to handle custom jobs. </p>
</blockquote>
<h1><a class="anchor" id="ota_dependencies"></a>
OTA Dependencies</h1>
<div class="dotgraph">
<img src="dot_inline_dotgraph_1.png" alt="dot_inline_dotgraph_1.png" border="0" usemap="#dot_inline_dotgraph_1.map"/>
<div class="caption">
OTA Dependencies</div>
</div>
<p >Currently, the OTA library has the following direct dependencies:</p><ul>
<li><a href="https://github.com/FreeRTOS/coreJSON">coreJSON</a>: To parse the JSON Job document received for the update.</li>
<li><a href="https://github.com/intel/tinycbor.git">tinyCBOR</a>: To decode the encoded data stream which contains the file blocks.</li>
</ul>
<h1><a class="anchor" id="ota_memory_requirements"></a>
Memory Requirements</h1>
<p >Memory requirements of the OTA library.</p>
<p ><table class="doxtable">
<tr>
<td colspan="3"><center><b>Code Size of AWS IoT OTA (example generated with GCC for ARM Cortex-M)</b></center>  </td></tr>
<tr>
<td><b>File</b> </td><td><b><center>With -O1 Optimization</center></b> </td><td><b><center>With -Os Optimization</center></b>  </td></tr>
<tr>
<td><a class="el" href="ota_8c.html" title="Implementation of the AWS IoT Over-The-Air Updates Client Library.">ota.c</a> </td><td><center>8.0K</center> </td><td><center>7.1K</center>  </td></tr>
<tr>
<td><a class="el" href="ota__interface_8c.html" title="Internal interface for setting the data and control planes.">ota_interface.c</a> </td><td><center>0.1K</center> </td><td><center>0.1K</center>  </td></tr>
<tr>
<td><a class="el" href="ota__base64_8c.html" title="Implements a Base64 decoding routine.">ota_base64.c</a> </td><td><center>0.6K</center> </td><td><center>0.6K</center>  </td></tr>
<tr>
<td><a class="el" href="ota__mqtt_8c.html" title="Routines for supporting over the air updates using MQTT.">ota_mqtt.c</a> </td><td><center>2.2K</center> </td><td><center>2.1K</center>  </td></tr>
<tr>
<td><a class="el" href="ota__cbor_8c.html" title="CBOR encode/decode routines for AWS IoT Over-the-Air updates.">ota_cbor.c</a> </td><td><center>0.8K</center> </td><td><center>0.6K</center>  </td></tr>
<tr>
<td><a class="el" href="ota__http_8c.html" title="Data transfer over HTTP routines.">ota_http.c</a> </td><td><center>0.3K</center> </td><td><center>0.3K</center>  </td></tr>
<tr>
<td><b>Total estimates</b> </td><td><b><center>12.0K</center></b> </td><td><b><center>10.8K</center></b>  </td></tr>
</table>
 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
