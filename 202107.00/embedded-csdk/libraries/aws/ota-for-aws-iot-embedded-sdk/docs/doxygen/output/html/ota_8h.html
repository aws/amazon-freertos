<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: ota.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update<span id="projectnumber">&#160;v3.0.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ota_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ota.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>OTA Agent Interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="ota__private_8h_source.html">ota_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ota__os__interface_8h_source.html">ota_os_interface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ota__mqtt__interface_8h_source.html">ota_mqtt_interface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ota__http__interface_8h_source.html">ota_http_interface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ota__platform__interface_8h_source.html">ota_platform_interface.h</a>&quot;</code><br />
</div>
<p><a href="ota_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ota_job_document__t.html">OtaJobDocument_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Job document.  <a href="struct_ota_job_document__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ota_interfaces__t.html">OtaInterfaces_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Interface for referencing different components.  <a href="struct_ota_interfaces__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ota_app_buffer__t.html">OtaAppBuffer_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Application Buffer size information.  <a href="struct_ota_app_buffer__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ota_agent_context__t.html">OtaAgentContext_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA agent is a singleton today. The structure keeps it nice and organized.  <a href="struct_ota_agent_context__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2714f6afa56c8777b5e570a390a69a58"><td class="memItemLeft" align="right" valign="top"><a id="a2714f6afa56c8777b5e570a390a69a58" name="a2714f6afa56c8777b5e570a390a69a58"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CONST_STRLEN</b>(s)&#160;&#160;&#160;( ( ( uint32_t ) sizeof( s ) ) - 1UL )</td></tr>
<tr class="memdesc:a2714f6afa56c8777b5e570a390a69a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates to the length of a constant string defined like 'static const char str[]= "xyz";. <br /></td></tr>
<tr class="separator:a2714f6afa56c8777b5e570a390a69a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8baee291088322fecd736ff0b03fb730"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a8baee291088322fecd736ff0b03fb730">OTA_FILE_SIG_KEY_STR_MAX_LENGTH</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:a8baee291088322fecd736ff0b03fb730"><td class="mdescLeft">&#160;</td><td class="mdescRight"> <a href="ota_8h.html#a8baee291088322fecd736ff0b03fb730">More...</a><br /></td></tr>
<tr class="separator:a8baee291088322fecd736ff0b03fb730"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga3bedd7e278f89d555a32a7efa8023a28"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__callback__types.html#ga3bedd7e278f89d555a32a7efa8023a28">OtaAppCallback_t</a>) (<a class="el" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> eEvent, const void *pData)</td></tr>
<tr class="memdesc:ga3bedd7e278f89d555a32a7efa8023a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA update complete callback function typedef.  <a href="group__ota__callback__types.html#ga3bedd7e278f89d555a32a7efa8023a28">More...</a><br /></td></tr>
<tr class="separator:ga3bedd7e278f89d555a32a7efa8023a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga7ab3c74dc057383c56c6cb9aa6bf0b2d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> { <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> = 0
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c1dd94b8875896b0a9dd383ba239774">OtaErrUninitialized</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da096a4af841716cf1ee881826d30b5406">OtaErrPanic</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dae8b91d2bcdd38b2c79bc67122681d5b9">OtaErrInvalidArg</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da2e43587b6c8d6abbdeed09232b8b9696">OtaErrAgentStopped</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da8de27454ca774732ca584803d1ab5888">OtaErrSignalEventFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da494a5dcbd62a41249e5ae1c177b442cb">OtaErrRequestJobFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da750fde72ae523e47fa838cb781dba75f">OtaErrInitFileTransferFailed</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da6d94255e998ae49d916648bb94b7da84">OtaErrRequestFileBlockFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daa7c1391bb361ec9857470b984cd31346">OtaErrCleanupControlFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dae40f5144d7881fb9d8a7f403c44a3133">OtaErrCleanupDataFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dad4008e18cf533002f2f194a491f859e1">OtaErrUpdateJobStatusFailed</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da525ecca44a574d8917760f869853a6ee">OtaErrJobParserError</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da06fb88bd9ddb49038227c63e15a83523">OtaErrInvalidDataProtocol</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da48fcd14a5554b8c0e447403c059bc786">OtaErrMomentumAbort</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0e99db7052f9c7007083ecc3fc08604c">OtaErrDowngradeNotAllowed</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dad8a8f3c4637db28866f53fbc91fe6427">OtaErrSameFirmwareVersion</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da38b24044cf02652dbb60efe38864e527">OtaErrImageStateMismatch</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da7dc1d1638189d537ce31ee3ce2d6d55e">OtaErrNoActiveJob</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dafbd1a370f69e3eb88eff25d4fe9facbd">OtaErrUserAbort</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2dad57de41d65cd3bd5de28228883e83084">OtaErrFailedToEncodeCbor</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da7fa31caf9e7a68df47ddbdb657f7f35d">OtaErrFailedToDecodeCbor</a>
, <a class="el" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678">OtaErrActivateFailed</a>
<br />
 }</td></tr>
<tr class="memdesc:ga7ab3c74dc057383c56c6cb9aa6bf0b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA API return status. OTA agent error codes are in the upper 8 bits of the 32 bit OTA error word, OtaErr_t.  <a href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">More...</a><br /></td></tr>
<tr class="separator:ga7ab3c74dc057383c56c6cb9aa6bf0b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1cb476a5e0ee81fa486f605e64419dcc"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a> { <br />
&#160;&#160;<b>OtaAgentStateNoTransition</b> = -1
, <b>OtaAgentStateInit</b> = 0
, <b>OtaAgentStateReady</b>
, <b>OtaAgentStateRequestingJob</b>
, <br />
&#160;&#160;<b>OtaAgentStateWaitingForJob</b>
, <b>OtaAgentStateCreatingFile</b>
, <b>OtaAgentStateRequestingFileBlock</b>
, <b>OtaAgentStateWaitingForFileBlock</b>
, <br />
&#160;&#160;<b>OtaAgentStateClosingFile</b>
, <b>OtaAgentStateSuspended</b>
, <b>OtaAgentStateShuttingDown</b>
, <b>OtaAgentStateStopped</b>
, <br />
&#160;&#160;<b>OtaAgentStateAll</b>
<br />
 }</td></tr>
<tr class="memdesc:ga1cb476a5e0ee81fa486f605e64419dcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Agent states.  <a href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">More...</a><br /></td></tr>
<tr class="separator:ga1cb476a5e0ee81fa486f605e64419dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8e370b46d0ae5d51879710d533a7314"><td class="memItemLeft" align="right" valign="top"><a id="gab8e370b46d0ae5d51879710d533a7314" name="gab8e370b46d0ae5d51879710d533a7314"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#gab8e370b46d0ae5d51879710d533a7314">OtaJobParseErr_t</a> { <br />
&#160;&#160;<b>OtaJobParseErrUnknown</b> = -1
, <b>OtaJobParseErrNone</b> = 0
, <b>OtaJobParseErrNullJob</b>
, <b>OtaJobParseErrUpdateCurrentJob</b>
, <br />
&#160;&#160;<b>OtaJobParseErrZeroFileSize</b>
, <b>OtaJobParseErrNonConformingJobDoc</b>
, <b>OtaJobParseErrBadModelInitParams</b>
, <b>OtaJobParseErrNoContextAvailable</b>
, <br />
&#160;&#160;<b>OtaJobParseErrNoActiveJobs</b>
<br />
 }</td></tr>
<tr class="memdesc:gab8e370b46d0ae5d51879710d533a7314"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA job document parser error codes. <br /></td></tr>
<tr class="separator:gab8e370b46d0ae5d51879710d533a7314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96a2e1f5cfad783897e805196eee39a7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> { <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280">OtaJobEventActivate</a> = 0
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a549e2b4c48aadc3c2f354647b8fd5728">OtaJobEventFail</a> = 1
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a04e2c9b7143d34f63905cd052bf9763b">OtaJobEventStartTest</a> = 2
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7abd5b42406265a448d9250890c0360c10">OtaJobEventProcessed</a> = 3
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a26b36eee239cace8df37d0a9e5874212">OtaJobEventSelfTestFailed</a> = 4
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a8e314e0d83b5dcd572b08d9f205ab658">OtaJobEventParseCustomJob</a> = 5
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a5cf84ad545b4e47c7bc2fe36b4b83fdd">OtaJobEventReceivedJob</a> = 6
, <a class="el" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a2ea5dedb25b574c14f379ae6b530dfff">OtaJobEventUpdateComplete</a> = 7
, <br />
&#160;&#160;<b>OtaLastJobEvent</b> = OtaJobEventStartTest
<br />
 }</td></tr>
<tr class="memdesc:ga96a2e1f5cfad783897e805196eee39a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Job callback events.  <a href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">More...</a><br /></td></tr>
<tr class="separator:ga96a2e1f5cfad783897e805196eee39a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf6d6b1d2bca4c54f58bd622ca6242d0"><td class="memItemLeft" align="right" valign="top"><a id="gabf6d6b1d2bca4c54f58bd622ca6242d0" name="gabf6d6b1d2bca4c54f58bd622ca6242d0"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#gabf6d6b1d2bca4c54f58bd622ca6242d0">OtaJobStatus_t</a> { <br />
&#160;&#160;<b>JobStatusInProgress</b> = 0
, <b>JobStatusFailed</b>
, <b>JobStatusSucceeded</b>
, <b>JobStatusRejected</b>
, <br />
&#160;&#160;<b>JobStatusFailedWithVal</b>
, <b>NumJobStatusMappings</b>
<br />
 }</td></tr>
<tr class="memdesc:gabf6d6b1d2bca4c54f58bd622ca6242d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives the status of the job operation. <br /></td></tr>
<tr class="separator:gabf6d6b1d2bca4c54f58bd622ca6242d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae5cc1dcc13fbcb32230f552f48b24f03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ae5cc1dcc13fbcb32230f552f48b24f03">OTA_Init</a> (<a class="el" href="struct_ota_app_buffer__t.html">OtaAppBuffer_t</a> *pOtaBuffer, <a class="el" href="struct_ota_interfaces__t.html">OtaInterfaces_t</a> *pOtaInterfaces, const uint8_t *pThingName, <a class="el" href="group__ota__callback__types.html#ga3bedd7e278f89d555a32a7efa8023a28">OtaAppCallback_t</a> OtaAppCallback)</td></tr>
<tr class="memdesc:ae5cc1dcc13fbcb32230f552f48b24f03"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA Agent initialization function.  <a href="ota_8h.html#ae5cc1dcc13fbcb32230f552f48b24f03">More...</a><br /></td></tr>
<tr class="separator:ae5cc1dcc13fbcb32230f552f48b24f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac779291eb93f4e0e6459816e60e13b09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ac779291eb93f4e0e6459816e60e13b09">OTA_Shutdown</a> (uint32_t ticksToWait, uint8_t unsubscribeFlag)</td></tr>
<tr class="memdesc:ac779291eb93f4e0e6459816e60e13b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal to the OTA Agent to shut down.  <a href="ota_8h.html#ac779291eb93f4e0e6459816e60e13b09">More...</a><br /></td></tr>
<tr class="separator:ac779291eb93f4e0e6459816e60e13b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db3f9cb417cb135cb0e68f5b5f2b11f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a> (void)</td></tr>
<tr class="memdesc:a6db3f9cb417cb135cb0e68f5b5f2b11f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current state of the OTA agent.  <a href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">More...</a><br /></td></tr>
<tr class="separator:a6db3f9cb417cb135cb0e68f5b5f2b11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5169ba09148e7f5668a90e776e712f8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a> (void)</td></tr>
<tr class="memdesc:a5169ba09148e7f5668a90e776e712f8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate the newest MCU image received via OTA.  <a href="ota_8h.html#a5169ba09148e7f5668a90e776e712f8b">More...</a><br /></td></tr>
<tr class="separator:a5169ba09148e7f5668a90e776e712f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68cdf65934474e1f3d2cd1046314bea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ab68cdf65934474e1f3d2cd1046314bea">OTA_SetImageState</a> (<a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a> state)</td></tr>
<tr class="memdesc:ab68cdf65934474e1f3d2cd1046314bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the state of the current MCU image.  <a href="ota_8h.html#ab68cdf65934474e1f3d2cd1046314bea">More...</a><br /></td></tr>
<tr class="separator:ab68cdf65934474e1f3d2cd1046314bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5b25f9a7eff3ded8cdf088c2011742"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a9c5b25f9a7eff3ded8cdf088c2011742">OTA_GetImageState</a> (void)</td></tr>
<tr class="memdesc:a9c5b25f9a7eff3ded8cdf088c2011742"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the currently running MCU image.  <a href="ota_8h.html#a9c5b25f9a7eff3ded8cdf088c2011742">More...</a><br /></td></tr>
<tr class="separator:a9c5b25f9a7eff3ded8cdf088c2011742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1178e8009eb05e6f55f6506b625c9fc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a1178e8009eb05e6f55f6506b625c9fc2">OTA_CheckForUpdate</a> (void)</td></tr>
<tr class="memdesc:a1178e8009eb05e6f55f6506b625c9fc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request for the next available OTA job from the job service.  <a href="ota_8h.html#a1178e8009eb05e6f55f6506b625c9fc2">More...</a><br /></td></tr>
<tr class="separator:a1178e8009eb05e6f55f6506b625c9fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b61ae5dd477e8b2e6c88ea0473c62b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a65b61ae5dd477e8b2e6c88ea0473c62b">OTA_Suspend</a> (void)</td></tr>
<tr class="memdesc:a65b61ae5dd477e8b2e6c88ea0473c62b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Suspend OTA agent operations .  <a href="ota_8h.html#a65b61ae5dd477e8b2e6c88ea0473c62b">More...</a><br /></td></tr>
<tr class="separator:a65b61ae5dd477e8b2e6c88ea0473c62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d40388ac87e4ac93288de37c98a138"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ae9d40388ac87e4ac93288de37c98a138">OTA_Resume</a> (void)</td></tr>
<tr class="memdesc:ae9d40388ac87e4ac93288de37c98a138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume OTA agent operations .  <a href="ota_8h.html#ae9d40388ac87e4ac93288de37c98a138">More...</a><br /></td></tr>
<tr class="separator:ae9d40388ac87e4ac93288de37c98a138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a0cfdc8694a606a1d736b2f54fb113"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ab3a0cfdc8694a606a1d736b2f54fb113">OTA_EventProcessingTask</a> (void *pUnused)</td></tr>
<tr class="memdesc:ab3a0cfdc8694a606a1d736b2f54fb113"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA agent event processing loop.  <a href="ota_8h.html#ab3a0cfdc8694a606a1d736b2f54fb113">More...</a><br /></td></tr>
<tr class="separator:ab3a0cfdc8694a606a1d736b2f54fb113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2564144f284db077b8947ba58a6a72bb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a2564144f284db077b8947ba58a6a72bb">OTA_SignalEvent</a> (const <a class="el" href="struct_ota_event_msg__t.html">OtaEventMsg_t</a> *const pEventMsg)</td></tr>
<tr class="memdesc:a2564144f284db077b8947ba58a6a72bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal event to the OTA Agent task.  <a href="ota_8h.html#a2564144f284db077b8947ba58a6a72bb">More...</a><br /></td></tr>
<tr class="separator:a2564144f284db077b8947ba58a6a72bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63182243ef3c18d5f36cd427b83a1a22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a63182243ef3c18d5f36cd427b83a1a22">OTA_GetStatistics</a> (<a class="el" href="struct_ota_agent_statistics__t.html">OtaAgentStatistics_t</a> *pStatistics)</td></tr>
<tr class="memdesc:a63182243ef3c18d5f36cd427b83a1a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the statistics of OTA message packets.  <a href="ota_8h.html#a63182243ef3c18d5f36cd427b83a1a22">More...</a><br /></td></tr>
<tr class="separator:a63182243ef3c18d5f36cd427b83a1a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f72911b8fe80f27bce42c3a36dca4b3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a6f72911b8fe80f27bce42c3a36dca4b3">OTA_Err_strerror</a> (<a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> err)</td></tr>
<tr class="memdesc:a6f72911b8fe80f27bce42c3a36dca4b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error code to string conversion for OTA errors.  <a href="ota_8h.html#a6f72911b8fe80f27bce42c3a36dca4b3">More...</a><br /></td></tr>
<tr class="separator:a6f72911b8fe80f27bce42c3a36dca4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d42efa1af7fa0ed92060a3b7e869648"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#a1d42efa1af7fa0ed92060a3b7e869648">OTA_JobParse_strerror</a> (<a class="el" href="group__ota__enum__types.html#gab8e370b46d0ae5d51879710d533a7314">OtaJobParseErr_t</a> err)</td></tr>
<tr class="memdesc:a1d42efa1af7fa0ed92060a3b7e869648"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error code to string conversion for OTA Job Parsing errors.  <a href="ota_8h.html#a1d42efa1af7fa0ed92060a3b7e869648">More...</a><br /></td></tr>
<tr class="separator:a1d42efa1af7fa0ed92060a3b7e869648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d9a19df9fdb8977762a45fe2848ba7"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ad9d9a19df9fdb8977762a45fe2848ba7">OTA_PalStatus_strerror</a> (<a class="el" href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">OtaPalMainStatus_t</a> status)</td></tr>
<tr class="memdesc:ad9d9a19df9fdb8977762a45fe2848ba7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status code to string conversion for OTA PAL status.  <a href="ota_8h.html#ad9d9a19df9fdb8977762a45fe2848ba7">More...</a><br /></td></tr>
<tr class="separator:ad9d9a19df9fdb8977762a45fe2848ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5997df93a33e5f1260e7a16655a5cca"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota_8h.html#ab5997df93a33e5f1260e7a16655a5cca">OTA_OsStatus_strerror</a> (<a class="el" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a> status)</td></tr>
<tr class="memdesc:ab5997df93a33e5f1260e7a16655a5cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status code to string conversion for OTA OS status.  <a href="ota_8h.html#ab5997df93a33e5f1260e7a16655a5cca">More...</a><br /></td></tr>
<tr class="separator:ab5997df93a33e5f1260e7a16655a5cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3b34dcda67d1fd023ced9257eb00cdcb"><td class="memItemLeft" align="right" valign="top"><a id="a3b34dcda67d1fd023ced9257eb00cdcb" name="a3b34dcda67d1fd023ced9257eb00cdcb"></a>
const char&#160;</td><td class="memItemRight" valign="bottom"><b>OTA_JsonFileSignatureKey</b> [<a class="el" href="ota_8h.html#a8baee291088322fecd736ff0b03fb730">OTA_FILE_SIG_KEY_STR_MAX_LENGTH</a>]</td></tr>
<tr class="memdesc:a3b34dcda67d1fd023ced9257eb00cdcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA signature algorithm string is specified by the PAL. <br /></td></tr>
<tr class="separator:a3b34dcda67d1fd023ced9257eb00cdcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >OTA Agent Interface. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8baee291088322fecd736ff0b03fb730" name="a8baee291088322fecd736ff0b03fb730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8baee291088322fecd736ff0b03fb730">&#9670;&nbsp;</a></span>OTA_FILE_SIG_KEY_STR_MAX_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_FILE_SIG_KEY_STR_MAX_LENGTH&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Maximum length of the file signature key. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae5cc1dcc13fbcb32230f552f48b24f03" name="ae5cc1dcc13fbcb32230f552f48b24f03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5cc1dcc13fbcb32230f552f48b24f03">&#9670;&nbsp;</a></span>OTA_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_ota_app_buffer__t.html">OtaAppBuffer_t</a> *&#160;</td>
          <td class="paramname"><em>pOtaBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_ota_interfaces__t.html">OtaInterfaces_t</a> *&#160;</td>
          <td class="paramname"><em>pOtaInterfaces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>pThingName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ota__callback__types.html#ga3bedd7e278f89d555a32a7efa8023a28">OtaAppCallback_t</a>&#160;</td>
          <td class="paramname"><em>OtaAppCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OTA Agent initialization function. </p>
<p >Initialize the OTA engine by starting the OTA Agent ("OTA Task") in the system. This function must be called with the connection client context before calling <a class="el" href="ota_8c.html#a1178e8009eb05e6f55f6506b625c9fc2">OTA_CheckForUpdate</a>. Only one OTA Agent may exist.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pOtaBuffer</td><td>Buffers used by the agent to store different params. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pOtaInterfaces</td><td>A pointer to the OS context. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pThingName</td><td>A pointer to a C string holding the Thing name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">OtaAppCallback</td><td>Static callback function for when an OTA job is complete. This function will have input of the state of the OTA image after download and during self-test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OtaErr_t The state of the OTA Agent upon return from the OtaState_t enum. If the agent was successfully initialized and ready to operate, the state will be OtaAgentStateReady. Otherwise, it will be one of the other OtaState_t enum values.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// Application callback when the OTA agent has completed the job</span></div>
<div class="line"><span class="comment">// or is in self test mode. For example see [demos](https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main/demos/ota)</span></div>
<div class="line"><span class="keywordtype">void</span> otaAppCallback( <a class="code" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> event,</div>
<div class="line">                     <span class="keyword">const</span> <span class="keywordtype">void</span> * pData );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Optional: User buffer to pass down to the OTA Agent. These</span></div>
<div class="line"><span class="comment">// buffers are assumed to be initialized previously, example:</span></div>
<div class="line"><span class="comment">// uint8_t updateFilePath[ OTA_MAX_FILE_PATH_SIZE ];</span></div>
<div class="line"><a class="code" href="struct_ota_app_buffer__t.html">OtaAppBuffer_t</a> otaBuffer =</div>
<div class="line">{</div>
<div class="line">    .<a class="code" href="struct_ota_app_buffer__t.html#a1e8e0cf1e6b1f699409f22a4c03cefd7">pUpdateFilePath</a>    = updateFilePath,</div>
<div class="line">    .updateFilePathsize = OTA_MAX_FILE_PATH_SIZE,</div>
<div class="line">    .pCertFilePath      = certFilePath,</div>
<div class="line">    .certFilePathSize   = OTA_MAX_FILE_PATH_SIZE,</div>
<div class="line">    .pDecodeMemory      = decodeMem,</div>
<div class="line">    .decodeMemorySize   = otaconfigFILE_BLOCK_SIZE,</div>
<div class="line">    .pFileBitmap        = bitmap,</div>
<div class="line">    .fileBitmapSize     = <a class="code" href="group__ota__constants.html#ga538d92a689f2b60c60bcef41e2739a1e">OTA_MAX_BLOCK_BITMAP_SIZE</a>,</div>
<div class="line">    .pUrl               = updateUrl,</div>
<div class="line">    .urlSize            = OTA_MAX_URL_SIZE,</div>
<div class="line">    .pAuthScheme        = authScheme,</div>
<div class="line">    .authSchemeSize     = OTA_MAX_AUTH_SCHEME_SIZE</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// OTA interface context required for library interface functions</span></div>
<div class="line"><span class="comment">// The functions set by these interfaces are assumed to be defined</span></div>
<div class="line"><span class="comment">// For more information see [demos](https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main/demos/ota)</span></div>
<div class="line"><a class="code" href="struct_ota_interfaces__t.html">OtaInterfaces_t</a> pOtaInterfaces =</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Initialize OTA library OS Interface.</span></div>
<div class="line">    .<a class="code" href="struct_ota_interfaces__t.html#a4309938e333d120eb646b1d24b5f413a">os</a>.<a class="code" href="struct_ota_o_s_interface__t.html#a56b4e42ad807bb4f407f61cca2964016">event</a>.<a class="code" href="struct_ota_event_interface__t.html#a70a33a62828b128cd625c1b13ff8550e">init</a> = Posix_OtaInitEvent;</div>
<div class="line">    .os.event.send = Posix_OtaSendEvent;</div>
<div class="line">    ...</div>
<div class="line">    <span class="comment">// Initialize the OTA library MQTT Interface.</span></div>
<div class="line">    .mqtt.subscribe = mqttSubscribe;</div>
<div class="line">    .mqtt.publish = mqttPublish;</div>
<div class="line">    .mqtt.unsubscribe = mqttUnsubscribe;</div>
<div class="line">    <span class="comment">// Initialize the OTA library HTTP Interface.</span></div>
<div class="line">    .http.init = httpInit;</div>
<div class="line">    .http.request = httpRequest;</div>
<div class="line">    .http.deinit = httpDeinit;</div>
<div class="line">    <span class="comment">// Initialize the OTA library PAL Interface.</span></div>
<div class="line">    .pal.getPlatformImageState = otaPal_GetPlatformImageState;</div>
<div class="line">    .pal.setPlatformImageState = otaPal_SetPlatformImageState;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// OTA library error status.</span></div>
<div class="line"><a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Unique client identifier</span></div>
<div class="line"><span class="keywordtype">char</span> * pClientIdentifier = <span class="stringliteral">&quot;uniqueClientID&quot;</span>;</div>
<div class="line"> </div>
<div class="line">otaErr = <a class="code" href="ota_8h.html#ae5cc1dcc13fbcb32230f552f48b24f03">OTA_Init</a>( &amp;otaBuffer,</div>
<div class="line">                   &amp;otaInterfaces,</div>
<div class="line">                   ( <span class="keyword">const</span> uint8_t * ) pClientIdentifier,</div>
<div class="line">                   otaAppCallback ) ) != <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">         <span class="keywordflow">if</span>( otaErr == <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Do something with the OTA agent.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__constants_html_ga538d92a689f2b60c60bcef41e2739a1e"><div class="ttname"><a href="group__ota__constants.html#ga538d92a689f2b60c60bcef41e2739a1e">OTA_MAX_BLOCK_BITMAP_SIZE</a></div><div class="ttdeci">#define OTA_MAX_BLOCK_BITMAP_SIZE</div><div class="ttdoc">Max allowed number of bytes to track all blocks of an OTA file. Adjust block size if more range is ne...</div><div class="ttdef"><b>Definition:</b> ota_private.h:58</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_ga7ab3c74dc057383c56c6cb9aa6bf0b2d"><div class="ttname"><a href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a></div><div class="ttdeci">OtaErr_t</div><div class="ttdoc">The OTA API return status. OTA agent error codes are in the upper 8 bits of the 32 bit OTA error word...</div><div class="ttdef"><b>Definition:</b> ota.h:73</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_ga96a2e1f5cfad783897e805196eee39a7"><div class="ttname"><a href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a></div><div class="ttdeci">OtaJobEvent_t</div><div class="ttdoc">OTA Job callback events.</div><div class="ttdef"><b>Definition:</b> ota.h:159</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02"><div class="ttname"><a href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a></div><div class="ttdeci">@ OtaErrNone</div><div class="ttdoc">No error occurred during the operation.</div><div class="ttdef"><b>Definition:</b> ota.h:74</div></div>
<div class="ttc" id="aota_8h_html_ae5cc1dcc13fbcb32230f552f48b24f03"><div class="ttname"><a href="ota_8h.html#ae5cc1dcc13fbcb32230f552f48b24f03">OTA_Init</a></div><div class="ttdeci">OtaErr_t OTA_Init(OtaAppBuffer_t *pOtaBuffer, OtaInterfaces_t *pOtaInterfaces, const uint8_t *pThingName, OtaAppCallback_t OtaAppCallback)</div><div class="ttdoc">OTA Agent initialization function.</div><div class="ttdef"><b>Definition:</b> ota.c:3063</div></div>
<div class="ttc" id="astruct_ota_app_buffer__t_html"><div class="ttname"><a href="struct_ota_app_buffer__t.html">OtaAppBuffer_t</a></div><div class="ttdoc">OTA Application Buffer size information.</div><div class="ttdef"><b>Definition:</b> ota.h:267</div></div>
<div class="ttc" id="astruct_ota_app_buffer__t_html_a1e8e0cf1e6b1f699409f22a4c03cefd7"><div class="ttname"><a href="struct_ota_app_buffer__t.html#a1e8e0cf1e6b1f699409f22a4c03cefd7">OtaAppBuffer_t::pUpdateFilePath</a></div><div class="ttdeci">uint8_t * pUpdateFilePath</div><div class="ttdoc">Path to store the files.</div><div class="ttdef"><b>Definition:</b> ota.h:268</div></div>
<div class="ttc" id="astruct_ota_event_interface__t_html_a70a33a62828b128cd625c1b13ff8550e"><div class="ttname"><a href="struct_ota_event_interface__t.html#a70a33a62828b128cd625c1b13ff8550e">OtaEventInterface_t::init</a></div><div class="ttdeci">OtaInitEvent_t init</div><div class="ttdoc">Initialization event.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:257</div></div>
<div class="ttc" id="astruct_ota_interfaces__t_html"><div class="ttname"><a href="struct_ota_interfaces__t.html">OtaInterfaces_t</a></div><div class="ttdoc">OTA Interface for referencing different components.</div><div class="ttdef"><b>Definition:</b> ota.h:253</div></div>
<div class="ttc" id="astruct_ota_interfaces__t_html_a4309938e333d120eb646b1d24b5f413a"><div class="ttname"><a href="struct_ota_interfaces__t.html#a4309938e333d120eb646b1d24b5f413a">OtaInterfaces_t::os</a></div><div class="ttdeci">OtaOSInterface_t os</div><div class="ttdoc">OS interface to store event, timers and memory operations.</div><div class="ttdef"><b>Definition:</b> ota.h:254</div></div>
<div class="ttc" id="astruct_ota_o_s_interface__t_html_a56b4e42ad807bb4f407f61cca2964016"><div class="ttname"><a href="struct_ota_o_s_interface__t.html#a56b4e42ad807bb4f407f61cca2964016">OtaOSInterface_t::event</a></div><div class="ttdeci">OtaEventInterface_t event</div><div class="ttdoc">OTA Event interface.</div><div class="ttdef"><b>Definition:</b> ota_os_interface.h:296</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ac779291eb93f4e0e6459816e60e13b09" name="ac779291eb93f4e0e6459816e60e13b09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac779291eb93f4e0e6459816e60e13b09">&#9670;&nbsp;</a></span>OTA_Shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a> OTA_Shutdown </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ticksToWait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>unsubscribeFlag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal to the OTA Agent to shut down. </p>
<p >Signals the OTA agent task to shut down. The OTA agent will unsubscribe from all MQTT job notification topics, stop in progress OTA jobs, if any, and clear all resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ticksToWait</td><td>The number of ticks to wait for the OTA Agent to complete the shutdown process. If this is set to zero, the function will return immediately without waiting. The actual state is returned to the caller. The agent does not sleep for this while but used for busy looping.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">unsubscribeFlag</td><td>Flag to indicate if unsubscribe operations should be performed from the job topics when shutdown is called. If the flag is 0 then unsubscribe operations are not called for job topics If application requires it to be unsubscribed from the job topics then flag must be set to 1 when calling OTA_Shutdown.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the OTA agent states from the OtaState_t enum. A normal shutdown will return OtaAgentStateNotReady. Otherwise, refer to the OtaState_t enum for details.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// ticksToWait used for busy looping until shutdown. Actual delay may depend on the agent priority,</span></div>
<div class="line"><span class="comment">// and platform.</span></div>
<div class="line">uint32_t ticksToWait = 100;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// If it is required that the unsubscribe operations are not</span></div>
<div class="line"><span class="comment">//performed while shutting down set this to 0.</span></div>
<div class="line">uint8_t unsubscribe = 1;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="ota_8h.html#ac779291eb93f4e0e6459816e60e13b09">OTA_Shutdown</a>(ticksToWait, unsubscribe);</div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">if( <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>() != OtaAgentStateStopped )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Optional: Disconnect MQTT and HTTP connections</span></div>
<div class="line">    <span class="comment">// required by the OTA agent and other tasks.</span></div>
<div class="line">}</div>
<div class="ttc" id="aota_8h_html_a6db3f9cb417cb135cb0e68f5b5f2b11f"><div class="ttname"><a href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a></div><div class="ttdeci">OtaState_t OTA_GetState(void)</div><div class="ttdoc">Get the current state of the OTA agent.</div><div class="ttdef"><b>Definition:</b> ota.c:3216</div></div>
<div class="ttc" id="aota_8h_html_ac779291eb93f4e0e6459816e60e13b09"><div class="ttname"><a href="ota_8h.html#ac779291eb93f4e0e6459816e60e13b09">OTA_Shutdown</a></div><div class="ttdeci">OtaState_t OTA_Shutdown(uint32_t ticksToWait, uint8_t unsubscribeFlag)</div><div class="ttdoc">Signal to the OTA Agent to shut down.</div><div class="ttdef"><b>Definition:</b> ota.c:3157</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6db3f9cb417cb135cb0e68f5b5f2b11f" name="a6db3f9cb417cb135cb0e68f5b5f2b11f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db3f9cb417cb135cb0e68f5b5f2b11f">&#9670;&nbsp;</a></span>OTA_GetState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a> OTA_GetState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current state of the OTA agent. </p>
<dl class="section return"><dt>Returns</dt><dd>The current state of the OTA agent.</dd></dl>
<p><b>Example</b> Check if OTA agent is in suspended state. </p><div class="fragment"><div class="line"><span class="comment">// OTA Agent state</span></div>
<div class="line"><a class="code" href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a> state = <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span>( state != OtaAgentStateSuspended )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Do something while the agent is back to</span></div>
<div class="line">    <span class="comment">// the desired state.</span></div>
<div class="line">    state = <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>();</div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__enum__types_html_ga1cb476a5e0ee81fa486f605e64419dcc"><div class="ttname"><a href="group__ota__enum__types.html#ga1cb476a5e0ee81fa486f605e64419dcc">OtaState_t</a></div><div class="ttdeci">OtaState_t</div><div class="ttdoc">OTA Agent states.</div><div class="ttdef"><b>Definition:</b> ota.h:108</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a5169ba09148e7f5668a90e776e712f8b" name="a5169ba09148e7f5668a90e776e712f8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5169ba09148e7f5668a90e776e712f8b">&#9670;&nbsp;</a></span>OTA_ActivateNewImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_ActivateNewImage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activate the newest MCU image received via OTA. </p>
<p >This function should reset the MCU and cause a reboot of the system to execute the newly updated firmware. It should be called by the user code sometime after the OtaJobEventActivate event is passed to the users application via the OTA Job Complete Callback mechanism. Refer to the <a class="el" href="ota_8c.html#ae5cc1dcc13fbcb32230f552f48b24f03">OTA_Init</a> function for more information about configuring the callback.</p>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> otaAppCallback( <a class="code" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> event,</div>
<div class="line">                            <span class="keyword">const</span> <span class="keywordtype">void</span> * pData )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line">    <span class="keywordflow">if</span>( event == <a class="code" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280">OtaJobEventActivate</a> )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Activate the new firmware image.</span></div>
<div class="line">        <span class="comment">// This calls the platform specific code required to</span></div>
<div class="line">        <span class="comment">// activate the received OTA update firmware.</span></div>
<div class="line">        otaErr = <a class="code" href="ota_8h.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a>();</div>
<div class="line">        <span class="keywordflow">if</span>( otaErr == <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678">OtaErrActivateFailed</a> )</div>
<div class="line">        {</div>
<div class="line">             <span class="comment">// Handle Image activation failure by requesting manual response, sending</span></div>
<div class="line">             <span class="comment">// error logs or retrying activation.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handle other events</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__enum__types_html_gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678"><div class="ttname"><a href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2daf5d3845d8b68e0c91cff60d2a38a2678">OtaErrActivateFailed</a></div><div class="ttdeci">@ OtaErrActivateFailed</div><div class="ttdoc">Failed to activate the new image.</div><div class="ttdef"><b>Definition:</b> ota.h:96</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280"><div class="ttname"><a href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7aaf02fd22119771d2980c7af439fa3280">OtaJobEventActivate</a></div><div class="ttdeci">@ OtaJobEventActivate</div><div class="ttdoc">OTA receive is authenticated and ready to activate.</div><div class="ttdef"><b>Definition:</b> ota.h:160</div></div>
<div class="ttc" id="aota_8h_html_a5169ba09148e7f5668a90e776e712f8b"><div class="ttname"><a href="ota_8h.html#a5169ba09148e7f5668a90e776e712f8b">OTA_ActivateNewImage</a></div><div class="ttdeci">OtaErr_t OTA_ActivateNewImage(void)</div><div class="ttdoc">Activate the newest MCU image received via OTA.</div><div class="ttdef"><b>Definition:</b> ota.c:3265</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ab68cdf65934474e1f3d2cd1046314bea" name="ab68cdf65934474e1f3d2cd1046314bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab68cdf65934474e1f3d2cd1046314bea">&#9670;&nbsp;</a></span>OTA_SetImageState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_SetImageState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the state of the current MCU image. </p>
<p >The states are OtaImageStateTesting, OtaImageStateAccepted, OtaImageStateAborted or OtaImageStateRejected; see OtaImageState_t documentation. This will update the status of the current image and publish to the active job status topic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>The state to set of the OTA image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above.</dd></dl>
<p><b>Example</b> Set image state to reflect new image is accepted in application callback.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> otaAppCallback( <a class="code" href="group__ota__enum__types.html#ga96a2e1f5cfad783897e805196eee39a7">OtaJobEvent_t</a> event,</div>
<div class="line">                            <span class="keyword">const</span> <span class="keywordtype">void</span> * pData )</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( event == <a class="code" href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a04e2c9b7143d34f63905cd052bf9763b">OtaJobEventStartTest</a> )</div>
<div class="line">    {</div>
<div class="line">        err = <a class="code" href="ota_8h.html#ab68cdf65934474e1f3d2cd1046314bea">OTA_SetImageState</a>( <a class="code" href="group__ota__enum__types.html#ggad4909faa8b9c8672e7f7bef1bc6b5b84ad9ee33052c9c36593243b1bd0329a396">OtaImageStateAccepted</a> );</div>
<div class="line">        <span class="keywordflow">if</span>( err != <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Handle failure or retry setting the image state.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handle other events</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__enum__types_html_gga96a2e1f5cfad783897e805196eee39a7a04e2c9b7143d34f63905cd052bf9763b"><div class="ttname"><a href="group__ota__enum__types.html#gga96a2e1f5cfad783897e805196eee39a7a04e2c9b7143d34f63905cd052bf9763b">OtaJobEventStartTest</a></div><div class="ttdeci">@ OtaJobEventStartTest</div><div class="ttdoc">OTA job is now in self test, perform user tests.</div><div class="ttdef"><b>Definition:</b> ota.h:162</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_ggad4909faa8b9c8672e7f7bef1bc6b5b84ad9ee33052c9c36593243b1bd0329a396"><div class="ttname"><a href="group__ota__enum__types.html#ggad4909faa8b9c8672e7f7bef1bc6b5b84ad9ee33052c9c36593243b1bd0329a396">OtaImageStateAccepted</a></div><div class="ttdeci">@ OtaImageStateAccepted</div><div class="ttdoc">The state of the OTA MCU Image post successful download and successful self_test.</div><div class="ttdef"><b>Definition:</b> ota_private.h:315</div></div>
<div class="ttc" id="aota_8h_html_ab68cdf65934474e1f3d2cd1046314bea"><div class="ttname"><a href="ota_8h.html#ab68cdf65934474e1f3d2cd1046314bea">OTA_SetImageState</a></div><div class="ttdeci">OtaErr_t OTA_SetImageState(OtaImageState_t state)</div><div class="ttdoc">Set the state of the current MCU image.</div><div class="ttdef"><b>Definition:</b> ota.c:3301</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a9c5b25f9a7eff3ded8cdf088c2011742" name="a9c5b25f9a7eff3ded8cdf088c2011742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5b25f9a7eff3ded8cdf088c2011742">&#9670;&nbsp;</a></span>OTA_GetImageState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a> OTA_GetImageState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of the currently running MCU image. </p>
<p >The states are OtaImageStateTesting, OtaImageStateAccepted, OtaImageStateAborted or OtaImageStateRejected; see OtaImageState_t documentation.</p>
<dl class="section return"><dt>Returns</dt><dd>The state of the current context's OTA image. </dd></dl>

</div>
</div>
<a id="a1178e8009eb05e6f55f6506b625c9fc2" name="a1178e8009eb05e6f55f6506b625c9fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1178e8009eb05e6f55f6506b625c9fc2">&#9670;&nbsp;</a></span>OTA_CheckForUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_CheckForUpdate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request for the next available OTA job from the job service. </p>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above. </dd></dl>

</div>
</div>
<a id="a65b61ae5dd477e8b2e6c88ea0473c62b" name="a65b61ae5dd477e8b2e6c88ea0473c62b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b61ae5dd477e8b2e6c88ea0473c62b">&#9670;&nbsp;</a></span>OTA_Suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_Suspend </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Suspend OTA agent operations . </p>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above.</dd></dl>
<p><b>Example</b> Suspend the OTA agent when a network error occurs. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> handleNetworkErrors()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line">    int16_t suspendTimeout = 5000U;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Handle disconnects and other network reset operations</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Suspend OTA operations.</span></div>
<div class="line">    otaErr = <a class="code" href="ota_8h.html#a65b61ae5dd477e8b2e6c88ea0473c62b">OTA_Suspend</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( otaErr != <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Suspend may fail due to Event queue failure,</span></div>
<div class="line">        <span class="comment">// or if the agent has shut down, handle the failure by</span></div>
<div class="line">        <span class="comment">// sending logs or retrying OTA_Suspend().</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">while</span>( ( ( <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>() != OtaAgentStateSuspended )</div>
<div class="line">                &amp;&amp; ( suspendTimeout &gt; 0 ) )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Wait for OTA Library state to suspend</span></div>
<div class="line">            portSleep( 1000U );</div>
<div class="line">            suspendTimeout -= 1000U;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>() != OtaAgentStateSuspended )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Handle Suspend failure or Retry OTA_Suspend().</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aota_8h_html_a65b61ae5dd477e8b2e6c88ea0473c62b"><div class="ttname"><a href="ota_8h.html#a65b61ae5dd477e8b2e6c88ea0473c62b">OTA_Suspend</a></div><div class="ttdeci">OtaErr_t OTA_Suspend(void)</div><div class="ttdoc">Suspend OTA agent operations .</div><div class="ttdef"><b>Definition:</b> ota.c:3366</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ae9d40388ac87e4ac93288de37c98a138" name="ae9d40388ac87e4ac93288de37c98a138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9d40388ac87e4ac93288de37c98a138">&#9670;&nbsp;</a></span>OTA_Resume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_Resume </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resume OTA agent operations . </p>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if successful, otherwise an error code prefixed with 'OtaErr' from the list above.</dd></dl>
<p><b>Example</b> Resume the OTA agent after the network errors are resolved. </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> handleReconnect()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// OTA event message used for sending event to OTA Agent.</span></div>
<div class="line">    <a class="code" href="struct_ota_event_msg__t.html">OtaEventMsg_t</a> eventMsg = { 0 };</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c1dd94b8875896b0a9dd383ba239774">OtaErrUninitialized</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> returnStatus = establishConnection();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( returnStatus == EXIT_SUCCESS )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Check if OTA process was suspended and resume if required.</span></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="ota_8h.html#a6db3f9cb417cb135cb0e68f5b5f2b11f">OTA_GetState</a>() == OtaAgentStateSuspended )</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Resume OTA operations.</span></div>
<div class="line">            otaErr = <a class="code" href="ota_8h.html#ae9d40388ac87e4ac93288de37c98a138">OTA_Resume</a>();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Send start event to OTA Agent.</span></div>
<div class="line">            eventMsg.<a class="code" href="struct_ota_event_msg__t.html#a065656c53757f9f78f5ddfc5b25e77f8">eventId</a> = <a class="code" href="group__ota__enum__types.html#gga2c42c25235304ca5c3e3a6abef78be4eac965db79301fabd43971f2ad050d782c">OtaAgentEventStart</a>;</div>
<div class="line">            <a class="code" href="ota_8h.html#a2564144f284db077b8947ba58a6a72bb">OTA_SignalEvent</a>( &amp;eventMsg );</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>( otaErr != <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">            returnStatus = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> returnStatus;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__enum__types_html_gga2c42c25235304ca5c3e3a6abef78be4eac965db79301fabd43971f2ad050d782c"><div class="ttname"><a href="group__ota__enum__types.html#gga2c42c25235304ca5c3e3a6abef78be4eac965db79301fabd43971f2ad050d782c">OtaAgentEventStart</a></div><div class="ttdeci">@ OtaAgentEventStart</div><div class="ttdoc">Start the OTA state machine.</div><div class="ttdef"><b>Definition:</b> ota_private.h:344</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c1dd94b8875896b0a9dd383ba239774"><div class="ttname"><a href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c1dd94b8875896b0a9dd383ba239774">OtaErrUninitialized</a></div><div class="ttdeci">@ OtaErrUninitialized</div><div class="ttdoc">The error code has not yet been set by a logic path.</div><div class="ttdef"><b>Definition:</b> ota.h:75</div></div>
<div class="ttc" id="aota_8h_html_a2564144f284db077b8947ba58a6a72bb"><div class="ttname"><a href="ota_8h.html#a2564144f284db077b8947ba58a6a72bb">OTA_SignalEvent</a></div><div class="ttdeci">bool OTA_SignalEvent(const OtaEventMsg_t *const pEventMsg)</div><div class="ttdoc">Signal event to the OTA Agent task.</div><div class="ttdef"><b>Definition:</b> ota.c:2922</div></div>
<div class="ttc" id="aota_8h_html_ae9d40388ac87e4ac93288de37c98a138"><div class="ttname"><a href="ota_8h.html#ae9d40388ac87e4ac93288de37c98a138">OTA_Resume</a></div><div class="ttdeci">OtaErr_t OTA_Resume(void)</div><div class="ttdoc">Resume OTA agent operations .</div><div class="ttdef"><b>Definition:</b> ota.c:3399</div></div>
<div class="ttc" id="astruct_ota_event_msg__t_html"><div class="ttname"><a href="struct_ota_event_msg__t.html">OtaEventMsg_t</a></div><div class="ttdoc">Stores information about the event message.</div><div class="ttdef"><b>Definition:</b> ota_private.h:432</div></div>
<div class="ttc" id="astruct_ota_event_msg__t_html_a065656c53757f9f78f5ddfc5b25e77f8"><div class="ttname"><a href="struct_ota_event_msg__t.html#a065656c53757f9f78f5ddfc5b25e77f8">OtaEventMsg_t::eventId</a></div><div class="ttdeci">OtaEvent_t eventId</div><div class="ttdef"><b>Definition:</b> ota_private.h:434</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ab3a0cfdc8694a606a1d736b2f54fb113" name="ab3a0cfdc8694a606a1d736b2f54fb113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a0cfdc8694a606a1d736b2f54fb113">&#9670;&nbsp;</a></span>OTA_EventProcessingTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OTA_EventProcessingTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pUnused</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OTA agent event processing loop. </p>
<p >This is the main event loop to handle events for OTA update and needs to be called by the application task. This loop will continue to handle and execute events received for OTA Update until this tasks is terminated by the application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pUnused</td><td>Can be used to pass down functionality to the agent task, Unused for now. This can be a function pointer that executes as the first routine when the event loop starts.</td></tr>
  </table>
  </dd>
</dl>
<p>For a Posix based reference of creating a thread with this task, please see the <a href="https://github.com/aws/aws-iot-device-sdk-embedded-C/tree/main/demos/ota">demos in AWS IoT Embedded C SDK repository</a>. </p>

</div>
</div>
<a id="a2564144f284db077b8947ba58a6a72bb" name="a2564144f284db077b8947ba58a6a72bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2564144f284db077b8947ba58a6a72bb">&#9670;&nbsp;</a></span>OTA_SignalEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OTA_SignalEvent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_ota_event_msg__t.html">OtaEventMsg_t</a> *const&#160;</td>
          <td class="paramname"><em>pEventMsg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal event to the OTA Agent task. </p>
<p >This function adds the event to the back of event queue and used by internal OTA modules to signal agent task.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pEventMsg</td><td>Event to be added to the queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true If operation is successful, false If the event can not be added</dd></dl>
<p><b>Example</b> Signal OTA agent that a new file block has been received over the http connection. </p><div class="fragment"><div class="line"><a class="code" href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a> handleDataFromHTTPService( <span class="keyword">const</span> HTTPResponse_t * pResponse )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Assume otaEventBufferGet is a user defined, thread-safe function</span></div>
<div class="line">    <span class="comment">// that gets an available buffer from the pool of OTA buffers.</span></div>
<div class="line">    <a class="code" href="struct_ota_event_data__t.html">OtaEventData_t</a> * pData = otaEventBufferGet();</div>
<div class="line">    <a class="code" href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a> returnValue = <a class="code" href="group__ota__enum__types.html#gga5d1a57074f3242737a756c3feb64d4d4a49f043cf87a8fefc6d7f383acc730dd5">OtaHttpRequestFailed</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Validate pResponse for correct data.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( pData != NULL )</div>
<div class="line">    {</div>
<div class="line">        memcpy( pData-&gt;<a class="code" href="struct_ota_event_data__t.html#a2d6745b10e3e5ad0dac2ebb89a56f252">data</a>, pResponse-&gt;pBody, pResponse-&gt;bodyLen );</div>
<div class="line">        pData-&gt;<a class="code" href="struct_ota_event_data__t.html#a4f1b1b9d316c41d97fd9169dc6ff076d">dataLength</a> = pResponse-&gt;bodyLen;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Send job document received event.</span></div>
<div class="line">        eventMsg.eventId = <a class="code" href="group__ota__enum__types.html#gga2c42c25235304ca5c3e3a6abef78be4ea79ef0fd4aaffd57dd5af6ef646a70f11">OtaAgentEventReceivedFileBlock</a>;</div>
<div class="line">        eventMsg.pEventData = pData;</div>
<div class="line">        result = <a class="code" href="ota_8h.html#a2564144f284db077b8947ba58a6a72bb">OTA_SignalEvent</a>( &amp;eventMsg );</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span>( result )</div>
<div class="line">        {</div>
<div class="line">            returnValue = <a class="code" href="group__ota__enum__types.html#gga5d1a57074f3242737a756c3feb64d4d4ac8837a3a448f8dc701d838974a2a6535">OtaHttpSuccess</a>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> returnValue;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__ota__enum__types_html_ga5d1a57074f3242737a756c3feb64d4d4"><div class="ttname"><a href="group__ota__enum__types.html#ga5d1a57074f3242737a756c3feb64d4d4">OtaHttpStatus_t</a></div><div class="ttdeci">OtaHttpStatus_t</div><div class="ttdoc">The OTA HTTP interface return status.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:80</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga2c42c25235304ca5c3e3a6abef78be4ea79ef0fd4aaffd57dd5af6ef646a70f11"><div class="ttname"><a href="group__ota__enum__types.html#gga2c42c25235304ca5c3e3a6abef78be4ea79ef0fd4aaffd57dd5af6ef646a70f11">OtaAgentEventReceivedFileBlock</a></div><div class="ttdeci">@ OtaAgentEventReceivedFileBlock</div><div class="ttdoc">Event to trigger when file block is received.</div><div class="ttdef"><b>Definition:</b> ota_private.h:350</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga5d1a57074f3242737a756c3feb64d4d4a49f043cf87a8fefc6d7f383acc730dd5"><div class="ttname"><a href="group__ota__enum__types.html#gga5d1a57074f3242737a756c3feb64d4d4a49f043cf87a8fefc6d7f383acc730dd5">OtaHttpRequestFailed</a></div><div class="ttdeci">@ OtaHttpRequestFailed</div><div class="ttdoc">Error sending the HTTP request.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:84</div></div>
<div class="ttc" id="agroup__ota__enum__types_html_gga5d1a57074f3242737a756c3feb64d4d4ac8837a3a448f8dc701d838974a2a6535"><div class="ttname"><a href="group__ota__enum__types.html#gga5d1a57074f3242737a756c3feb64d4d4ac8837a3a448f8dc701d838974a2a6535">OtaHttpSuccess</a></div><div class="ttdeci">@ OtaHttpSuccess</div><div class="ttdoc">OTA HTTP interface success.</div><div class="ttdef"><b>Definition:</b> ota_http_interface.h:81</div></div>
<div class="ttc" id="astruct_ota_event_data__t_html"><div class="ttname"><a href="struct_ota_event_data__t.html">OtaEventData_t</a></div><div class="ttdoc">The OTA Agent event and data structures.</div><div class="ttdef"><b>Definition:</b> ota_private.h:420</div></div>
<div class="ttc" id="astruct_ota_event_data__t_html_a2d6745b10e3e5ad0dac2ebb89a56f252"><div class="ttname"><a href="struct_ota_event_data__t.html#a2d6745b10e3e5ad0dac2ebb89a56f252">OtaEventData_t::data</a></div><div class="ttdeci">uint8_t data[OTA_DATA_BLOCK_SIZE]</div><div class="ttdef"><b>Definition:</b> ota_private.h:421</div></div>
<div class="ttc" id="astruct_ota_event_data__t_html_a4f1b1b9d316c41d97fd9169dc6ff076d"><div class="ttname"><a href="struct_ota_event_data__t.html#a4f1b1b9d316c41d97fd9169dc6ff076d">OtaEventData_t::dataLength</a></div><div class="ttdeci">uint32_t dataLength</div><div class="ttdef"><b>Definition:</b> ota_private.h:422</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a63182243ef3c18d5f36cd427b83a1a22" name="a63182243ef3c18d5f36cd427b83a1a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63182243ef3c18d5f36cd427b83a1a22">&#9670;&nbsp;</a></span>OTA_GetStatistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> OTA_GetStatistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_ota_agent_statistics__t.html">OtaAgentStatistics_t</a> *&#160;</td>
          <td class="paramname"><em>pStatistics</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the statistics of OTA message packets. </p>
<p >Packet statistics are: </p><ul>
<li>
Received: The number of OTA packets that have been received but not necessarily queued for processing by the OTA agent. </li>
<li>
Queued: The number of OTA packets that have been queued for processing. This implies there was a free message queue entry so it can be passed to the agent for processing. </li>
<li>
Processed: The number of OTA packets that have actually been processed. </li>
<li>
Dropped: The number of OTA packets that have been dropped because of either no queue or at shutdown cleanup. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Calling <a class="el" href="ota_8c.html#ae5cc1dcc13fbcb32230f552f48b24f03">OTA_Init</a> will reset this statistic.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>OtaErrNone if the statistics can be received successfully.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// OTA library packet statistics per job.</span></div>
<div class="line"><a class="code" href="struct_ota_agent_statistics__t.html">OtaAgentStatistics_t</a> otaStatistics = { 0 };</div>
<div class="line"><a class="code" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a> otaErr = <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get the current statistics from the agent.</span></div>
<div class="line">otaErr = <a class="code" href="ota_8h.html#a63182243ef3c18d5f36cd427b83a1a22">OTA_GetStatistics</a>( &amp;otaStatistics );</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( otaErr != <a class="code" href="group__ota__enum__types.html#gga7ab3c74dc057383c56c6cb9aa6bf0b2da0c644255eee375cb8e6bd9def0772e02">OtaErrNone</a> )</div>
<div class="line">{</div>
<div class="line">    printf( <span class="stringliteral">&quot; Received: %u   Queued: %u   Processed: %u   Dropped: %u&quot;</span>,</div>
<div class="line">            otaStatistics.<a class="code" href="struct_ota_agent_statistics__t.html#a43f7d9b2c6ead8213c6de51d6e65e980">otaPacketsReceived</a>,</div>
<div class="line">            otaStatistics.<a class="code" href="struct_ota_agent_statistics__t.html#ab693dddf7707daf3315bc4c23bb4e29a">otaPacketsQueued</a>,</div>
<div class="line">            otaStatistics.<a class="code" href="struct_ota_agent_statistics__t.html#adbcf157f4d998bea3bf3c508e37c8437">otaPacketsProcessed</a>,</div>
<div class="line">            otaStatistics.<a class="code" href="struct_ota_agent_statistics__t.html#ae644353e00d4a3770bd6400181c5785e">otaPacketsDropped</a> );</div>
<div class="line">}</div>
<div class="ttc" id="aota_8h_html_a63182243ef3c18d5f36cd427b83a1a22"><div class="ttname"><a href="ota_8h.html#a63182243ef3c18d5f36cd427b83a1a22">OTA_GetStatistics</a></div><div class="ttdeci">OtaErr_t OTA_GetStatistics(OtaAgentStatistics_t *pStatistics)</div><div class="ttdoc">Get the statistics of OTA message packets.</div><div class="ttdef"><b>Definition:</b> ota.c:3224</div></div>
<div class="ttc" id="astruct_ota_agent_statistics__t_html"><div class="ttname"><a href="struct_ota_agent_statistics__t.html">OtaAgentStatistics_t</a></div><div class="ttdoc">This is the OTA statistics structure to hold useful info.</div><div class="ttdef"><b>Definition:</b> ota_private.h:289</div></div>
<div class="ttc" id="astruct_ota_agent_statistics__t_html_a43f7d9b2c6ead8213c6de51d6e65e980"><div class="ttname"><a href="struct_ota_agent_statistics__t.html#a43f7d9b2c6ead8213c6de51d6e65e980">OtaAgentStatistics_t::otaPacketsReceived</a></div><div class="ttdeci">uint32_t otaPacketsReceived</div><div class="ttdef"><b>Definition:</b> ota_private.h:290</div></div>
<div class="ttc" id="astruct_ota_agent_statistics__t_html_ab693dddf7707daf3315bc4c23bb4e29a"><div class="ttname"><a href="struct_ota_agent_statistics__t.html#ab693dddf7707daf3315bc4c23bb4e29a">OtaAgentStatistics_t::otaPacketsQueued</a></div><div class="ttdeci">uint32_t otaPacketsQueued</div><div class="ttdef"><b>Definition:</b> ota_private.h:291</div></div>
<div class="ttc" id="astruct_ota_agent_statistics__t_html_adbcf157f4d998bea3bf3c508e37c8437"><div class="ttname"><a href="struct_ota_agent_statistics__t.html#adbcf157f4d998bea3bf3c508e37c8437">OtaAgentStatistics_t::otaPacketsProcessed</a></div><div class="ttdeci">uint32_t otaPacketsProcessed</div><div class="ttdef"><b>Definition:</b> ota_private.h:292</div></div>
<div class="ttc" id="astruct_ota_agent_statistics__t_html_ae644353e00d4a3770bd6400181c5785e"><div class="ttname"><a href="struct_ota_agent_statistics__t.html#ae644353e00d4a3770bd6400181c5785e">OtaAgentStatistics_t::otaPacketsDropped</a></div><div class="ttdeci">uint32_t otaPacketsDropped</div><div class="ttdef"><b>Definition:</b> ota_private.h:293</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a6f72911b8fe80f27bce42c3a36dca4b3" name="a6f72911b8fe80f27bce42c3a36dca4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f72911b8fe80f27bce42c3a36dca4b3">&#9670;&nbsp;</a></span>OTA_Err_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* OTA_Err_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ota__enum__types.html#ga7ab3c74dc057383c56c6cb9aa6bf0b2d">OtaErr_t</a>&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error code to string conversion for OTA errors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">err</td><td>The error to convert to a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the error. </dd></dl>

</div>
</div>
<a id="a1d42efa1af7fa0ed92060a3b7e869648" name="a1d42efa1af7fa0ed92060a3b7e869648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d42efa1af7fa0ed92060a3b7e869648">&#9670;&nbsp;</a></span>OTA_JobParse_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* OTA_JobParse_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ota__enum__types.html#gab8e370b46d0ae5d51879710d533a7314">OtaJobParseErr_t</a>&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error code to string conversion for OTA Job Parsing errors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">err</td><td>The error to convert to a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the error. </dd></dl>

</div>
</div>
<a id="ad9d9a19df9fdb8977762a45fe2848ba7" name="ad9d9a19df9fdb8977762a45fe2848ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d9a19df9fdb8977762a45fe2848ba7">&#9670;&nbsp;</a></span>OTA_PalStatus_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* OTA_PalStatus_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">OtaPalMainStatus_t</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status code to string conversion for OTA PAL status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>The status to convert to a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the status. </dd></dl>

</div>
</div>
<a id="ab5997df93a33e5f1260e7a16655a5cca" name="ab5997df93a33e5f1260e7a16655a5cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5997df93a33e5f1260e7a16655a5cca">&#9670;&nbsp;</a></span>OTA_OsStatus_strerror()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* OTA_OsStatus_strerror </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ota__enum__types.html#gaececff6c0dd8ba4d884544571bd368e7">OtaOsStatus_t</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status code to string conversion for OTA OS status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>The status to convert to a string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the status. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_8ee1a5e78eaec319fe5d64075812fc61.html">include</a></li><li class="navelem"><a class="el" href="ota_8h.html">ota.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
