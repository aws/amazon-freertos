<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>coreMQTT Agent: MQTTAgent_Ping</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="foobar.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">coreMQTT Agent<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">Thread safe MQTT 3.1.1 Client</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('mqtt_agent_ping_function.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">MQTTAgent_Ping </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Add a command to call <a class="elRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/core__mqtt_8h.html#a66eced0c62ace790354ae3de40fc0959">MQTT_Ping()</a> for an MQTT connection.</p>
<div class="fragment"><div class="line"><a class="codeRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#gaba7ec045874a1c3432f99173367f735c">MQTTStatus_t</a> <a class="code" href="core__mqtt__agent_8c.html#ae260e29f31d51953cbab2e1437f645ed">MQTTAgent_Ping</a>( <span class="keyword">const</span> <a class="code" href="struct_m_q_t_t_agent_context__t.html">MQTTAgentContext_t</a> * pMqttAgentContext,</div>
<div class="line">                             <span class="keyword">const</span> <a class="code" href="struct_m_q_t_t_agent_command_info__t.html">MQTTAgentCommandInfo_t</a> * pCommandInfo );</div>
<div class="ttc" id="acore__mqtt__agent_8c_html_ae260e29f31d51953cbab2e1437f645ed"><div class="ttname"><a href="core__mqtt__agent_8c.html#ae260e29f31d51953cbab2e1437f645ed">MQTTAgent_Ping</a></div><div class="ttdeci">MQTTStatus_t MQTTAgent_Ping(const MQTTAgentContext_t *pMqttAgentContext, const MQTTAgentCommandInfo_t *pCommandInfo)</div><div class="ttdoc">Add a command to call MQTT_Ping() for an MQTT connection.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.c:1276</div></div>
<div class="ttc" id="agroup__mqtt__enum__types_html_gaba7ec045874a1c3432f99173367f735c"><div class="ttname"><a href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#gaba7ec045874a1c3432f99173367f735c">MQTTStatus_t</a></div><div class="ttdeci">MQTTStatus_t</div></div>
<div class="ttc" id="astruct_m_q_t_t_agent_command_info__t_html"><div class="ttname"><a href="struct_m_q_t_t_agent_command_info__t.html">MQTTAgentCommandInfo_t</a></div><div class="ttdoc">Struct holding arguments that are common to every command.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:215</div></div>
<div class="ttc" id="astruct_m_q_t_t_agent_context__t_html"><div class="ttname"><a href="struct_m_q_t_t_agent_context__t.html">MQTTAgentContext_t</a></div><div class="ttdoc">Information used by each MQTT agent. A context will be initialized by MQTTAgent_Init(),...</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:179</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>This API function ONLY enqueues a command to send a ping request to the server, and DOES NOT wait for a ping response to be received from the server. To detect whether a Ping Response, has not been received from the server, the <a class="el" href="core__mqtt__agent_8h.html#a9dafeb1701b1a0ee897b626a09cfcff7">MQTTAgent_CommandLoop</a> function SHOULD be used, which returns the <a class="elRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#ggaba7ec045874a1c3432f99173367f735ca076ca8965e836a06e707a94adb26144f">MQTTKeepAliveTimeout</a> return code on a ping response (or keep-alive) timeout.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pMqttAgentContext</td><td>The MQTT agent to use. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pCommandInfo</td><td>The information pertaining to the command, including:<ul>
<li>cmdCompleteCallback Optional callback to invoke when the command completes.</li>
<li>pCmdCompleteCallbackContext Optional completion callback context.</li>
<li>blockTimeMs The maximum amount of time in milliseconds to wait for the command to be posted to the MQTT agent, should the agent's event queue be full. Tasks wait in the Blocked state so don't use any CPU time.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The context passed to the callback through pCmdContext member of <code>pCommandInfo</code> parameter MUST remain in scope at least until the callback has been executed by the agent task.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd><a class="elRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#ggaba7ec045874a1c3432f99173367f735ca484e062cb4f3fccc1858dd25cfeee056">MQTTSuccess</a> if the command was posted to the MQTT agent's event queue. Otherwise an enumerated error code.</dd></dl>
<p><b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// Variables used in this example.</span></div>
<div class="line"><a class="code" href="struct_m_q_t_t_agent_context__t.html">MQTTAgentContext_t</a> agentContext;</div>
<div class="line"><a class="codeRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#gaba7ec045874a1c3432f99173367f735c">MQTTStatus_t</a> status;</div>
<div class="line"><a class="code" href="struct_m_q_t_t_agent_command_info__t.html">MQTTAgentCommandInfo_t</a> commandInfo = { 0 };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Function for command complete callback.</span></div>
<div class="line"><span class="keywordtype">void</span> pingRequestCompleteCb( <a class="code" href="group__mqtt__agent__struct__types.html#ga953da1618097a29381f3fc38f576055c">MQTTAgentCommandContext_t</a> * pCmdCallbackContext,</div>
<div class="line">                            <a class="code" href="struct_m_q_t_t_agent_return_info__t.html">MQTTAgentReturnInfo_t</a> * pReturnInfo );</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Fill the command information.</span></div>
<div class="line">commandInfo.<a class="code" href="struct_m_q_t_t_agent_command_info__t.html#a4c9e9b55c7b576a390f734238b60f3aa">cmdCompleteCallback</a> = pingRequestCompleteCb;</div>
<div class="line">commandInfo.<a class="code" href="struct_m_q_t_t_agent_command_info__t.html#aa0f490187c1199c2d31d4c04a01d4637">blockTimeMs</a> = 500;</div>
<div class="line"> </div>
<div class="line">status = <a class="code" href="core__mqtt__agent_8c.html#ae260e29f31d51953cbab2e1437f645ed">MQTTAgent_Ping</a>( &amp;agentContext, &amp;commandInfo );</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>( status == <a class="codeRef" href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#ggaba7ec045874a1c3432f99173367f735ca484e062cb4f3fccc1858dd25cfeee056">MQTTSuccess</a> )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Command for sending request has been queued. Application can</span></div>
<div class="line">  <span class="comment">// handle keep-alive timeout if detected through return value of</span></div>
<div class="line">  <span class="comment">// MQTTAgent_CommandLoop in the task running the agent.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__mqtt__agent__struct__types_html_ga953da1618097a29381f3fc38f576055c"><div class="ttname"><a href="group__mqtt__agent__struct__types.html#ga953da1618097a29381f3fc38f576055c">MQTTAgentCommandContext_t</a></div><div class="ttdeci">struct MQTTAgentCommandContext MQTTAgentCommandContext_t</div><div class="ttdoc">Struct containing context for a specific command.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:109</div></div>
<div class="ttc" id="agroup__mqtt__enum__types_html_ggaba7ec045874a1c3432f99173367f735ca484e062cb4f3fccc1858dd25cfeee056"><div class="ttname"><a href="https://freertos.org/Documentation/api-ref/coreMQTT/docs/doxygen/output/html/group__mqtt__enum__types.html#ggaba7ec045874a1c3432f99173367f735ca484e062cb4f3fccc1858dd25cfeee056">MQTTSuccess</a></div><div class="ttdeci">MQTTSuccess</div></div>
<div class="ttc" id="astruct_m_q_t_t_agent_command_info__t_html_a4c9e9b55c7b576a390f734238b60f3aa"><div class="ttname"><a href="struct_m_q_t_t_agent_command_info__t.html#a4c9e9b55c7b576a390f734238b60f3aa">MQTTAgentCommandInfo_t::cmdCompleteCallback</a></div><div class="ttdeci">MQTTAgentCommandCallback_t cmdCompleteCallback</div><div class="ttdoc">Callback to invoke upon completion.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:216</div></div>
<div class="ttc" id="astruct_m_q_t_t_agent_command_info__t_html_aa0f490187c1199c2d31d4c04a01d4637"><div class="ttname"><a href="struct_m_q_t_t_agent_command_info__t.html#aa0f490187c1199c2d31d4c04a01d4637">MQTTAgentCommandInfo_t::blockTimeMs</a></div><div class="ttdeci">uint32_t blockTimeMs</div><div class="ttdoc">Maximum block time for enqueueing the command.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:218</div></div>
<div class="ttc" id="astruct_m_q_t_t_agent_return_info__t_html"><div class="ttname"><a href="struct_m_q_t_t_agent_return_info__t.html">MQTTAgentReturnInfo_t</a></div><div class="ttdoc">Struct holding return codes and outputs from a command.</div><div class="ttdef"><b>Definition:</b> core_mqtt_agent.h:97</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
